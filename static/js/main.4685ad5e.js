/*! For license information please see main.4685ad5e.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case b:return"Portal";case x:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Ee=null,Se=null;function xe(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Ce(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Ee||null!==Se)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,je=null,Ve={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Ue=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,Et,St,xt,Ct=!1,Tt=[],It=null,Nt=null,Rt=null,At=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Rt&&Ft(Rt)&&(Rt=null),At.forEach(jt),Pt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Rt&&zt(Rt,e),At.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var qt=_.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=U({},cn,{view:0,detail:0}),fn=an(hn),dn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),mn=an(U({},hn,{relatedTarget:0})),yn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(U({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return Sn}var Cn=U({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Rn=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},Sr={};function xr(e){if(Er[e])return Er[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Cr=xr("animationend"),Tr=xr("animationiteration"),Ir=xr("animationstart"),Nr=xr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Dr=Ar[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,c),a=u}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Tr:case Ir:u=yn;break;case Nr:u=Rn;break;case"scroll":u=fn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Pe(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==c?s:_i(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Hn(s))if(Xn)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Pe(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],Ei=-1;function Si(e){return{current:e}}function xi(e){0>Ei||(e.current=bi[Ei],bi[Ei]=null,Ei--)}function Ci(e,t){Ei++,bi[Ei]=e.current,e.current=t}var Ti={},Ii=Si(Ti),Ni=Si(!1),Ri=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){xi(Ni),xi(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ii),Ci(Ii,e)):xi(Ni),Ci(Ni,n)}var Fi=null,ji=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,ji=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,_a=null;function wa(){_a=ka=ga=null}function ba(e){var t=ya.current;xi(ya),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=U({},h,f);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Uu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=Pi(t)?Ri:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=Pi(t)?Ri:Ii.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case b:return(t=jc(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===s.length)return n(i,h),ia&&Ji(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Ji(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?l=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Za),Ci(Za,t)}function io(){xi(Za),xi(eo),xi(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(xi(Za),xi(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,_o=0,wo=0;function bo(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function xo(){var e=0!==_o;return _o=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Uu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Uu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ru)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Uo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Uo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Uu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:xa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ss={readContext:xa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ru)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Ru.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:xa,useCallback:$o,useContext:xa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},cs={readContext:xa,useCallback:$o,useContext:xa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Ku=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=_.ReactCurrentOwner,_s=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function bs(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=xo(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ts(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Du,Ou),Ou|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Du,Ou),Ou|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Pi(n)?Ri:Ii.current;return a=Ai(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=xo(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Hs(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=xa(c):c=Ai(t,c=Pi(n)?Ri:Ii.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ha(t,o,r,c),Ra=!1;var f=t.memoizedState;o.state=f,Ua(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Ra?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Ra||Ba(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=xa(u):u=Ai(t,u=Pi(n)?Ri:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ha(t,o,r,u),Ra=!1,f=t.memoizedState,o.state=f,Ua(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Ra?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Ra||Ba(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ps,Os,Ds,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Uc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Ms,e):js(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Ru)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=js(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Us(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Gs(t),null;case 3:return r=t.stateNode,io(),xi(Ni),xi(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Os(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(xi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),Os(e,t),null===e&&Br(t.stateNode.containerInfo),Gs(t),null;case 10:return ba(t.type._context),Gs(t),null;case 19:if(xi(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*Xe()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ni),xi(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(so),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){xc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var hu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||eu(n,t);case 6:var r=hu,i=fu;hu=null,du(e,t,n),fu=i,null!==(hu=r)&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=fu,hu=n.stateNode.containerInfo,fu=!0,du(e,t,n),hu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Xs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,du(e,t,n),Xs=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,fu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===hu)throw Error(a(160));pu(o,s,i),hu=null,fu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){xc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){xc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){xc(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){xc(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Xe())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,mu(t,e),Xs=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){xc(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){bu(f);continue}}null!==p?(p.return=d,Zs=p):bu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){xc(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,_u(e,t,n)}function _u(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=$s;var c=Xs;if($s=o,(Xs=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?Eu(i):null!==u?(u.return=o,Zs=u):Eu(i);for(;null!==a;)Zs=a,_u(a,t,n),a=a.sibling;Zs=i,$s=s,Xs=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&au(t)}catch(d){xc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function bu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Eu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){xc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xc(t,i,u)}}var a=t.return;try{au(t)}catch(u){xc(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){xc(t,o,u)}}}catch(u){xc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Su,xu=Math.ceil,Cu=_.ReactCurrentDispatcher,Tu=_.ReactCurrentOwner,Iu=_.ReactCurrentBatchConfig,Nu=0,Ru=null,Au=null,Pu=0,Ou=0,Du=Si(0),Lu=0,Mu=null,Uu=0,Fu=0,ju=0,Vu=null,zu=null,Bu=0,qu=1/0,Hu=null,Wu=!1,Ku=null,Gu=null,Qu=!1,Yu=null,$u=0,Xu=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?Xe():-1!==Zu?Zu:Zu=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));yt(e,n,r),0!==(2&Nu)&&e===Ru||(e===Ru&&(0===(2&Nu)&&(Fu|=n),4===Lu&&uc(e,Pu)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=Xe()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Ru?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ft(e,e===Ru?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Ru===e&&Pu===t||(Hu=null,qu=Xe()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Cu.current=o,Nu=i,null!==Au?t=0:(Ru=null,Pu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,zu,Hu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,zu,Hu),t);break}bc(e,zu,Hu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,zu,Hu),r);break}bc(e,zu,Hu);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~ju,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));Ec();var t=ft(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,zu,Hu),ic(e,Xe()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=Xe()+500,ji&&Bi())}}function hc(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&Ec();var t=Nu;Nu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Nu=t))&&Bi()}}function fc(){Ou=Du.current,xi(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),xi(Ni),xi(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(so);break;case 10:ba(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ru=e,Au=e=Dc(e.current,null),Pu=Ou=t,Lu=0,Mu=null,ju=Fu=Uu=0,zu=Vu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Au;try{if(wa(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,_o=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(_){t=_,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Ru||0===(268435455&Uu)&&0===(268435455&Fu)||uc(Ru,Pu)}function yc(e,t){var n=Nu;Nu|=2;var r=vc();for(Ru===e&&Pu===t||(Hu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Nu=n,Cu.current=r,null!==Au)throw Error(a(261));return Ru=null,Pu=0,Lu}function gc(){for(;null!==Au;)_c(Au)}function kc(){for(;null!==Au&&!Ye();)_c(Au)}function _c(e){var t=Su(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wc(e):Au=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ou)))return void(Au=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Lu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Lu&&(Lu=5)}function bc(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{Ec()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ru&&(Au=Ru=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Rc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),yu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ku(n,e,i),$e(),Nu=u,kt=s,Iu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,$u=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Ku,Ku=null,e;0!==(1&$u)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Bi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function Ec(){if(null!==Yu){var e=_t($u),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,$u=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(ou(h),h===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var _=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Zs=_;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(b){xc(u,u.return,b)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Nu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function xc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Pu&n)===n&&(4===Lu||3===Lu&&(130023424&Pu)===Pu&&500>Xe()-Bu?dc(e,0):ju|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Rc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case S:s=8,i|=8;break;case x:return(e=Pc(12,n,t,2|i)).elementType=x,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case A:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=bs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ea(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=xa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Es(e,t,r,i=ma(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Hs(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Nu)&&(qu=Xe()+500,Bi()))}break;case 13:hc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return kt},xt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ne=hc;var tl={usingClientEntryPoint:!1,Events:[ki,_i,wi,Ce,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var _=k.prototype=new g;_.constructor=k,v(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)b.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,_(e),!v)if(null!==r(c))v=!0,O(b);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function b(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,x=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function R(){if(null!==x){var e=t.unstable_now();I=e;var n=!0;try{n=x(!0,e)}finally{n?E():(S=!1,x=null)}}else S=!1}if("function"===typeof k)E=function(){k(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=R,E=function(){P.postMessage(null)}}else E=function(){y(R,0)};function O(e){x=e,S||(S=!0,E())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(C),C=-1):m=!0,D(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e,t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||s(e,t)||u()}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return o(e)}(e)||l(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(fI){return!1}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t=_();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function E(e,t,n){return E=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},E.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,k(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)},S(e)}function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var T,I="popstate";function N(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(fI){}}}function A(e,t){return{usr:e.state,key:e.key,idx:t}}function P(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?D(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function D(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function L(t,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,h=e.Pop,f=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){h=e.Pop;var t=p(),n=null==t?null:t-d;d=t,f&&f({action:h,location:y.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:O(e);return N(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return h},get location(){return t(s,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(I,v),f=e,function(){s.removeEventListener(I,v),f=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){h=e.Push;var i=P(y.location,t,n);r&&r(i,t);var a=A(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(fu){s.location.assign(o)}c&&f&&f({action:h,location:y.location,delta:1})},replace:function(t,n){h=e.Replace;var i=P(y.location,t,n);r&&r(i,t);var a=A(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function M(e,t,n){void 0===n&&(n="/");var r=$(("string"===typeof t?D(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=G(i[o],Y(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(N(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ee([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(N(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:K(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=x(F(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function F(e){var t=e.split("/");if(0===t.length)return[];var n,r=a(n=t)||l(n)||s(n)||u(),i=r[0],o=r.slice(1),c=i.endsWith("?"),f=i.replace(/\?$/,"");if(0===o.length)return c?[f,""]:[f];var d=F(o.join("/")),p=[];return p.push.apply(p,h(d.map((function(e){return""===e?f:[f,e].join("/")})))),c&&p.push.apply(p,h(d)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var j=/^:\w+$/,V=3,z=2,B=1,q=10,H=-2,W=function(e){return"*"===e};function K(e,t){var n=e.split("/"),r=n.length;return n.some(W)&&(r+=H),t&&(r+=z),n.filter((function(e){return!W(e)})).reduce((function(e,t){return e+(j.test(t)?V:""===t?B:q)}),r)}function G(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:ee([i,l.pathname]),pathnameBase:te(ee([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=ee([i,l.pathnameBase]))}return a}function Q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(fu){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+fu+")."),e}}(l[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function Y(e){try{return decodeURI(e)}catch(fu){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+fu+")."),e}}function $(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function X(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function J(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Z(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=D(e):(N(!(i=C({},e)).pathname||!i.pathname.includes("?"),X("?","pathname","search",i)),N(!i.pathname||!i.pathname.includes("#"),X("#","pathname","hash",i)),N(!i.search||!i.search.includes("#"),X("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?D(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ne(a),hash:re(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ie=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n)}(S(Error));function ae(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var oe=["post","put","patch","delete"],se=(new Set(oe),["get"].concat(oe));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var ue="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ce=t.useState,le=t.useEffect,he=t.useLayoutEffect,fe=t.useDebugValue;function de(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ue(n,r)}catch(fu){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var pe=t.createContext(null);var ve=t.createContext(null);var me=t.createContext(null);var ye=t.createContext(null);var ge=t.createContext(null);var ke=t.createContext({outlet:null,matches:[]});var _e=t.createContext(null);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function be(){return null!=t.useContext(ge)}function Ee(){return be()||N(!1),t.useContext(ge).location}function Se(){be()||N(!1);var e=t.useContext(ye),n=e.basename,r=e.navigator,i=t.useContext(ke).matches,a=Ee().pathname,o=JSON.stringify(J(i).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);return t.useEffect((function(){s.current=!0})),t.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=Z(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:ee([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a])}function xe(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(ke).matches,a=Ee().pathname,o=JSON.stringify(J(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return Z(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function Ce(){var e=function(){var e,n=t.useContext(_e),r=Pe(Ie.UseRouteError),i=Oe(Ie.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var Te,Ie,Ne=function(e){g(r,e);var n=b(r);function r(e){var t;return f(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return m(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(ke.Provider,{value:this.props.routeContext},t.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function Re(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(pe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(ke.Provider,{value:n},i)}function Ae(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||N(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;r&&(c=o.route.ErrorBoundary?t.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:t.createElement(Ce,null));var l=n.concat(i.slice(0,s+1)),h=function(){var n=e;return u?n=c:o.route.Component?n=t.createElement(o.route.Component,null):o.route.element&&(n=o.route.element),t.createElement(Re,{match:o,routeContext:{outlet:e,matches:l},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===s)?t.createElement(Ne,{location:r.location,component:c,error:u,children:h(),routeContext:{outlet:null,matches:l}}):h()}),null)}function Pe(e){var n=t.useContext(ve);return n||N(!1),n}function Oe(e){var n=function(e){var n=t.useContext(ke);return n||N(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||N(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Te||(Te={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ie||(Ie={}));var De;function Le(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;be()||N(!1);var o=t.useContext(ve),s=Se();return t.useEffect((function(){o&&"idle"!==o.navigation.state||s(n,{replace:r,state:i,relative:a})})),null}function Me(e){N(!1)}function Ue(n){var r=n.basename,i=void 0===r?"/":r,a=n.children,o=void 0===a?null:a,s=n.location,u=n.navigationType,c=void 0===u?e.Pop:u,l=n.navigator,h=n.static,f=void 0!==h&&h;be()&&N(!1);var d=i.replace(/^\/*/,"/"),p=t.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=D(s));var v=s,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,_=v.hash,w=void 0===_?"":_,b=v.state,E=void 0===b?null:b,S=v.key,x=void 0===S?"default":S,C=t.useMemo((function(){var e=$(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:E,key:x},navigationType:c}}),[d,y,k,w,E,x,c]);return null==C?null:t.createElement(ye.Provider,{value:p},t.createElement(ge.Provider,{children:o,value:C}))}function Fe(n){var r=n.children,i=n.location,a=t.useContext(pe);return function(n,r){be()||N(!1);var i,a=t.useContext(ye).navigator,o=t.useContext(ve),s=t.useContext(ke).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,Ee());if(r){var f,d="string"===typeof r?D(r):r;"/"===l||(null==(f=d.pathname)?void 0:f.startsWith(l))||N(!1),i=d}else i=h;var p=i.pathname||"/",v=M(n,{pathname:"/"===l?p:p.slice(l.length)||"/"}),m=Ae(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ee([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ee([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,o||void 0);return r&&m?t.createElement(ge.Provider,{value:{location:we({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:e.Pop}},m):m}(a&&!r?a.router.routes:Ve(r),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(De||(De={}));var je=new Promise((function(){}));t.Component;function Ve(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(h(n),[i]);if(e.type!==t.Fragment){e.type!==Me&&N(!1),e.props.index&&e.props.children&&N(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),r.push(o)}else r.push.apply(r,Ve(e.props.children,a))}})),r}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var qe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function He(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),L((function(e,t){var n=e.location;return P("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:O(t)}),null,n)));var s=o.current,u=c(t.useState({action:s.action,location:s.location}),2),l=u[0],h=u[1];return t.useLayoutEffect((function(){return s.listen(h)}),[s]),t.createElement(Ue,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}var We="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,c=e.target,l=e.to,h=e.preventScrollReset,f=Be(e,qe),d=t.useContext(ye).basename,p=!1;if("string"===typeof l&&Ke.test(l)&&(r=l,We)){var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=$(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}var g=function(e,n){var r=(void 0===n?{}:n).relative;be()||N(!1);var i=t.useContext(ye),a=i.basename,o=i.navigator,s=xe(e,{relative:r}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:ee([a,c])),o.createHref({pathname:h,search:l,hash:u})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=Se(),l=Ee(),h=xe(e,{relative:u});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:O(l)===O(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,h,a,o,i,e,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:h,relative:a});return t.createElement("a",ze({},f,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var Qe,Ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Qe||(Qe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ye||(Ye={}));function $e(){$e=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new C(i||[]);return r(o,"_invoke",{value:b(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var h={};function f(){}function p(){}function v(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==d(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Xe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(fu){return void n(fu)}s.done?t(u):Promise.resolve(u).then(r,i)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Xe(a,r,i,o,s,"next",e)}function s(e){Xe(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Ze(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},tt=function(e,t){if(!e)throw nt(t)},nt=function(e){return new Error("Firebase Database ("+et.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},rt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},it={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(rt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new at;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},at=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return m(n)}(S(Error)),ot=function(e){var t=rt(e);return it.encodeByteArray(t,!0)},st=function(e){return ot(e).replace(/\./g,"")},ut=function(e){try{return it.decodeString(e,!0)}catch(fI){console.error("base64Decode failed: ",fI)}return null};function ct(e){return lt(void 0,e)}function lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=lt(e[n],t[n]));return e}var ht=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ft=function(){try{return ht()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/fire-chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"9d95187d657b5c056be45553cbece5ce"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(fI){return}var t=e&&ut(e[1]);return t&&JSON.parse(t)}}()}catch(fI){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(fI))}},dt=function(e){var t,n;return null===(n=null===(t=ft())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},pt=function(e){var t=dt(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},vt=function(){var e;return null===(e=ft())||void 0===e?void 0:e.config},mt=function(e){var t;return null===(t=ft())||void 0===t?void 0:t["_".concat(e)]},yt=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function gt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[st(JSON.stringify({alg:"none",type:"JWT"})),st(JSON.stringify(a)),""].join(".")}function kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _t(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function wt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function bt(){return!0===et.NODE_CLIENT||!0===et.NODE_ADMIN}function Et(){try{return"object"===typeof indexedDB}catch(fI){return!1}}var St=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),xt.prototype.create),a}return m(n)}(S(Error)),xt=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ct,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new St(n,a,t)}}]),e}();var Ct=/\{\$([^}]+)}/g;function Tt(e){return JSON.parse(e)}function It(e){return JSON.stringify(e)}var Nt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Tt(ut(a[0])||""),n=Tt(ut(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(fI){}return{header:t,claims:n,data:r,signature:i}};function Rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function At(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Pt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ot(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Dt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Lt(s)&&Lt(u)){if(!Dt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Lt(e){return null!==e&&"object"===typeof e}function Mt(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ut(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ft(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var jt=function(){function e(){f(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var Vt=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=x(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=zt),void 0===r.error&&(r.error=zt),void 0===r.complete&&(r.complete=zt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(fI){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(fI){"undefined"!==typeof console&&console.error&&console.error(fI)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function zt(){}function Bt(e,t){return"".concat(e," failed: ").concat(t," argument ")}var qt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ht(e){return e&&e._delegate?e._delegate:e}var Wt=function(){function e(t,n,r){f(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Kt="[DEFAULT]",Gt=function(){function e(t,n){f(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new yt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(fI){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(fI){if(r)return null;throw fI}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Kt})}catch(fI){}var t,n=x(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(fI){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=x(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],l=s[1];r===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Kt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;return this.component?this.component.multipleInstances?e:Kt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Qt,Yt,$t=function(){function e(t){f(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Gt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Xt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Yt||(Yt={}));var Jt={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},Zt=Yt.INFO,en=(Ze(Qt={},Yt.DEBUG,"log"),Ze(Qt,Yt.VERBOSE,"log"),Ze(Qt,Yt.INFO,"info"),Ze(Qt,Yt.WARN,"warn"),Ze(Qt,Yt.ERROR,"error"),Qt),tn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=en[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},nn=function(){function e(t){f(this,e),this.name=t,this._logLevel=Zt,this._logHandler=tn,this._userLogHandler=null,Xt.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Yt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Jt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Yt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Yt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yt.INFO].concat(t)),this._logHandler.apply(this,[this,Yt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yt.WARN].concat(t)),this._logHandler.apply(this,[this,Yt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yt.ERROR].concat(t)),this._logHandler.apply(this,[this,Yt.ERROR].concat(t))}}]),e}();function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on,sn,un=function(e,t){return t.some((function(t){return e instanceof t}))};var cn=new WeakMap,ln=new WeakMap,hn=new WeakMap,fn=new WeakMap,dn=new WeakMap;var pn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ln.get(e);if("objectStoreNames"===t)return e.objectStoreNames||hn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function vn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(sn||(sn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(gn(this),n),yn(cn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(e.apply(gn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[gn(this),t].concat(r));return hn.set(a,t.sort?t.sort():[t]),yn(a)}}function mn(e){return"function"===typeof e?vn(e):(e instanceof IDBTransaction&&function(e){if(!ln.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ln.set(e,t)}}(e),un(e,on||(on=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,pn):e)}function yn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(yn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&cn.set(t,e)})).catch((function(){})),dn.set(t,e),t}(e);if(fn.has(e))return fn.get(e);var t=mn(e);return t!==e&&(fn.set(e,t),dn.set(t,e)),t}var gn=function(e){return dn.get(e)};var kn,_n,wn=["get","getKey","getAll","getAllKeys","count"],bn=["put","add","delete","clear"],En=new Map;function Sn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(En.get(t))return En.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=bn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||wn.includes(n))){var a=function(){var e=Je($e().mark((function e(t){var a,o,s,u,c,l,h=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return En.set(t,a),a}}}pn=function(e){return an(an({},e),{},{get:function(t,n,r){return Sn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Sn(t,n)||e.has(t,n)}})}(pn);var xn=function(){function e(t){f(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Cn="@firebase/app",Tn="0.9.25",In=new nn("@firebase/app"),Nn="[DEFAULT]",Rn=(Ze(kn={},Cn,"fire-core"),Ze(kn,"@firebase/app-compat","fire-core-compat"),Ze(kn,"@firebase/analytics","fire-analytics"),Ze(kn,"@firebase/analytics-compat","fire-analytics-compat"),Ze(kn,"@firebase/app-check","fire-app-check"),Ze(kn,"@firebase/app-check-compat","fire-app-check-compat"),Ze(kn,"@firebase/auth","fire-auth"),Ze(kn,"@firebase/auth-compat","fire-auth-compat"),Ze(kn,"@firebase/database","fire-rtdb"),Ze(kn,"@firebase/database-compat","fire-rtdb-compat"),Ze(kn,"@firebase/functions","fire-fn"),Ze(kn,"@firebase/functions-compat","fire-fn-compat"),Ze(kn,"@firebase/installations","fire-iid"),Ze(kn,"@firebase/installations-compat","fire-iid-compat"),Ze(kn,"@firebase/messaging","fire-fcm"),Ze(kn,"@firebase/messaging-compat","fire-fcm-compat"),Ze(kn,"@firebase/performance","fire-perf"),Ze(kn,"@firebase/performance-compat","fire-perf-compat"),Ze(kn,"@firebase/remote-config","fire-rc"),Ze(kn,"@firebase/remote-config-compat","fire-rc-compat"),Ze(kn,"@firebase/storage","fire-gcs"),Ze(kn,"@firebase/storage-compat","fire-gcs-compat"),Ze(kn,"@firebase/firestore","fire-fst"),Ze(kn,"@firebase/firestore-compat","fire-fst-compat"),Ze(kn,"fire-js","fire-js"),Ze(kn,"firebase","fire-js-all"),kn),An=new Map,Pn=new Map;function On(e,t){try{e.container.addComponent(t)}catch(fI){In.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),fI)}}function Dn(e){var t=e.name;if(Pn.has(t))return In.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pn.set(t,e);var n,r=x(An.values());try{for(r.s();!(n=r.n()).done;){On(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ln(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Mn=(Ze(_n={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Ze(_n,"bad-app-name","Illegal App name: '{$appName}"),Ze(_n,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ze(_n,"app-deleted","Firebase App named '{$appName}' already deleted"),Ze(_n,"no-options","Need to provide options, when not being deployed to hosting via source."),Ze(_n,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ze(_n,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ze(_n,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ze(_n,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ze(_n,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ze(_n,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),_n),Un=new xt("app","Firebase",Mn),Fn=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}]),e}(),jn="10.7.1";function Vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Nn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Un.create("bad-app-name",{appName:String(i)});if(n||(n=vt()),!n)throw Un.create("no-options");var a=An.get(i);if(a){if(Dt(n,a.options)&&Dt(r,a.config))return a;throw Un.create("duplicate-app",{appName:i})}var o,s=new $t(i),u=x(Pn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new Fn(n,r,s);return An.set(i,l),l}function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=An.get(e);if(!t&&e===Nn&&vt())return Vn();if(!t)throw Un.create("no-app",{appName:e});return t}function Bn(e,t,n){var r,i=null!==(r=Rn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void In.warn(s.join(" "))}Dn(new Wt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var qn="firebase-heartbeat-database",Hn=1,Wn="firebase-heartbeat-store",Kn=null;function Gn(){return Kn||(Kn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=yn(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(yn(s.result),e.oldVersion,e.newVersion,yn(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(qn,Hn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Wn)}}).catch((function(e){throw Un.create("idb-open",{originalErrorMessage:e.message})}))),Kn}function Qn(e){return Yn.apply(this,arguments)}function Yn(){return Yn=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gn();case 3:return n=e.sent,e.next=6,n.transaction(Wn).objectStore(Wn).get(Jn(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof St?In.warn(e.t0.message):(i=Un.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),In.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Yn.apply(this,arguments)}function $n(e,t){return Xn.apply(this,arguments)}function Xn(){return Xn=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gn();case 3:return r=e.sent,i=r.transaction(Wn,"readwrite"),a=i.objectStore(Wn),e.next=8,a.put(n,Jn(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof St?In.warn(e.t0.message):(o=Un.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),In.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Xn.apply(this,arguments)}function Jn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Zn=1024,er=function(){function e(t){var n=this;f(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ir(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=tr(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=9;break}return e.next=6,this._heartbeatsCachePromise;case 6:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=9;break}return e.abrupt("return");case 9:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=13;break}return e.abrupt("return");case 13:this._heartbeatsCache.heartbeats.push({date:a,agent:i});case 14:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(n=tr(),r=nr(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=st(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function tr(){return(new Date).toISOString().substring(0,10)}function nr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn,r=[],i=e.slice(),a=x(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ar(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ar(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var rr,ir=function(){function e(t){f(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Et()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(fu){t(fu)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Qn(this.app);case 9:if(!(null===(t=e.sent)||void 0===t?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",$n(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",$n(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ar(e){return st(JSON.stringify({version:2,heartbeats:e})).length}rr="",Dn(new Wt("platform-logger",(function(e){return new xn(e)}),"PRIVATE")),Dn(new Wt("heartbeat",(function(e){return new er(e)}),"PRIVATE")),Bn(Cn,Tn,rr),Bn(Cn,Tn,"esm2017"),Bn("fire-js","");function or(){return or="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},or.apply(this,arguments)}Bn("firebase","10.7.1","app");function sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ur;Object.create;function cr(){return Ze({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var lr=cr,hr=new xt("auth","Firebase",cr()),fr=new nn("@firebase/auth");function dr(e){if(fr.logLevel<=Yt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fr.warn.apply(fr,["Auth (".concat(jn,"): ").concat(e)].concat(n))}}function pr(e){if(fr.logLevel<=Yt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fr.error.apply(fr,["Auth (".concat(jn,"): ").concat(e)].concat(n))}}function vr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw kr.apply(void 0,[e].concat(n))}function mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kr.apply(void 0,[e].concat(n))}function yr(e,t,n){var r=Object.assign(Object.assign({},lr()),Ze({},t,n));return new xt("auth","Firebase",r).create(t,{appName:e.name})}function gr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&vr(e,"argument-error"),yr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return hr.create.apply(hr,[e].concat(n))}function _r(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw kr.apply(void 0,[t].concat(r))}}function wr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw pr(t),new Error(t)}function br(e,t){e||wr(t)}function Er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Sr(){return"http:"===xr()||"https:"===xr()}function xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Cr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Sr()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Tr=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,br(n>t,"Short delay should be less than long delay!"),this.isMobile=_t()||wt()}return m(e,[{key:"get",value:function(){return Cr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Ir(e,t){br(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Nr=function(){function e(){f(this,e)}return m(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}))},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Rr=(Ze(ur={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ze(ur,"MISSING_CUSTOM_TOKEN","internal-error"),Ze(ur,"INVALID_IDENTIFIER","invalid-email"),Ze(ur,"MISSING_CONTINUE_URI","internal-error"),Ze(ur,"INVALID_PASSWORD","wrong-password"),Ze(ur,"MISSING_PASSWORD","missing-password"),Ze(ur,"INVALID_LOGIN_CREDENTIALS","invalid-credential"),Ze(ur,"EMAIL_EXISTS","email-already-in-use"),Ze(ur,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ze(ur,"INVALID_IDP_RESPONSE","invalid-credential"),Ze(ur,"INVALID_PENDING_TOKEN","invalid-credential"),Ze(ur,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ze(ur,"MISSING_REQ_TYPE","internal-error"),Ze(ur,"EMAIL_NOT_FOUND","user-not-found"),Ze(ur,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ze(ur,"EXPIRED_OOB_CODE","expired-action-code"),Ze(ur,"INVALID_OOB_CODE","invalid-action-code"),Ze(ur,"MISSING_OOB_CODE","internal-error"),Ze(ur,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ze(ur,"INVALID_ID_TOKEN","invalid-user-token"),Ze(ur,"TOKEN_EXPIRED","user-token-expired"),Ze(ur,"USER_NOT_FOUND","user-token-expired"),Ze(ur,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ze(ur,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),Ze(ur,"INVALID_CODE","invalid-verification-code"),Ze(ur,"INVALID_SESSION_INFO","invalid-verification-id"),Ze(ur,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ze(ur,"MISSING_SESSION_INFO","missing-verification-id"),Ze(ur,"SESSION_EXPIRED","code-expired"),Ze(ur,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ze(ur,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ze(ur,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ze(ur,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ze(ur,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ze(ur,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ze(ur,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ze(ur,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ze(ur,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ze(ur,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ze(ur,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ze(ur,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ze(ur,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ze(ur,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ze(ur,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ze(ur,"MISSING_CLIENT_TYPE","missing-client-type"),Ze(ur,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ze(ur,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ze(ur,"INVALID_REQ_TYPE","invalid-req-type"),ur),Ar=new Tr(3e4,6e4);function Pr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Or(e,t,n,r){return Dr.apply(this,arguments)}function Dr(){return Dr=Je($e().mark((function e(t,n,r,i){var a,o=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Lr(t,a,Je($e().mark((function e(){var a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Mt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Nr.fetch()(jr(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Lr(e,t,n){return Mr.apply(this,arguments)}function Mr(){return Mr=Je($e().mark((function e(t,n,r){var i,a,o,s,u,l,h,f,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Rr),n),e.prev=2,a=new zr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Br(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,l=u.split(" : "),h=c(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Br(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Br(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Br(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw yr(t,p,d);case 34:vr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof St)){e.next=41;break}throw e.t0;case 41:vr(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Mr.apply(this,arguments)}function Ur(e,t,n,r){return Fr.apply(this,arguments)}function Fr(){return Fr=Je($e().mark((function e(t,n,r,i){var a,o,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Or(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&vr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function jr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ir(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Vr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var zr=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(mr(n.auth,"network-request-failed"))}),Ar.get())}))}return m(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Br(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=mr(e,t,r);return i.customData._tokenResponse=n,i}function qr(e){return void 0!==e&&void 0!==e.enterprise}var Hr=function(){function e(t){if(f(this,e),this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}return m(e,[{key:"getProviderEnforcementState",value:function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;var t,n=x(this.recaptchaEnforcementState);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.provider&&r.provider===e)return Vr(r.enforcementState)}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"isProviderEnabled",value:function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}]),e}();function Wr(e,t){return Kr.apply(this,arguments)}function Kr(){return Kr=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"GET","/v2/recaptchaConfig",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Gr(e,t){return Qr.apply(this,arguments)}function Qr(){return Qr=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Yr(e,t){return $r.apply(this,arguments)}function $r(){return $r=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Xr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(fI){}}function Jr(){return Jr=Je($e().mark((function e(t){var n,r,i,a,o,s,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Ht(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,_r((a=ei(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Xr(Zr(a.auth_time)),issuedAtTime:Xr(Zr(a.iat)),expirationTime:Xr(Zr(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Zr(e){return 1e3*Number(e)}function ei(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return pr("JWT malformed, contained fewer than 3 sections"),null;try{var a=ut(r);return a?JSON.parse(a):(pr("Failed to decode base64 JWT payload"),null)}catch(fI){return pr("Caught error parsing JWT payload as JSON",null===fI||void 0===fI?void 0:fI.toString()),null}}function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=Je($e().mark((function e(t,n){var r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof St&&ri(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ni.apply(this,arguments)}function ri(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ii=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return m(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ai=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return m(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function oi(e){return si.apply(this,arguments)}function si(){return si=Je($e().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ti(t,Yr(r,{idToken:i}));case 6:_r(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=sr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=ci(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ai(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}function ui(){return(ui=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ht(t),e.next=3,oi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function li(e,t){return hi.apply(this,arguments)}function hi(){return hi=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr(t,{},Je($e().mark((function e(){var r,i,a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=jr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Nr.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}function fi(e,t){return di.apply(this,arguments)}function di(){return di=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v2/accounts:revokeToken",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}var pi=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return m(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){_r(e.idToken,"internal-error"),_r("undefined"!==typeof e.idToken,"internal-error"),_r("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ei(e);return _r(t,"internal-error"),_r("undefined"!==typeof t.exp,"internal-error"),_r("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Je($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],_r(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,li(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return wr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(_r("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(_r("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(_r("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function vi(e,t){_r("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var mi=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=sr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ii(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new ai(a.createdAt||void 0,a.lastLoginAt||void 0)}return m(e,[{key:"getIdToken",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ti(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(_r(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Jr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ui.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(_r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){_r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Je($e().mark((function e(t){var n,r,i=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,oi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ti(this,Gr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,E=n.stsTokenManager;_r(k&&E,t,"internal-error");var S=pi.fromJSON(this.name,E);_r("string"===typeof k,t,"internal-error"),vi(h,t.name),vi(f,t.name),_r("boolean"===typeof _,t,"internal-error"),_r("boolean"===typeof w,t,"internal-error"),vi(d,t.name),vi(p,t.name),vi(v,t.name),vi(m,t.name),vi(y,t.name),vi(g,t.name);var x=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return b&&Array.isArray(b)&&(x.providerData=b.map((function(e){return Object.assign({},e)}))),m&&(x._redirectEventId=m),x}},{key:"_fromIdTokenResponse",value:function(){var t=Je($e().mark((function t(n,r){var i,a,o,s=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new pi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,oi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),yi=new Map;function gi(e){br(e instanceof Function,"Expected a class definition");var t=yi.get(e);return t?(br(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yi.set(e,t),t)}var ki=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return m(e,[{key:"_isAvailable",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ki.type="NONE";var _i=ki;function wi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var bi=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=wi(this.userKey,a.apiKey,o),this.fullPersistenceKey=wi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return m(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?mi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Je($e().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(gi(_i),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||gi(_i),s=wi(i,n.config.apiKey,n.name),u=null,c=x(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=mi._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ei(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ti(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Si(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ni(t))return"Blackberry";if(Ri(t))return"Webos";if(xi(t))return"Safari";if((t.includes("chrome/")||Ci(t))&&!t.includes("edge/"))return"Chrome";if(Ii(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/firefox\//i.test(e)}function xi(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/crios\//i.test(e)}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iemobile/i.test(e)}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/android/i.test(e)}function Ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/blackberry/i.test(e)}function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/webos/i.test(e)}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pi(){return function(){var e=kt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return Ai(e)||Ii(e)||Ri(e)||Ni(e)||/windows phone/i.test(e)||Ti(e)}function Di(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ei(kt());break;case"Worker":t="".concat(Ei(kt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(jn,"/").concat(r)}var Li=function(){function e(t){f(this,e),this.auth=t,this.queue=[]}return m(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(fI){r(fI)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=x(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=x(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Mi(e){return Ui.apply(this,arguments)}function Ui(){return Ui=Je($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Or(t,"GET","/v2/passwordPolicy",Pr(t,n)));case 2:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}var Fi=function(){function e(t){var n,r,i,a;f(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return m(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNumericCharacter)||void 0===a||a),s.isValid&&(s.isValid=null===(o=s.containsNonAlphanumericCharacter)||void 0===o||o),s}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),ji=function(){function e(t,n,r,i){f(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zi(this),this.idTokenSubscription=new zi(this),this.beforeStateQueue=new Li(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return m(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(Je($e().mark((function r(){var i,a;return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,bi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return _r(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ht(t):null)&&_r(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Je($e().mark((function e(t){var n,r=this,i=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&_r(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Je($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(gi(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(this);case 2:t=e.sent,n=new Fi(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new xt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"revokeAccessToken",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=8;break}return e.next=3,this.currentUser.getIdToken();case 3:return n=e.sent,r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n},null!=this.tenantId&&(r.tenantId=this.tenantId),e.next=8,fi(this,r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return _r(n=t&&gi(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,bi.create(this,[gi(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Je($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,s=this._isInitialized?Promise.resolve():this._initializationPromise;if(_r(s,this,"internal-error"),s.then((function(){o||a(i.currentUser)})),"function"===typeof t){var u=e.addObserver(t,n,r);return function(){o=!0,u()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return _r(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Di(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Je($e().mark((function e(){var t,n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ze({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&dr("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Vi(e){return Ht(e)}var zi=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new Vt(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return m(e,[{key:"next",get:function(){return _r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Bi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=mr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function qi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Hi=function(){function e(t){f(this,e),this.type="recaptcha-enterprise",this.auth=Vi(t)}return m(e,[{key:"verify",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;qr(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Je($e().mark((function e(n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Hr(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&qr(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Bi("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wi(e,t,n){return Ki.apply(this,arguments)}function Ki(){return Ki=Je($e().mark((function e(t,n,r){var i,a,o,s,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Hi(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ki.apply(this,arguments)}function Gi(e,t,n,r){return Qi.apply(this,arguments)}function Qi(){return Qi=Je($e().mark((function e(t,n,r,i){var a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(a=t._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))){e.next=7;break}return e.next=3,Wi(t,n,r,"getOobCode"===r);case 3:return o=e.sent,e.abrupt("return",i(t,o));case 7:return e.abrupt("return",i(t,n).catch(function(){var e=Je($e().mark((function e(a){var o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),e.next=4,Wi(t,n,r,"getOobCode"===r);case 4:return o=e.sent,e.abrupt("return",i(t,o));case 8:return e.abrupt("return",Promise.reject(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Yi(e,t,n){var r=Vi(e);_r(r._canInitEmulator,r,"emulator-config-failed"),_r(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=$i(t),o=function(e){var t=$i(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Xi(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Xi(o[1])}}(t),s=o.host,u=o.port,l=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $i(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ji=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return m(e,[{key:"toJSON",value:function(){return wr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return wr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return wr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return wr("not implemented")}}]),e}();function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:signUp",n));case 1:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,"POST","/v1/accounts:signInWithPassword",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}var sa=function(e){g(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return m(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",Gi(t,n,"signInWithPassword",ta));case 5:return e.abrupt("return",ra(t,{email:this._email,oobCode:this._password}));case 6:vr(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",Gi(t,r,"signUpPassword",Zi));case 5:return e.abrupt("return",aa(t,{idToken:n,email:this._email,oobCode:this._password}));case 6:vr(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ji);function ua(e,t){return ca.apply(this,arguments)}function ca(){return ca=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,"POST","/v1/accounts:signInWithIdp",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}var la=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return m(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ua(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ua(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ua(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=sr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ji);function ha(e,t){return fa.apply(this,arguments)}function fa(){return fa=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:sendVerificationCode",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function da(){return da=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function pa(){return pa=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Br(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}var va=Ze({},"USER_NOT_FOUND","user-not-found");function ma(){return ma=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ur(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,r),va));case 2:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}var ya=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return m(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return pa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ma.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ji);var ga=function(){function e(t){var n,r,i,a,o,s;f(this,e);var u=Ut(Ft(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);_r(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return m(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ut(Ft(e)).link,n=t?Ut(Ft(t)).deep_link_id:null,r=Ut(Ft(e)).deep_link_id;return(r?Ut(Ft(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var ka=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return m(e,null,[{key:"credential",value:function(e,t){return sa._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ga.parseLink(t);return _r(n,"argument-error"),sa._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ka.PROVIDER_ID="password",ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var _a=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return m(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),wa=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return m(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(_a),ba=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this,"facebook.com")}return m(n,null,[{key:"credential",value:function(e){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(wa);ba.FACEBOOK_SIGN_IN_METHOD="facebook.com",ba.PROVIDER_ID="facebook.com";var Ea=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return m(n,null,[{key:"credential",value:function(e,t){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(wa);Ea.GOOGLE_SIGN_IN_METHOD="google.com",Ea.PROVIDER_ID="google.com";var Sa=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this,"github.com")}return m(n,null,[{key:"credential",value:function(e){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(wa);Sa.GITHUB_SIGN_IN_METHOD="github.com",Sa.PROVIDER_ID="github.com";var xa=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this,"twitter.com")}return m(n,null,[{key:"credential",value:function(e,t){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(wa);function Ca(e,t){return Ta.apply(this,arguments)}function Ta(){return Ta=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur(t,"POST","/v1/accounts:signUp",Pr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}xa.TWITTER_SIGN_IN_METHOD="twitter.com",xa.PROVIDER_ID="twitter.com";var Ia=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return m(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Je($e().mark((function t(n,r,i){var a,o,s,u,c=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,mi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Na(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Je($e().mark((function t(n,r,i){var a;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Na(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Na(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Ra=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o,s;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(w(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return m(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(St);function Aa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ra._fromErrorAndOperation(e,n,t,r);throw n}))}function Pa(e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=Je($e().mark((function e(t,n){var r,i,a=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ti,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ia._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Da(e,t){return La.apply(this,arguments)}function La(){return La=Je($e().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ti(t,Aa(i,a,n,t),r);case 6:return _r((o=e.sent).idToken,i,"internal-error"),_r(s=ei(o.idToken),i,"internal-error"),u=s.sub,_r(t.uid===u,i,"user-mismatch"),e.abrupt("return",Ia._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&vr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),La.apply(this,arguments)}function Ma(e,t){return Ua.apply(this,arguments)}function Ua(){return Ua=Je($e().mark((function e(t,n){var r,i,a,o,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Aa(t,i,n);case 4:return a=e.sent,e.next=7,Ia._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function Fa(e,t){return ja.apply(this,arguments)}function ja(){return ja=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(Vi(t),n));case 1:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Va(e){return za.apply(this,arguments)}function za(){return za=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Vi(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function Ba(e,t,n){return qa.apply(this,arguments)}function qa(){return qa=Je($e().mark((function e(t,n,r){var i,a,o,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vi(t),a=Gi(i,{returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ca),e.next=5,a.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&Va(t),e}));case 5:return o=e.sent,e.next=8,Ia._fromIdTokenResponse(i,"signIn",o);case 8:return s=e.sent,e.next=11,i._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Ha(e,t){return Or(e,"POST","/v2/accounts/mfaEnrollment:start",Pr(e,t))}function Wa(e,t){return Or(e,"POST","/v2/accounts/mfaEnrollment:start",Pr(e,t))}function Ka(e,t){return Or(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pr(e,t))}new WeakMap;var Ga="__sak",Qa=function(){function e(t,n){f(this,e),this.storageRetriever=t,this.type=n}return m(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ga,"1"),this.storage.removeItem(Ga),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ya=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=kt();return xi(e)||Ai(e)}()&&function(){try{return!(!window||window===window.top)}catch(fI){return!1}}(),e.fallbackToPolling=Oi(),e._shouldAllowMigration=!0,e}return m(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Pi()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Je($e().mark((function e(t,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(k(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je($e().mark((function e(t){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(k(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(k(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Qa);Ya.type="LOCAL";var $a=Ya,Xa=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return m(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Qa);Xa.type="SESSION";var Ja=Xa;function Za(e){return Promise.all(e.map(function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var eo=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return m(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,s,u,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Za(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function to(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}eo.receivers=[];var no=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return m(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Je($e().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=to("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ro(){return window}function io(e){ro().location.href=e}function ao(){return"undefined"!==typeof ro().WorkerGlobalScope&&"function"===typeof ro().importScripts}function oo(){return so.apply(this,arguments)}function so(){return(so=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function uo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var co="firebaseLocalStorageDb",lo=1,ho="firebaseLocalStorage",fo="fbase_key",po=function(){function e(t){f(this,e),this.request=t}return m(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function vo(e,t){return e.transaction([ho],t?"readwrite":"readonly").objectStore(ho)}function mo(){var e=indexedDB.deleteDatabase(co);return new po(e).toPromise()}function yo(){var e=indexedDB.open(co,lo);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ho,{keyPath:fo})}catch(fI){n(fI)}})),e.addEventListener("success",Je($e().mark((function n(){var r;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ho)){n.next=12;break}return r.close(),n.next=5,mo();case 5:return n.t0=t,n.next=8,yo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vo(t,!0).put((Ze(i={},fo,n),Ze(i,"value",r),i)),e.abrupt("return",new po(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function _o(e,t){return wo.apply(this,arguments)}function wo(){return wo=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t,!1).get(n),e.next=3,new po(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function bo(e,t){var n=vo(e,!0).delete(t);return new po(n).toPromise()}var Eo=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return m(e,[{key:"_openDb",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,yo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ao()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Je($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=eo._getInstance(ao()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Je($e().mark((function e(n,r){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Je($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new no(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&uo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,yo();case 5:return t=e.sent,e.next=8,go(t,Ga,"1");case 8:return e.next=10,bo(t,Ga);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je($e().mark((function e(t,n){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return go(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return _o(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return bo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=vo(e,!1).getAll();return new po(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:if(n=[],r=new Set,0!==t.length){i=x(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Eo.type="LOCAL";var So=Eo;function xo(e,t){return Or(e,"POST","/v2/accounts/mfaSignIn:start",Pr(e,t))}function Co(e,t){return Or(e,"POST","/v2/accounts/mfaSignIn:finalize",Pr(e,t))}qi("rcb"),new Tr(3e4,6e4);var To="recaptcha";function Io(e,t,n){return No.apply(this,arguments)}function No(){return No=Je($e().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,_r("string"===typeof a,t,"argument-error"),_r(r.type===To,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return _r("enroll"===s.type,t,"internal-error"),e.next=13,Ha(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return _r("signin"===s.type,t,"internal-error"),_r(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,xo(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ha(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),No.apply(this,arguments)}var Ro=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=Vi(t)}return m(e,[{key:"verifyPhoneNumber",value:function(e,t){return Io(this.auth,e,Ht(t))}}],[{key:"credential",value:function(e,t){return ya._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ya._fromTokenResponse(n,r):null}}]),e}();function Ao(e,t){return t?gi(t):(_r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ro.PROVIDER_ID="phone",Ro.PHONE_SIGN_IN_METHOD="phone";var Po=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return m(n,[{key:"_getIdTokenResponse",value:function(e){return ua(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ua(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ua(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ji);function Oo(e){return Ma(e.auth,new Po(e),e.bypassAuthState)}function Do(e){var t=e.auth,n=e.user;return _r(n,t,"internal-error"),Da(n,new Po(e),e.bypassAuthState)}function Lo(e){return Mo.apply(this,arguments)}function Mo(){return Mo=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,_r(r=t.user,n,"internal-error"),e.abrupt("return",Pa(r,new Po(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}var Uo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return m(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Je($e().mark((function t(n,r){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Oo;case"linkViaPopup":case"linkViaRedirect":return Lo;case"reauthViaPopup":case"reauthViaRedirect":return Do;default:vr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Fo=new Tr(2e3,1e4);function jo(e,t,n){return Vo.apply(this,arguments)}function Vo(){return Vo=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vi(t),gr(t,n,_a),a=Ao(i,r),o=new zo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}var zo=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=w(s),s}return m(n,[{key:"executeNotNull",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return _r(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je($e().mark((function e(){var t,n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return br(1===this.filter.length,"Popup operations only handle one event"),t=to(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(mr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(mr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(mr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Fo.get())}()}}]),n}(Uo);zo.currentPopupAction=null;var Bo="pendingRedirect",qo=new Map,Ho=function(e){g(n,e);var t=b(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return m(n,[{key:"execute",value:function(){var e=Je($e().mark((function e(){var t,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=qo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Wo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,or(k(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:qo.set(this.auth._key(),t);case 21:return this.bypassAuthState||qo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Je($e().mark((function e(t){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",or(k(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",or(k(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Uo);function Wo(e,t){return Ko.apply(this,arguments)}function Ko(){return Ko=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yo(n),i=Qo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Go(e,t){qo.set(e._key(),t)}function Qo(e){return gi(e._redirectPersistence)}function Yo(e){return wi(Bo,e.config.apiKey,e.name)}function $o(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=Je($e().mark((function e(t,n){var r,i,a,o,s,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Vi(t),a=Ao(i,n),o=new Ho(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}var Jo=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return m(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return es(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!es(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zo(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Zo(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Zo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function es(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ts(e){return ns.apply(this,arguments)}function ns(){return ns=Je($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Or(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}var rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,is=/^https?/;function as(){return as=Je($e().mark((function e(t){var n,r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ts(t);case 4:n=e.sent,r=n.authorizedDomains,i=x(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!os(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:vr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),as.apply(this,arguments)}function os(e){var t=Er(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!is.test(r))return!1;if(rs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ss=new Tr(3e4,6e4);function us(){var e=ro().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var cs=null;function ls(e){return cs=cs||function(e){return new Promise((function(t,n){var r,i,a;function o(){us(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){us(),n(mr(e,"network-request-failed"))},timeout:ss.get()})}if(null===(i=null===(r=ro().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ro().gapi)||void 0===a?void 0:a.load)){var s=qi("iframefcb");return ro()[s]=function(){gapi.load?o():n(mr(e,"network-request-failed"))},Bi("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw cs=null,e}))}(e),cs}var hs=new Tr(5e3,15e3),fs="__/auth/iframe",ds="emulator/auth/iframe",ps={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ms(e){var t=e.config;_r(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ir(t,ds):"https://".concat(e.config.authDomain,"/").concat(fs),r={apiKey:t.apiKey,appName:e.name,v:jn},i=vs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Mt(r).slice(1))}function ys(e){return gs.apply(this,arguments)}function gs(){return gs=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(t);case 2:return n=e.sent,_r(r=ro().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ms(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ps,dontclear:!0},(function(e){return new Promise(function(){var n=Je($e().mark((function n(r,i){var a,o,s;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){ro().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=mr(t,"network-request-failed"),o=ro().setTimeout((function(){i(a)}),hs.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}var ks={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_s=500,ws=600,bs="_blank",Es="http://localhost",Ss=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return m(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(fI){}}}]),e}();function xs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_s,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ws,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},ks),{width:r.toString(),height:i.toString(),top:a,left:o}),l=kt().toLowerCase();n&&(s=Ci(l)?bs:n),Si(l)&&(t=t||Es,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ai(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Ss(null);var f=window.open(t||"",s,h);_r(f,e,"popup-blocked");try{f.focus()}catch(fI){}return new Ss(f)}var Cs="__/auth/handler",Ts="emulator/auth/handler",Is=encodeURIComponent("fac");function Ns(e,t,n,r,i,a){return Rs.apply(this,arguments)}function Rs(){return Rs=Je($e().mark((function e(t,n,r,i,a,o){var s,u,l,h,f,d,p,v,m,y,g,k,_;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_r(t.config.authDomain,t,"auth-domain-config-required"),_r(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:jn,eventId:a},n instanceof _a)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Pt(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,l=Object.entries(o||{});u<l.length;u++)h=c(l[u],2),f=h[0],d=h[1],s[f]=d;for(n instanceof wa&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,_=k?"#".concat(Is,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(As(t),"?").concat(Mt(v).slice(1)).concat(_));case 13:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function As(e){var t=e.config;return t.emulator?Ir(t,Ts):"https://".concat(t.authDomain,"/").concat(Cs)}var Ps="webStorageSupport",Os=function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ja,this._completeRedirectFn=$o,this._overrideRedirectResult=Go}return m(e,[{key:"_openPopup",value:function(){var e=Je($e().mark((function e(t,n,r,i){var a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return br(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Ns(t,n,r,Er(),i);case 3:return o=e.sent,e.abrupt("return",xs(t,o,to()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Je($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Ns(t,n,r,Er(),i);case 4:return io(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(br(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ys(t);case 2:return n=e.sent,r=new Jo(t),n.register("authEvent",(function(e){return _r(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ps,{type:Ps},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ps];void 0!==i&&t(!!i),vr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return as.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Oi()||xi()||Ai()}}]),e}(),Ds=Os,Ls=function(){function e(t){f(this,e),this.factorId=t}return m(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return wr("unexpected MultiFactorSessionType")}}}]),e}(),Ms=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return m(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Or(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Or(e,"POST","/v2/accounts/mfaSignIn:finalize",Pr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ls);(function(){function e(){f(this,e)}return m(e,null,[{key:"assertion",value:function(e){return Ms._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Us=function(){function e(){f(this,e)}return m(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Fs._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Fs._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _r("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,Wa(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",js._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Us.FACTOR_ID="totp";var Fs=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return m(n,[{key:"_finalizeEnroll",value:function(){var e=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _r("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Ka(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _r(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Co(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Ls),js=function(){function e(t,n,r,i,a,o,s){f(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return m(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Vs(e)||Vs(t))&&(r=!0),r&&(Vs(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Vs(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Vs(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var zs="@firebase/auth",Bs="1.5.1",qs=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return m(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){_r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Hs,Ws=mt("authIdTokenMaxAge")||300,Ks=null,Gs=function(e){return function(){var t=Je($e().mark((function t(n){var r,i,a;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Ws)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,Ks!==a){t.next=12;break}return t.abrupt("return");case 12:return Ks=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};Hs="Browser",Dn(new Wt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;_r(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:Hs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Di(Hs)},l=new ji(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Dn(new Wt("auth-internal",(function(e){return function(e){return new qs(e)}(Vi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(zs,Bs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Hs)),Bn(zs,Bs,"esm2017");var Qs="@firebase/database",Ys="1.0.2",$s="";function Xs(e){$s=e}var Js=function(){function e(t){f(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),It(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Tt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Zs=function(){function e(){f(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Rt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),eu=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Js(t)}}catch(fI){}return new Zs},tu=eu("localStorage"),nu=eu("sessionStorage"),ru=new nn("@firebase/database"),iu=function(){var e=1;return function(){return e++}}(),au=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,tt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new jt;n.update(t);var r=n.digest();return it.encodeByteArray(r)},ou=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?It(r):r,t+=" "}return t},su=null,uu=!0,cu=function(e,t){tt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ru.logLevel=Yt.VERBOSE,su=ru.log.bind(ru),t&&nu.set("logging_enabled",!0)):"function"===typeof e?su=e:(su=null,nu.remove("logging_enabled"))},lu=function(){if(!0===uu&&(uu=!1,null===su&&!0===nu.get("logging_enabled")&&cu(!0)),su){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ou.apply(null,t);su(r)}},hu=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];lu.apply(void 0,[e].concat(n))}},fu=function(){var e="FIREBASE INTERNAL ERROR: "+ou.apply(void 0,arguments);ru.error(e)},du=function(){var e="FIREBASE FATAL ERROR: ".concat(ou.apply(void 0,arguments));throw ru.error(e),new Error(e)},pu=function(){var e="FIREBASE WARNING: "+ou.apply(void 0,arguments);ru.warn(e)},vu=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},mu="[MIN_NAME]",yu="[MAX_NAME]",gu=function(e,t){if(e===t)return 0;if(e===mu||t===yu)return-1;if(t===mu||e===yu)return 1;var n=Cu(e),r=Cu(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ku=function(e,t){return e===t?0:e<t?-1:1},_u=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+It(t))},wu=function e(t){if("object"!==typeof t||null===t)return It(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=It(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},bu=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Eu(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Su=function(e){tt(!vu(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var xu=new RegExp("^-?(0*)\\d{1,10}$"),Cu=function(e){if(xu.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Tu=function(e){try{e()}catch(fI){setTimeout((function(){var t=fI.stack||"";throw pu("Exception was thrown by user callback.",t),fI}),Math.floor(0))}},Iu=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nu=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Ru=function(){function e(t,n){var r=this;f(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){pu('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Au=function(){function e(t,n,r){var i=this;f(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(lu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pu(e)}}]),e}(),Pu=function(){function e(t){f(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Pu.OWNER="owner";var Ou="5",Du=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Lu="ac",Mu="websocket",Uu="long_polling",Fu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];f(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tu.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tu.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ju(e,t,n){var r;if(tt("string"===typeof t,"typeof type must == string"),tt("object"===typeof n,"typeof params must == object"),t===Mu)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Uu)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Eu(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Vu=function(){function e(){f(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Rt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ct(this.counters_)}}]),e}(),zu={},Bu={};function qu(e){var t=e.toString();return zu[t]||(zu[t]=new Vu),zu[t]}var Hu=function(){function e(t){f(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Tu((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Wu="start",Ku=function(){function e(t,n,r,i,a,o,s){var u=this;f(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hu(t),this.stats_=qu(n),this.urlFn=function(e){return u.appCheckToken&&(e[Lu]=u.appCheckToken),ju(n,Uu,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Hu(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(bt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Gu((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Wu)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Wu]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Ou,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Lu]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Du.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=It(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=ot(t),r=bu(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!bt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=It(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!bt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Gu=function(){function e(t,n,r,i){if(f(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,bt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=iu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(fI){lu("frame writing exception"),fI.stack&&lu(fI.stack),lu(fI)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;bt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){lu("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(fI){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||lu("No IE domain setting required")}catch(fI){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Qu=null;"undefined"!==typeof MozWebSocket?Qu=MozWebSocket:"undefined"!==typeof WebSocket&&(Qu=WebSocket);var Yu=function(){function e(t,n,r,i,a,o,s){f(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hu(this.connId),this.stats_=qu(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tu.set("previous_websocket_failure",!0);try{var r;if(bt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Ou,"/").concat($s,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/fire-chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"9d95187d657b5c056be45553cbece5ce"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Qu(this.connURL,[],r)}catch(fI){this.log_("Error instantiating WebSocket.");var s=fI.message||fI.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){tu.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Tt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(tt(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=It(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=bu(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(fI){this.log_("Exception thrown from WebSocket.send():",fI.message||fI.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Ou,!bt()&&"undefined"!==typeof location&&location.hostname&&Du.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Lu]=r),i&&(a.p=i),ju(e,Mu,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Qu&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return tu.isInMemoryStorage||!0===tu.get("previous_websocket_failure")}}]),e}();Yu.responsesRequiredToBeHealthy=2,Yu.healthyTimeout=3e4;var $u=function(){function e(t){f(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=Yu&&Yu.isAvailable(),r=n&&!Yu.previouslyFailed();if(t.webSocketOnly&&(n||pu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Yu];else{var i,a=this.transports_=[],o=x(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Ku,Yu]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();$u.globalTransportInitialized_=!1;var Xu=function(){function e(t,n,r,i,a,o,s,u,c,l){f(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hu("c:"+this.id+":"),this.transportManager_=new $u(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Nu((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=_u("t",e),n=_u("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=_u("t",e),n=_u("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=_u("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?fu("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fu("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ou!==n&&pu("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Nu((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nu((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Ju=function(){function e(){f(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Zu=function(){function e(t){f(this,e),this.allowedEvents_=t,this.listeners_={},tt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){tt(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),ec=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||_t()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return tt("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Zu),tc=32,nc=768,rc=function(){function e(t,n){if(f(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function ic(){return new rc("")}function ac(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function oc(e){return e.pieces_.length-e.pieceNum_}function sc(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new rc(e.pieces_,t)}function uc(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function lc(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new rc(t,0)}function hc(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof rc)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new rc(n,0)}function fc(e){return e.pieceNum_>=e.pieces_.length}function dc(e,t){var n=ac(e),r=ac(t);if(null===n)return t;if(n===r)return dc(sc(e),sc(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function pc(e,t){if(oc(e)!==oc(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function vc(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(oc(e)>oc(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var mc=m((function e(t,n){f(this,e),this.errorPrefix_=n,this.parts_=cc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=qt(this.parts_[r]);yc(this)}));function yc(e){if(e.byteLength_>nc)throw new Error(e.errorPrefix_+"has a key path longer than "+nc+" bytes ("+e.byteLength_+").");if(e.parts_.length>tc)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tc+") or object contains a cycle "+gc(e))}function gc(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var kc=function(e){g(n,e);var t=b(n);function n(){var e,r,i;return f(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return tt("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Zu),_c=1e3,wc=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,s,u,c){var l;if(f(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=hu("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=_c,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!bt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return kc.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&ec.getInstance().on("online",l.onOnline_,w(l)),l}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(It(i)),tt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new yt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),tt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),tt(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Nt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Nt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),tt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+It(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):fu("Unrecognized action received from server: "+It(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;tt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_c),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Je($e().mark((function e(){var t,r,i,a,o,s,u,l,h,f,d,p,v,m,y=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,i())},h=function(e){tt(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=c(d,2),v=p[0],m=p[1],s?lu("getToken() completed but was canceled"):(lu("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,u=new Xu(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){pu(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&pu(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){lu("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){lu("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Pt(this.interruptReasons_)&&(this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return wu(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new rc(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){lu("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){lu("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=x(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=x(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";bt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+$s.replace(/\./g,"-")]=1,_t()?e["framework.cordova"]=1:wt()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=ec.getInstance().currentlyOnline();return Pt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Rt(e,"w")){var n=At(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();pu("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Ju);wc.nextPersistentConnectionId_=0,wc.nextConnectionId_=0;var bc,Ec=function(){function e(t,n){f(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Sc=function(){function e(){f(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Ec(mu,e),r=new Ec(mu,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Ec.MIN}}]),e}(),xc=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return gu(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw nt("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Ec.MIN}},{key:"maxPost",value:function(){return new Ec(yu,bc)}},{key:"makePost",value:function(e,t){return tt("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ec(e,bc)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return bc},set:function(e){bc=e}}]),n}(Sc),Cc=new xc,Tc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;f(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Ic=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Ac.EMPTY_NODE,this.right=null!=a?a:Ac.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Ac.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ac.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Ic.RED=!0,Ic.BLACK=!1;var Nc,Rc=function(){function e(){f(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ic(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Ac=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;f(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ic.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ic.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Tc(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Tc(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Tc(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Tc(this.root_,null,this.comparator_,!0,e)}}]),e}();function Pc(e,t){return gu(e.name,t.name)}function Oc(e,t){return gu(e,t)}Ac.EMPTY_NODE=new Rc;var Dc,Lc,Mc,Uc=function(e){return"number"===typeof e?"number:"+Su(e):"string:"+e},Fc=function(e){if(e.isLeafNode()){var t=e.val();tt("string"===typeof t||"number"===typeof t||"object"===typeof t&&Rt(t,".sv"),"Priority must be a string or number.")}else tt(e===Nc||e.isEmpty(),"priority of unexpected type.");tt(e===Nc||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},jc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;f(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,tt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fc(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return fc(t)?this:".priority"===ac(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ac(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(tt(".priority"!==r||1===oc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(sc(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Uc(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Su(this.value_):this.value_,this.lazyHash_=au(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(tt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return tt(i>=0,"Unknown leaf type: "+n),tt(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Dc},set:function(e){Dc=e}}]),e}();jc.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Vc,zc,Bc=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?gu(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Ec.MIN}},{key:"maxPost",value:function(){return new Ec(yu,new jc("[PRIORITY-POST]",Mc))}},{key:"makePost",value:function(e,t){var n=Lc(e);return new Ec(t,new jc("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Sc),qc=new Bc,Hc=Math.log(2),Wc=function(){function e(t){f(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Hc,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Kc=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Ic(o,a.node,Ic.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new Ic(o,a.node,Ic.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new Ic(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Ic.BLACK):(s(h,Ic.BLACK),s(h,Ic.RED))}return a}(new Wc(e.length));return new Ac(r||t,a)},Gc={},Qc=function(){function e(t,n){f(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=At(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ac?t:null}},{key:"hasIndex",value:function(e){return Rt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){tt(t!==Cc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Ec.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Kc(i,t.getCompare()):Gc;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ot(this.indexes_,(function(e,i){var a=At(r.indexSet_,i);if(tt(a,"Missing index implementation for "+i),e===Gc){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Ec.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Kc(o,a.getCompare())}return Gc}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Ec(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ot(this.indexes_,(function(e){if(e===Gc)return e;var r=n.get(t.name);return r?e.remove(new Ec(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return tt(Gc&&qc,"ChildrenNode.ts has not been loaded"),Vc=Vc||new e({".priority":Gc},{".priority":qc})}}]),e}(),Yc=function(){function e(t,n,r){f(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Fc(this.priorityNode_),this.children_.isEmpty()&&tt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||zc}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?zc:t}},{key:"getChild",value:function(e){var t=ac(e);return null===t?this:this.getImmediateChild(t).getChild(sc(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(tt(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Ec(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?zc:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ac(e);if(null===n)return t;tt(".priority"!==ac(e)||1===oc(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(sc(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(qc,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Uc(this.getPriority().val())+":"),this.forEachChild(qc,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":au(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ec(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Ec(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Ec(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Ec.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Ec.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$c?-1:0}},{key:"withIndex",value:function(t){if(t===Cc||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Cc||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(qc),r=t.getIterator(qc),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Cc?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return zc||(zc=new e(new Ac(Oc),null,Qc.Default))}}]),e}();Yc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var $c=new(function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this,new Ac(Oc),Yc.EMPTY_NODE,Qc.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Yc.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Yc));Object.defineProperties(Ec,{MIN:{value:new Ec(mu,Yc.EMPTY_NODE)},MAX:{value:new Ec(yu,$c)}}),xc.__EMPTY_NODE=Yc.EMPTY_NODE,jc.__childrenNodeConstructor=Yc,Nc=$c,function(e){Mc=e}($c);var Xc=!0;function Jc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Yc.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),tt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new jc(e,Jc(t));if(e instanceof Array||!Xc){var n=Yc.EMPTY_NODE;return Eu(e,(function(t,r){if(Rt(e,t)&&"."!==t.substring(0,1)){var i=Jc(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Jc(t))}var r=[],i=!1;if(Eu(e,(function(e,t){if("."!==e.substring(0,1)){var n=Jc(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ec(e,n)))}})),0===r.length)return Yc.EMPTY_NODE;var a=Kc(r,Pc,(function(e){return e.name}),Oc);if(i){var o=Kc(r,qc.getCompare());return new Yc(a,Jc(t),new Qc({".priority":o},{".priority":qc}))}return new Yc(a,Jc(t),Qc.Default)}!function(e){Lc=e}(Jc);var Zc=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this)).indexPath_=e,tt(!fc(e)&&".priority"!==ac(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?gu(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Jc(e),r=Yc.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ec(t,r)}},{key:"maxPost",value:function(){var e=Yc.EMPTY_NODE.updateChild(this.indexPath_,$c);return new Ec(yu,e)}},{key:"toString",value:function(){return cc(this.indexPath_,0).join("/")}}]),n}(Sc),el=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?gu(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Ec.MIN}},{key:"maxPost",value:function(){return Ec.MAX}},{key:"makePost",value:function(e,t){var n=Jc(e);return new Ec(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Sc),tl=new el;function nl(e){return{type:"value",snapshotNode:e}}function rl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function il(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function al(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var ol=function(){function e(){f(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qc}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return tt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return tt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mu}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return tt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return tt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yu}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return tt(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===qc}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function sl(e){var t,n={};if(e.isDefault())return n;if(e.index_===qc?t="$priority":e.index_===tl?t="$value":e.index_===Cc?t="$key":(tt(e.index_ instanceof Zc,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=It(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=It(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+It(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=It(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+It(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function ul(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==qc&&(t.i=e.index_.toString()),t}var cl=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=hu("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=sl(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),At(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=sl(e._queryParams),r=e._path.toString(),i=new yt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Mt(n);t.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Tt(l.responseText)}catch(fI){pu("Failed to parse JSON response for "+u+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&pu("Got unsuccessful REST response for "+u+" Status: "+l.status),r(l.status);r=null}},l.open("GET",u,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(tt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Ju),ll=function(){function e(){f(this,e),this.rootNode_=Yc.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function hl(){return{value:null,children:new Map}}function fl(e,t,n){if(fc(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ac(t);e.children.has(r)||e.children.set(r,hl()),fl(e.children.get(r),t=sc(t),n)}}function dl(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){dl(r,new rc(t.toString()+"/"+e),n)}))}var pl,vl=function(){function e(t){f(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Eu(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),ml=function(){function e(t,n){f(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new vl(t);var r=1e4+2e4*Math.random();Nu(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Eu(t,(function(t,i){i>0&&Rt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Nu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function yl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pl||(pl={}));var gl,kl=function(){function e(t,n,r){f(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=pl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(fc(this.path)){if(null!=this.affectedTree.value)return tt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new rc(t));return new e(ic(),n,this.revert)}return tt(ac(this.path)===t,"operationForChild called for unrelated child."),new e(sc(this.path),this.affectedTree,this.revert)}}]),e}(),_l=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.snap=r,this.type=pl.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return fc(this.path)?new e(this.source,ic(),this.snap.getImmediateChild(t)):new e(this.source,sc(this.path),this.snap)}}]),e}(),wl=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.children=r,this.type=pl.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(fc(this.path)){var n=this.children.subtree(new rc(t));return n.isEmpty()?null:n.value?new _l(this.source,ic(),n.value):new e(this.source,ic(),n)}return tt(ac(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,sc(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),bl=function(){function e(t,n,r){f(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(fc(e))return this.isFullyInitialized()&&!this.filtered_;var t=ac(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function El(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw nt("Should only compare child_ events.");var r=new Ec(t.childName,t.snapshotNode),i=new Ec(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Sl(e,t){return{eventCache:e,serverCache:t}}function xl(e,t,n,r){return Sl(new bl(t,n,r),e.serverCache)}function Cl(e,t,n,r){return Sl(e.eventCache,new bl(t,n,r))}function Tl(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Il(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Nl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(gl||(gl=new Ac(ku)),gl);f(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:ic(),value:this.value};if(fc(e))return null;var n=ac(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(sc(e),t);return null!=i?{path:hc(new rc(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(fc(t))return this;var n=ac(t),r=this.children.get(n);return null!==r?r.subtree(sc(t)):new e(null)}},{key:"set",value:function(t,n){if(fc(t))return new e(n,this.children);var r=ac(t),i=(this.children.get(r)||new e(null)).set(sc(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(fc(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ac(t),r=this.children.get(n);if(r){var i,a=r.remove(sc(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(fc(e))return this.value;var t=ac(e),n=this.children.get(t);return n?n.get(sc(e)):null}},{key:"setTree",value:function(t,n){if(fc(t))return n;var r,i=ac(t),a=(this.children.get(i)||new e(null)).setTree(sc(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(ic(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(hc(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,ic(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(fc(e))return null;var i=ac(e),a=this.children.get(i);return a?a.findOnPath_(sc(e),hc(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,ic(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(fc(t))return this;this.value&&r(n,this.value);var i=ac(t),a=this.children.get(i);return a?a.foreachOnPath_(sc(t),hc(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(ic(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(hc(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Eu(t,(function(e,t){n=n.set(new rc(e),t)})),n}}]),e}(),Rl=function(){function e(t){f(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new Nl(null))}}]),e}();function Al(e,t,n){if(fc(t))return new Rl(new Nl(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=dc(i,t);return a=a.updateChild(o,n),new Rl(e.writeTree_.set(i,a))}var s=new Nl(n),u=e.writeTree_.setTree(t,s);return new Rl(u)}function Pl(e,t,n){var r=e;return Eu(n,(function(e,n){r=Al(r,hc(t,e),n)})),r}function Ol(e,t){if(fc(t))return Rl.empty();var n=e.writeTree_.setTree(t,new Nl(null));return new Rl(n)}function Dl(e,t){return null!=Ll(e,t)}function Ll(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(dc(n.path,t)):null}function Ml(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(qc,(function(e,n){t.push(new Ec(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ec(e,n.value))})),t}function Ul(e,t){if(fc(t))return e;var n=Ll(e,t);return new Rl(null!=n?new Nl(n):e.writeTree_.subtree(t))}function Fl(e){return e.writeTree_.isEmpty()}function jl(e,t){return Vl(ic(),e.writeTree_,t)}function Vl(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(tt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Vl(hc(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(hc(e,".priority"),r)),n}function zl(e,t){return eh(t,e)}function Bl(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));tt(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&ql(s,r.path)?i=!1:vc(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Wl(e.allWrites,Hl,ic()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Ol(e.visibleWrites,r.path):Eu(r.children,(function(t){e.visibleWrites=Ol(e.visibleWrites,hc(r.path,t))}));return!0}return!1}function ql(e,t){if(e.snap)return vc(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&vc(hc(e.path,n),t))return!0;return!1}function Hl(e){return e.visible}function Wl(e,t,n){for(var r=Rl.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)vc(n,o)?r=Al(r,s=dc(n,o),a.snap):vc(o,n)&&(s=dc(o,n),r=Al(r,ic(),a.snap.getChild(s)));else{if(!a.children)throw nt("WriteRecord should have .snap or .children");if(vc(n,o))r=Pl(r,s=dc(n,o),a.children);else if(vc(o,n))if(fc(s=dc(o,n)))r=Pl(r,ic(),a.children);else{var u=At(a.children,ac(s));if(u){var c=u.getChild(sc(s));r=Al(r,ic(),c)}}}}}return r}function Kl(e,t,n,r,i){if(r||i){var a=Ul(e.visibleWrites,t);if(!i&&Fl(a))return n;if(i||null!=n||Dl(a,ic())){return jl(Wl(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(vc(e.path,t)||vc(t,e.path))}),t),n||Yc.EMPTY_NODE)}return null}var o=Ll(e.visibleWrites,t);if(null!=o)return o;var s=Ul(e.visibleWrites,t);return Fl(s)?n:null!=n||Dl(s,ic())?jl(s,n||Yc.EMPTY_NODE):null}function Gl(e,t,n,r){return Kl(e.writeTree,e.treePath,t,n,r)}function Ql(e,t){return function(e,t,n){var r=Yc.EMPTY_NODE,i=Ll(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(qc,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Ul(e.visibleWrites,t);return n.forEachChild(qc,(function(e,t){var n=jl(Ul(a,new rc(e)),t);r=r.updateImmediateChild(e,n)})),Ml(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Ml(Ul(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Yl(e,t,n,r){return function(e,t,n,r,i){tt(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=hc(t,n);if(Dl(e.visibleWrites,a))return null;var o=Ul(e.visibleWrites,a);return Fl(o)?i.getChild(n):jl(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function $l(e,t){return function(e,t){return Ll(e.visibleWrites,t)}(e.writeTree,hc(e.treePath,t))}function Xl(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=Ul(e.visibleWrites,t),c=Ll(u,ic());if(null!=c)s=c;else{if(null==n)return[];s=jl(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Jl(e,t,n){return function(e,t,n,r){var i=hc(t,n),a=Ll(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?jl(Ul(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Zl(e,t){return eh(hc(e.treePath,t),e.writeTree)}function eh(e,t){return{treePath:e,writeTree:t}}var th=function(){function e(){f(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;tt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),tt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,al(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,il(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,rl(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw nt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,al(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),nh=new(function(){function e(){f(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),rh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new bl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jl(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Il(this.viewCache_),i=Xl(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function ih(e,t,n,r,i){var a,o,s=new th;if(n.type===pl.OVERWRITE){var u=n;u.source.fromUser?a=sh(e,t,u.path,u.snap,r,i,s):(tt(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!fc(u.path),a=oh(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===pl.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=hc(n,r);uh(t,ac(c))&&(s=sh(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=hc(n,r);uh(t,ac(c))||(s=sh(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(tt(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=lh(e,t,c.path,c.children,r,i,o,s))}else if(n.type===pl.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=$l(r,n))return t;var s,u=new rh(r,t,i),c=t.eventCache.getNode();if(fc(n)||".priority"===ac(n)){var l;if(t.serverCache.isFullyInitialized())l=Gl(r,Il(t));else{var h=t.serverCache.getNode();tt(h instanceof Yc,"serverChildren would be complete if leaf node"),l=Ql(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=ac(n),d=Jl(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,sc(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Yc.EMPTY_NODE,sc(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Gl(r,Il(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=$l(r,ic()),xl(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=$l(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(fc(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return oh(e,t,n,u.getNode().getChild(n),i,a,s,o);if(fc(n)){var c=new Nl(null);return u.getNode().forEachChild(Cc,(function(e,t){c=c.set(new rc(e),t)})),lh(e,t,n,c,i,a,s,o)}return t}var l=new Nl(null);return r.foreach((function(e,t){var r=hc(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),lh(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==pl.LISTEN_COMPLETE)throw nt("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Cl(t,a.getNode(),a.isFullyInitialized()||fc(n),a.isFiltered());return ah(e,o,n,r,nh,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Tl(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(nl(Tl(t)))}}(t,a,h),{viewCache:a,changes:h}}function ah(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=$l(r,n))return t;if(fc(n))if(tt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Il(t),l=Ql(r,c instanceof Yc?c:Yc.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Gl(r,Il(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=ac(n);if(".priority"===f){tt(1===oc(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Yl(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=sc(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=Yl(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=Jl(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return xl(t,o,u.isFullyInitialized()||fc(n),e.filter.filtersNodes())}function oh(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(fc(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ac(n);if(!c.isCompleteForPath(n)&&oc(n)>1)return t;var d=sc(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,nh,null)}var v=Cl(t,u,c.isFullyInitialized()||fc(n),l.filtersNodes());return ah(e,v,n,i,new rh(i,v,a),s)}function sh(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new rh(i,t,a);if(fc(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=xl(t,u,!0,e.filter.filtersNodes());else{var h=ac(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=xl(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=sc(n),p=c.getNode().getImmediateChild(h);if(fc(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===uc(d)&&v.getChild(lc(d)).isEmpty()?v:v.updateChild(d,r):Yc.EMPTY_NODE}if(p.equals(f))s=t;else s=xl(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function uh(e,t){return e.eventCache.isCompleteForChild(t)}function ch(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function lh(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=fc(n)?r:new Nl(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=ch(0,t.serverCache.getNode().getImmediateChild(n),r);c=oh(e,c,new rc(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=ch(0,t.serverCache.getNode().getImmediateChild(n),r);c=oh(e,c,new rc(n),h,i,a,o,s)}})),c}var hh;function fh(e,t){var n=Il(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!fc(t)&&!n.getImmediateChild(ac(t)).isEmpty())?n.getChild(t):null}function dh(e,t,n,r){t.type===pl.MERGE&&null!==t.source.queryId&&(tt(Il(e.viewCache_),"We should always have a full cache before handling merges"),tt(Tl(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=ih(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,tt(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),tt(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),tt(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,ph(e,s.changes,s.viewCache.eventCache.getNode(),null)}function ph(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),El(e,i,"child_removed",t,r,n),El(e,i,"child_added",t,r,n),El(e,i,"child_moved",a,r,n),El(e,i,"child_changed",t,r,n),El(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var vh;function mh(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return tt(null!=a,"SyncTree gave us an op for an invalid query."),dh(a,t,n,r)}var o,s=[],u=x(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(dh(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function yh(e,t){var n,r=null,i=x(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||fh(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var gh=m((function e(t){f(this,e),this.listenProvider_=t,this.syncPointTree_=new Nl(null),this.pendingWriteTree_={visibleWrites:Rl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function kh(e,t,n,r,i){return function(e,t,n,r,i){tt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Al(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Sh(e,new _l({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function _h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Bl(e.pendingWriteTree_,t)){var i=new Nl(null);return null!=r.snap?i=i.set(ic(),!0):Eu(r.children,(function(e){i=i.set(new rc(e),!0)})),Sh(e,new kl(r.path,i,n))}return[]}function wh(e,t,n){return Sh(e,new _l({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function bh(e,t,n,r){var i=Th(e,r);if(null!=i){var a=Ih(i),o=a.path,s=a.queryId,u=dc(o,t);return Nh(e,o,new _l(yl(s),u,n))}return[]}function Eh(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=yh(n,dc(e,t));if(r)return r}));return Kl(r,t,i,n,!0)}function Sh(e,t){return xh(t,e.syncPointTree_,null,zl(e.pendingWriteTree_,ic()))}function xh(e,t,n,r){if(fc(e.path))return Ch(e,t,n,r);var i=t.get(ic());null==n&&null!=i&&(n=yh(i,ic()));var a=[],o=ac(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Zl(r,o);a=a.concat(xh(s,u,c,l))}return i&&(a=a.concat(mh(i,e,r,n))),a}function Ch(e,t,n,r){var i=t.get(ic());null==n&&null!=i&&(n=yh(i,ic()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Zl(r,t),u=e.operationForChild(t);u&&(a=a.concat(Ch(u,i,o,s)))})),i&&(a=a.concat(mh(i,e,r,n))),a}function Th(e,t){return e.tagToQueryMap.get(t)}function Ih(e){var t=e.indexOf("$");return tt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new rc(e.substr(0,t))}}function Nh(e,t,n){var r=e.syncPointTree_.get(t);return tt(r,"Missing sync point for query tag that we're tracking"),mh(r,n,zl(e.pendingWriteTree_,t),null)}var Rh=function(){function e(t){f(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Ah=function(){function e(t,n){f(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=hc(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Eh(this.syncTree_,this.path_)}}]),e}(),Ph=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Oh=function(e,t,n){return e&&"object"===typeof e?(tt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Dh(e[".sv"],t,n):"object"===typeof e[".sv"]?Lh(e[".sv"],t):void tt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Dh=function(e,t,n){if("timestamp"===e)return n.timestamp;tt(!1,"Unexpected server value: "+e)},Lh=function(e,t,n){e.hasOwnProperty("increment")||tt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&tt(!1,"Unexpected increment value: "+r);var i=t.node();if(tt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Mh=function(e,t,n,r){return Fh(t,new Ah(n,e),r)},Uh=function(e,t,n){return Fh(e,new Rh(t),n)};function Fh(e,t,n){var r,i=e.getPriority().val(),a=Oh(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Oh(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new jc(s,Jc(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new jc(a))),u.forEachChild(qc,(function(e,i){var a=Fh(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var jh=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};f(this,e),this.name=t,this.parent=n,this.node=r}));function Vh(e,t){for(var n=t instanceof rc?t:new rc(t),r=e,i=ac(n);null!==i;){var a=At(r.node.children,i)||{children:{},childCount:0};r=new jh(i,r,a),i=ac(n=sc(n))}return r}function zh(e){return e.node.value}function Bh(e,t){e.node.value=t,Gh(e)}function qh(e){return e.node.childCount>0}function Hh(e,t){Eu(e.node.children,(function(n,r){t(new jh(n,e,r))}))}function Wh(e,t,n,r){n&&!r&&t(e),Hh(e,(function(e){Wh(e,t,!0,r)})),n&&r&&t(e)}function Kh(e){return new rc(null===e.parent?e.name:Kh(e.parent)+"/"+e.name)}function Gh(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===zh(e)&&!qh(e)}(n),i=Rt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Gh(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Gh(e))}(e.parent,e.name,e)}var Qh=/[\[\].#$\/\u0000-\u001F\u007F]/,Yh=/[\[\].#$\u0000-\u001F\u007F]/,$h=10485760,Xh=function(e){return"string"===typeof e&&0!==e.length&&!Qh.test(e)},Jh=function(e){return"string"===typeof e&&0!==e.length&&!Yh.test(e)},Zh=function e(t,n,r){var i=r instanceof rc?new mc(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+gc(i));if("function"===typeof n)throw new Error(t+"contains a function "+gc(i)+" with contents = "+n.toString());if(vu(n))throw new Error(t+"contains "+n.toString()+" "+gc(i));if("string"===typeof n&&n.length>$h/3&&qt(n)>$h)throw new Error(t+"contains a string greater than "+$h+" utf8 bytes "+gc(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Eu(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Xh(n)))throw new Error(t+" contains an invalid key ("+n+") "+gc(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=qt(t),yc(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=qt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+gc(i)+" in addition to actual children.")}},ef=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Xh(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Jh(e)}(n))throw new Error(Bt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},tf=m((function e(){f(this,e),this.eventLists_=[],this.recursionDepth_=0}));function nf(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||pc(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function rf(e,t,n){nf(e,n),af(e,(function(e){return vc(e,t)||vc(t,e)}))}function af(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(of(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function of(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();su&&lu("event: "+n.toString()),Tu(r)}}}var sf="repo_interrupt",uf=25,cf=function(){function e(t,n,r,i){f(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hl(),this.transactionQueueTree_=new jh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function lf(e,t,n){if(e.stats_=qu(e.repoInfo_),e.forceRestClient_||Iu())e.server_=new cl(e.repoInfo_,(function(t,n,r,i){df(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return pf(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{It(n)}catch(fI){throw new Error("Invalid authOverride provided: "+fI)}}e.persistentConnection_=new wc(e.repoInfo_,t,(function(t,n,r,i){df(e,t,n,r,i)}),(function(t){pf(e,t)}),(function(t){!function(e,t){Eu(t,(function(t,n){vf(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Bu[n]||(Bu[n]=t()),Bu[n]}(e.repoInfo_,(function(){return new ml(e.stats_,e.server_)})),e.infoData_=new ll,e.infoSyncTree_=new gh({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=wh(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),vf(e,"connected",!1),e.serverSyncTree_=new gh({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);rf(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function hf(e){var t=e.infoData_.getNode(new rc(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ff(e){return Ph({timestamp:hf(e)})}function df(e,t,n,r,i){e.dataUpdateCount++;var a=new rc(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Ot(n,(function(e){return Jc(e)}));o=function(e,t,n,r){var i=Th(e,r);if(i){var a=Ih(i),o=a.path,s=a.queryId,u=dc(o,t),c=Nl.fromObject(n);return Nh(e,o,new wl(yl(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Jc(n);o=bh(e.serverSyncTree_,a,u,i)}else if(r){var c=Ot(n,(function(e){return Jc(e)}));o=function(e,t,n){var r=Nl.fromObject(n);return Sh(e,new wl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Jc(n);o=wh(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=wf(e,a)),rf(e.eventQueue_,h,o)}function pf(e,t){vf(e,"connected",t),!1===t&&function(e){gf(e,"onDisconnectEvents");var t=ff(e),n=hl();dl(e.onDisconnect_,ic(),(function(r,i){var a=Mh(r,i,e.serverSyncTree_,t);fl(n,r,a)}));var r=[];dl(n,ic(),(function(t,n){r=r.concat(wh(e.serverSyncTree_,t,n));var i=Cf(e,t);wf(e,i)})),e.onDisconnect_=hl(),rf(e.eventQueue_,ic(),r)}(e)}function vf(e,t,n){var r=new rc("/.info/"+t),i=Jc(n);e.infoData_.updateSnapshot(r,i);var a=wh(e.infoSyncTree_,r,i);rf(e.eventQueue_,r,a)}function mf(e){return e.nextWriteId_++}function yf(e){e.persistentConnection_&&e.persistentConnection_.interrupt(sf)}function gf(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];lu.apply(void 0,[t].concat(r))}function kf(e,t,n){return Eh(e.serverSyncTree_,t,n)||Yc.EMPTY_NODE}function _f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||xf(e,t),zh(t)){var n=Ef(e,t);tt(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=kf(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];tt(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=dc(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){gf(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(_h(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);xf(e,Vh(e.transactionQueueTree_,t)),_f(e,e.transactionQueueTree_),rf(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Tu(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{pu("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}wf(e,t)}}),o)}(e,Kh(t),n)}else qh(t)&&Hh(t,(function(t){_f(e,t)}))}function wf(e,t){var n=bf(e,t),r=Kh(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=dc(n,c.path),h=!1;if(tt(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(_h(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=uf)h=!0,s="maxretry",i=i.concat(_h(e.serverSyncTree_,c.currentWriteId,!0));else{var f=kf(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Zh("transaction failed: Data returned ",d,c.path);var p=Jc(d);"object"===typeof d&&null!=d&&Rt(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,m=ff(e),y=Uh(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=mf(e),o.splice(o.indexOf(v),1),i=(i=i.concat(kh(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(_h(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(_h(e.serverSyncTree_,c.currentWriteId,!0))}rf(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);xf(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Tu(r[c]);_f(e,e.transactionQueueTree_)}(e,Ef(e,n),r),r}function bf(e,t){var n,r=e.transactionQueueTree_;for(n=ac(t);null!==n&&void 0===zh(r);)r=Vh(r,n),n=ac(t=sc(t));return r}function Ef(e,t){var n=[];return Sf(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Sf(e,t,n){var r=zh(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Hh(t,(function(t){Sf(e,t,n)}))}function xf(e,t){var n=zh(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Bh(t,n.length>0?n:void 0)}Hh(t,(function(t){xf(e,t)}))}function Cf(e,t){var n=Kh(bf(e,t)),r=Vh(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Tf(e,t)})),Tf(e,r),Wh(r,(function(t){Tf(e,t)})),n}function Tf(e,t){var n=zh(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(tt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(tt(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(_h(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Bh(t,void 0):n.length=a+1,rf(e.eventQueue_,Kh(t),i);for(var s=0;s<r.length;s++)Tu(r[s])}}var If=function(e,t){var n=Nf(e),r=n.namespace;"firebase.com"===n.domain&&du(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||du("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Fu(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new rc(n.pathString)}},Nf=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(fI){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=x(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):pu("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Rf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Af=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){f(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return fc(this._path)?null:uc(this._path)}},{key:"ref",get:function(){return new Pf(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=ul(this._queryParams),t=wu(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return ul(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ht(t))instanceof e))return!1;var n=this._repo===t._repo,r=pc(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var Pf=function(e){g(n,e);var t=b(n);function n(e,r){return f(this,n),t.call(this,e,r,new ol,!1)}return m(n,[{key:"parent",get:function(){var e=lc(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Af);!function(e){tt(!hh,"__referenceConstructor has already been defined"),hh=e}(Pf),function(e){tt(!vh,"__referenceConstructor has already been defined"),vh=e}(Pf);var Of="FIREBASE_DATABASE_EMULATOR_HOST",Df={},Lf=!1;function Mf(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||du("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lu("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=If(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/fire-chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"9d95187d657b5c056be45553cbece5ce"}[Of]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=If(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Pu(Pu.OWNER):new Au(e.name,e.options,t);ef("Invalid Firebase Database URL",s),fc(s.path)||du("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Df[t.name];i||(i={},Df[t.name]=i);var a=i[e.toURLString()];a&&du("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new cf(e,Lf,n,r),i[e.toURLString()]=a,a}(u,e,l,new Ru(e.name,n));return new Uf(h,e)}var Uf=function(){function e(t,n){f(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(lf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Pf(this._repo,ic())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Df[t];n&&n[e.key]===e||du("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),yf(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&du("Cannot call "+e+" on a deleted database.")}}]),e}();function Ff(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Ht(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&du("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&du('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Pu(Pu.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:gt(r.mockUserToken,e.app.options.projectId);a=new Pu(o)}!function(e,t,n,r){e.repoInfo_=new Fu("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}wc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},wc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Xs(jn),Dn(new Wt("database",(function(e,t){var n=t.instanceIdentifier;return Mf(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Bn(Qs,Ys,e),Bn(Qs,Ys,"esm2017")}();var jf,Vf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zf={},Bf=Bf||{},qf=Vf||self;function Hf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Wf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kf="closure_uid_"+(1e9*Math.random()>>>0),Gf=0;function Qf(e,t,n){return e.call.apply(e.bind,arguments)}function Yf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $f(e,t,n){return($f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qf:Yf).apply(null,arguments)}function Xf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Jf(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Zf(){this.s=this.s,this.o=this.o}Zf.prototype.s=!1,Zf.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Kf)&&e[Kf]||(e[Kf]=++Gf)}(this)},Zf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ed=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function td(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function nd(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Hf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function rd(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}rd.prototype.h=function(){this.defaultPrevented=!0};var id=function(){if(!qf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};qf.addEventListener("test",n,t),qf.removeEventListener("test",n,t)}catch(n){}return e}();function ad(e){return/^[\s\xa0]*$/.test(e)}function od(){var e=qf.navigator;return e&&(e=e.userAgent)?e:""}function sd(e){return-1!=od().indexOf(e)}function ud(e){return ud[" "](e),e}ud[" "]=function(){};var cd,ld,hd=sd("Opera"),fd=sd("Trident")||sd("MSIE"),dd=sd("Edge"),pd=dd||fd,vd=sd("Gecko")&&!(-1!=od().toLowerCase().indexOf("webkit")&&!sd("Edge"))&&!(sd("Trident")||sd("MSIE"))&&!sd("Edge"),md=-1!=od().toLowerCase().indexOf("webkit")&&!sd("Edge");function yd(){var e=qf.document;return e?e.documentMode:void 0}e:{var gd="",kd=function(){var e=od();return vd?/rv:([^\);]+)(\)|;)/.exec(e):dd?/Edge\/([\d\.]+)/.exec(e):fd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):md?/WebKit\/(\S+)/.exec(e):hd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(kd&&(gd=kd?kd[1]:""),fd){var _d=yd();if(null!=_d&&_d>parseFloat(gd)){cd=String(_d);break e}}cd=gd}if(qf.document&&fd){var wd=yd();ld=wd||(parseInt(cd,10)||void 0)}else ld=void 0;var bd=ld;function Ed(e,t){if(rd.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vd){e:{try{ud(t.nodeName);var i=!0;break e}catch(EI){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Sd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ed.$.h.call(this)}}Jf(Ed,rd);var Sd={2:"touch",3:"pen",4:"mouse"};Ed.prototype.h=function(){Ed.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var xd="closure_listenable_"+(1e6*Math.random()|0),Cd=0;function Td(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Cd,this.fa=this.ia=!1}function Id(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Nd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Rd(e){var t={};for(var n in e)t[n]=e[n];return t}var Ad="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ad.length;a++)n=Ad[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Od(e){this.src=e,this.g={},this.h=0}function Dd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ed(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Id(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ld(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Od.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ld(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Td(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Md="closure_lm_"+(1e6*Math.random()|0),Ud={};function Fd(e,t,n,r,i){if(r&&r.once)return Vd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Fd(e,t[a],n,r,i);return null}return n=Gd(n),e&&e[xd]?e.O(t,n,Wf(r)?!!r.capture:!!r,i):jd(e,t,n,!1,r,i)}function jd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Wf(i)?!!i.capture:!!i,s=Wd(e);if(s||(e[Md]=s=new Od(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Hd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)id||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(qd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Vd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Vd(e,t[a],n,r,i);return null}return n=Gd(n),e&&e[xd]?e.P(t,n,Wf(r)?!!r.capture:!!r,i):jd(e,t,n,!0,r,i)}function zd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)zd(e,t[a],n,r,i);else r=Wf(r)?!!r.capture:!!r,n=Gd(n),e&&e[xd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ld(a=e.g[t],n,r,i))&&(Id(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Wd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ld(t,n,r,i)),(n=-1<e?t[e]:null)&&Bd(n))}function Bd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[xd])Dd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Wd(t))?(Dd(n,e),0==n.h&&(n.src=null,t[Md]=null)):Id(e)}}}function qd(e){return e in Ud?Ud[e]:Ud[e]="on"+e}function Hd(e,t){if(e.fa)e=!0;else{t=new Ed(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Bd(e),e=n.call(r,t)}return e}function Wd(e){return(e=e[Md])instanceof Od?e:null}var Kd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gd(e){return"function"===typeof e?e:(e[Kd]||(e[Kd]=function(t){return e.handleEvent(t)}),e[Kd])}function Qd(){Zf.call(this),this.i=new Od(this),this.S=this,this.J=null}function Yd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new rd(t,e);else if(t instanceof rd)t.target=t.target||e;else{var i=t;Pd(t=new rd(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$d(o,r,!0,t)&&i}if(i=$d(o=t.g=e,r,!0,t)&&i,i=$d(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$d(o=t.g=n[a],r,!1,t)&&i}function $d(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Dd(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Jf(Qd,Zf),Qd.prototype[xd]=!0,Qd.prototype.removeEventListener=function(e,t,n,r){zd(this,e,t,n,r)},Qd.prototype.N=function(){if(Qd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Id(n[r]);delete t.g[e],t.h--}}this.J=null},Qd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Qd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Xd=qf.JSON.stringify,Jd=function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Zd(){var e=sp,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ep=function(){function e(){f(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=tp.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),tp=new Jd((function(){return new np}),(function(e){return e.reset()})),np=function(){function e(){f(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function rp(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ip(e){qf.setTimeout((function(){throw e}),0)}var ap,op=!1,sp=new ep,up=function(){var e=qf.Promise.resolve(void 0);ap=function(){e.then(cp)}},cp=function(){for(var e;e=Zd();){try{e.h.call(e.g)}catch(bI){ip(bI)}var t=tp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}op=!1};function lp(e,t){Qd.call(this),this.h=e||1,this.g=t||qf,this.j=$f(this.qb,this),this.l=Date.now()}function hp(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function fp(e,t,n){if("function"===typeof e)n&&(e=$f(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$f(e.handleEvent,e)}return 2147483647<Number(t)?-1:qf.setTimeout(e,t||0)}function dp(e){e.g=fp((function(){e.g=null,e.i&&(e.i=!1,dp(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Jf(lp,Qd),(jf=lp.prototype).ga=!1,jf.T=null,jf.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yd(this,"tick"),this.ga&&(hp(this),this.start()))}},jf.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jf.N=function(){lp.$.N.call(this),hp(this),delete this.g};var pp=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:dp(this)}},{key:"N",value:function(){or(k(n.prototype),"N",this).call(this),this.g&&(qf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Zf);function vp(e){Zf.call(this),this.h=e,this.g={}}Jf(vp,Zf);var mp=[];function yp(e,t,n,r){Array.isArray(n)||(n&&(mp[0]=n.toString()),n=mp);for(var i=0;i<n.length;i++){var a=Fd(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function gp(e){Nd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Bd(e)}),e),e.g={}}function kp(){this.g=!0}function _p(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Xd(n)}catch(pI){return t}}(e,n)+(r?" "+r:"")}))}vp.prototype.N=function(){vp.$.N.call(this),gp(this)},vp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kp.prototype.Ea=function(){this.g=!1},kp.prototype.info=function(){};var wp={},bp=null;function Ep(){return bp=bp||new Qd}function Sp(e){rd.call(this,wp.Ta,e)}function xp(e){var t=Ep();Yd(t,new Sp(t))}function Cp(e,t){rd.call(this,wp.STAT_EVENT,e),this.stat=t}function Tp(e){var t=Ep();Yd(t,new Cp(t,e))}function Ip(e,t){rd.call(this,wp.Ua,e),this.size=t}function Np(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qf.setTimeout((function(){e()}),t)}wp.Ta="serverreachability",Jf(Sp,rd),wp.STAT_EVENT="statevent",Jf(Cp,rd),wp.Ua="timingevent",Jf(Ip,rd);var Rp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ap={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Pp(){}function Op(e){return e.h||(e.h=e.i())}function Dp(){}Pp.prototype.h=null;var Lp,Mp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Up(){rd.call(this,"d")}function Fp(){rd.call(this,"c")}function jp(){}function Vp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new vp(this),this.P=Bp,e=pd?125:void 0,this.V=new lp(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zp}function zp(){this.i=null,this.g="",this.h=!1}Jf(Up,rd),Jf(Fp,rd),Jf(jp,Pp),jp.prototype.g=function(){return new XMLHttpRequest},jp.prototype.i=function(){return{}},Lp=new jp;var Bp=45e3,qp={},Hp={};function Wp(e,t,n){e.L=1,e.A=lv(av(t)),e.u=n,e.S=!0,Kp(e,null)}function Kp(e,t){e.G=Date.now(),$p(e),e.B=av(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ev(n.i,"t",r),e.o=0,n=e.l.J,e.h=new zp,e.g=Em(e.l,n?t:null,!e.u),0<e.O&&(e.M=new pp($f(e.Pa,e,e.g),e.O)),yp(e.U,e.g,"readystatechange",e.nb),t=e.I?Rd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),xp(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Gp(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Qp(e,t,n){for(var r,i=!0;!e.J&&e.o<n.length;){if((r=Yp(e,n))==Hp){4==t&&(e.s=4,Tp(14),i=!1),_p(e.j,e.m,null,"[Incomplete Response]");break}if(r==qp){e.s=4,Tp(15),_p(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_p(e.j,e.m,r,null),tv(e,r)}Gp(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Tp(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vm(t),t.M=!0,Tp(11))):(_p(e.j,e.m,n,"[Invalid Chunked Response]"),ev(e),Zp(e))}function Yp(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Hp:(n=Number(t.substring(n,r)),isNaN(n)?qp:(r+=1)+n>t.length?Hp:(t=t.slice(r,r+n),e.o=r+n,t))}function $p(e){e.Y=Date.now()+e.P,Xp(e,e.P)}function Xp(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Np($f(e.lb,e),t)}function Jp(e){e.C&&(qf.clearTimeout(e.C),e.C=null)}function Zp(e){0==e.l.H||e.J||gm(e.l,e)}function ev(e){Jp(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,hp(e.V),gp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function tv(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Rv(n.i,e)))if(!e.K&&Rv(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ym(n),sm(n)}pm(n),Tp(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Np($f(n.ib,n),6e3));if(1>=Nv(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else _m(n,11)}else if((e.K||n.g==e)&&ym(n),!ad(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Av(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,cv(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=bm(r,r.J?r.pa:null,r.Y),d.K){Pv(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.C&&(Jp(p),$p(p)),r.g=d}else dm(r);0<n.j.length&&cm(n)}else"stop"!=a[0]&&"close"!=a[0]||_m(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?_m(n,7):om(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}xp()}catch(a){}}function nv(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Hf(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Hf(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Hf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(jf=Vp.prototype).setTimeout=function(e){this.P=e},jf.nb=function(e){e=e.target;var t=this.M;t&&3==em(e)?t.l():this.Pa(e)},jf.Pa=function(e){try{if(e==this.g)e:{var t=em(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||pd||this.g&&(this.h.h||this.g.ja()||tm(this.g)))){this.J||4!=t||7==n||xp(),Jp(this);var r=this.g.da();this.ca=r;t:if(Gp(this)){var i=tm(this.g);e="";var a=i.length,o=4==em(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ev(this),Zp(this);var s="";break t}this.h.i=new qf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.v,this.B,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ad(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.s=3,Tp(12),ev(this),Zp(this);break e}_p(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tv(this,r)}this.S?(Qp(this,t,s),pd&&this.i&&3==t&&(yp(this.U,this.V,"tick",this.mb),this.V.start())):(_p(this.j,this.m,s,null),tv(this,s)),4==t&&ev(this),this.i&&!this.J&&(4==t?gm(this.l,this):(this.i=!1,$p(this)))}else(function(e){var t={};e=(e.g&&2<=em(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!ad(e[n])){var r=rp(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.s=3,Tp(12)):(this.s=0,Tp(13)),ev(this),Zp(this)}}}catch(t){}},jf.mb=function(){if(this.g){var e=em(this.g),t=this.g.ja();this.o<t.length&&(Jp(this),Qp(this,e,t),this.i&&4!=e&&$p(this))}},jf.cancel=function(){this.J=!0,ev(this)},jf.lb=function(){this.C=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(xp(),Tp(17)),ev(this),this.s=2,Zp(this)):Xp(this,this.Y-e)};var rv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iv(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof iv){this.h=e.h,ov(this,e.j),this.s=e.s,this.g=e.g,sv(this,e.m),this.l=e.l;var t=e.i,n=new kv;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),uv(this,n),this.o=e.o}else e&&(t=String(e).match(rv))?(this.h=!1,ov(this,t[1]||"",!0),this.s=hv(t[2]||""),this.g=hv(t[3]||"",!0),sv(this,t[4]),this.l=hv(t[5]||"",!0),uv(this,t[6]||"",!0),this.o=hv(t[7]||"")):(this.h=!1,this.i=new kv(null,this.h))}function av(e){return new iv(e)}function ov(e,t,n){e.j=n?hv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function sv(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function uv(e,t,n){t instanceof kv?(e.i=t,function(e,t){t&&!e.j&&(_v(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wv(this,t),Ev(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=fv(t,yv)),e.i=new kv(t,e.h))}function cv(e,t,n){e.i.set(t,n)}function lv(e){return cv(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function fv(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,dv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}iv.prototype.toString=function(){var e=[],t=this.j;t&&e.push(fv(t,pv,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(fv(t,pv,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(fv(n,"/"==n.charAt(0)?mv:vv,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",fv(n,gv)),e.join("")};var pv=/[#\/\?@]/g,vv=/[#\?:]/g,mv=/[#\?]/g,yv=/[#\?@]/g,gv=/#/g;function kv(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _v(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wv(e,t){_v(e),t=Sv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function bv(e,t){return _v(e),t=Sv(e,t),e.g.has(t)}function Ev(e,t,n){wv(e,t),0<n.length&&(e.i=null,e.g.set(Sv(e,t),td(n)),e.h+=n.length)}function Sv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jf=kv.prototype).add=function(e,t){_v(this),this.i=null,e=Sv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jf.forEach=function(e,t){_v(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},jf.ta=function(){_v(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},jf.Z=function(e){_v(this);var t=[];if("string"===typeof e)bv(this,e)&&(t=t.concat(this.g.get(Sv(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},jf.set=function(e,t){return _v(this),this.i=null,bv(this,e=Sv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jf.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},jf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var xv=m((function e(t,n){f(this,e),this.g=t,this.map=n}));function Cv(e){this.l=e||Tv,qf.PerformanceNavigationTiming?e=0<(e=qf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qf.g&&qf.g.Ka&&qf.g.Ka()&&qf.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Tv=10;function Iv(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Nv(e){return e.h?1:e.g?e.g.size:0}function Rv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Av(e,t){e.g?e.g.add(t):e.h=t}function Pv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ov(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=x(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return td(e.i)}Cv.prototype.cancel=function(){if(this.i=Ov(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=x(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Dv=function(){function e(){f(this,e)}return m(e,[{key:"stringify",value:function(e){return qf.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return qf.JSON.parse(e,void 0)}}]),e}();function Lv(){this.g=new Dv}function Mv(e,t,n){var r=n||"";try{nv(e,(function(e,n){var i=e;Wf(e)&&(i=Xd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(fI){throw t.push(r+"type="+encodeURIComponent("_badmap")),fI}}function Uv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(EI){}}function Fv(e){this.l=e.ec||null,this.j=e.ob||!1}function jv(e,t){Qd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Vv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jf(Fv,Pp),Fv.prototype.g=function(){return new jv(this.l,this.j)},Fv.prototype.i=function(e){return function(){return e}}({}),Jf(jv,Qd);var Vv=0;function zv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Bv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qv(e)}function qv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jf=jv.prototype).open=function(e,t){if(this.readyState!=Vv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qv(this)},jf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||qf).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},jf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bv(this)),this.readyState=Vv},jf.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qv(this)),this.g&&(this.readyState=3,qv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof qf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},jf.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bv(this):qv(this),3==this.readyState&&zv(this)}},jf.Za=function(e){this.g&&(this.response=this.responseText=e,Bv(this))},jf.Ya=function(e){this.g&&(this.response=e,Bv(this))},jf.ka=function(){this.g&&Bv(this)},jf.setRequestHeader=function(e,t){this.v.append(e,t)},jf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Hv=qf.JSON.parse;function Wv(e){Qd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Kv,this.L=this.M=!1}Jf(Wv,Qd);var Kv="",Gv=/^https?$/i,Qv=["POST","PUT"];function Yv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$v(e),Jv(e)}function $v(e){e.F||(e.F=!0,Yd(e,"complete"),Yd(e,"error"))}function Xv(e){if(e.h&&"undefined"!=typeof Bf&&(!e.C[1]||4!=em(e)||2!=e.da()))if(e.v&&4==em(e))fp(e.La,0,e);else if(Yd(e,"readystatechange"),4==em(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(rv)[1]||null;!a&&qf.self&&qf.self.location&&(a=qf.self.location.protocol.slice(0,-1)),i=!Gv.test(a?a.toLowerCase():"")}t=i}if(t)Yd(e,"complete"),Yd(e,"success");else{e.m=6;try{var o=2<em(e)?e.g.statusText:""}catch(pI){o=""}e.j=o+" ["+e.da()+"]",$v(e)}}finally{Jv(e)}}}function Jv(e,t){if(e.g){Zv(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Yd(e,"ready");try{n.onreadystatechange=r}catch(fI){}}}function Zv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(qf.clearTimeout(e.A),e.A=null)}function em(e){return e.g?e.g.readyState:0}function tm(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Kv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(uy){return null}}function nm(e){var t="";return Nd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function rm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=nm(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):cv(e,t,n))}function im(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function am(e){this.Ga=0,this.j=[],this.l=new kp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=im("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=im("baseRetryDelayMs",5e3,e),this.hb=im("retryDelaySeedMs",1e4,e),this.eb=im("forwardChannelMaxRetries",2,e),this.xa=im("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Cv(e&&e.concurrentRequestLimit),this.Ja=new Lv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function om(e){if(um(e),3==e.H){var t=e.W++,n=av(e.I);if(cv(n,"SID",e.K),cv(n,"RID",t),cv(n,"TYPE","terminate"),hm(e,n),(t=new Vp(e,e.l,t)).L=2,t.A=lv(av(n)),n=!1,qf.navigator&&qf.navigator.sendBeacon)try{n=qf.navigator.sendBeacon(t.A.toString(),"")}catch(TI){}!n&&qf.Image&&((new Image).src=t.A,n=!0),n||(t.g=Em(t.l,null),t.g.ha(t.A)),t.G=Date.now(),$p(t)}wm(e)}function sm(e){e.g&&(vm(e),e.g.cancel(),e.g=null)}function um(e){sm(e),e.u&&(qf.clearTimeout(e.u),e.u=null),ym(e),e.i.cancel(),e.m&&("number"===typeof e.m&&qf.clearTimeout(e.m),e.m=null)}function cm(e){if(!Iv(e.i)&&!e.m){e.m=!0;var t=e.Na;ap||up(),op||(ap(),op=!0),sp.add(t,e),e.C=0}}function lm(e,t){var n;n=t?t.m:e.W++;var r=av(e.I);cv(r,"SID",e.K),cv(r,"RID",n),cv(r,"AID",e.V),hm(e,r),e.o&&e.s&&rm(r,e.o,e.s),n=new Vp(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=fm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Av(e.i,n),Wp(n,r,t)}function hm(e,t){e.na&&Nd(e.na,(function(e,n){cv(t,n,e)})),e.h&&nv({},(function(e,n){cv(t,n,e)}))}function fm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?$f(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Mv(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function dm(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ap||up(),op||(ap(),op=!0),sp.add(t,e),e.A=0}}function pm(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Np($f(e.Ma,e),km(e,e.A)),e.A++,!0)}function vm(e){null!=e.B&&(qf.clearTimeout(e.B),e.B=null)}function mm(e){e.g=new Vp(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=av(e.wa);cv(t,"RID","rpc"),cv(t,"SID",e.K),cv(t,"AID",e.V),cv(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&cv(t,"TO",e.qa),cv(t,"TYPE","xmlhttp"),hm(e,t),e.o&&e.s&&rm(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=lv(av(t)),n.u=null,n.S=!0,Kp(n,e)}function ym(e){null!=e.v&&(qf.clearTimeout(e.v),e.v=null)}function gm(e,t){var n=null;if(e.g==t){ym(e),vm(e),e.g=null;var r=2}else{if(!Rv(e.i,t))return;n=t.F,Pv(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Yd(r=Ep(),new Ip(r,n)),cm(e)}else dm(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Nv(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Np($f(e.Na,e,t),km(e,e.C)),e.C++,!0))}(e,t)||2==r&&pm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_m(e,5);break;case 4:_m(e,10);break;case 3:_m(e,6);break;default:_m(e,2)}}function km(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function _m(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=$f(e.pb,e);n||(n=new iv("//www.google.com/images/cleardot.gif"),qf.location&&"http"==qf.location.protocol||ov(n,"https"),lv(n)),function(e,t){var n=new kp;if(qf.Image){var r=new Image;r.onload=Xf(Uv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xf(Uv,n,r,"TestLoadImage: error",!1,t),r.onabort=Xf(Uv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xf(Uv,n,r,"TestLoadImage: timeout",!1,t),qf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Tp(2);e.H=0,e.h&&e.h.za(t),wm(e),um(e)}function wm(e){if(e.H=0,e.ma=[],e.h){var t=Ov(e.i);0==t.length&&0==e.j.length||(nd(e.ma,t),nd(e.ma,e.j),e.i.i.length=0,td(e.j),e.j.length=0),e.h.ya()}}function bm(e,t,n){var r=n instanceof iv?av(n):new iv(n);if(""!=r.g)t&&(r.g=t+"."+r.g),sv(r,r.m);else{var i=qf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new iv(null);r&&ov(a,r),t&&(a.g=t),i&&sv(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&cv(r,n,t),cv(r,"VER",e.ra),hm(e,r),r}function Em(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Wv(new Fv({ob:n})):new Wv(e.va)).Oa(e.J),t}function Sm(){}function xm(){if(fd&&!(10<=Number(bd)))throw Error("Environmental error: no available transport.")}function Cm(e,t){Qd.call(this),this.g=new am(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ad(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ad(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nm(this)}function Tm(e){Up.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Im(){Fp.call(this),this.status=1}function Nm(e){this.g=e}function Rm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Am(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Pm(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(jf=Wv.prototype).Oa=function(e){this.M=e},jf.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lp.g(),this.C=this.u?Op(this.u):Op(Lp),this.g.onreadystatechange=$f(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Yv(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=x(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qf.FormData&&e instanceof qf.FormData,!(0<=ed(Qv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,l=x(n);try{for(l.s();!(u=l.n()).done;){var h=c(u.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Zv(this),0<this.B&&((this.L=function(e){return fd&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$f(this.ua,this)):this.A=fp(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Yv(this,s)}},jf.ua=function(){"undefined"!=typeof Bf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yd(this,"timeout"),this.abort(8))},jf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Yd(this,"complete"),Yd(this,"abort"),Jv(this))},jf.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jv(this,!0)),Wv.$.N.call(this)},jf.La=function(){this.s||(this.G||this.v||this.l?Xv(this):this.kb())},jf.kb=function(){Xv(this)},jf.isActive=function(){return!!this.g},jf.da=function(){try{return 2<em(this)?this.g.status:-1}catch(kI){return-1}},jf.ja=function(){try{return this.g?this.g.responseText:""}catch(kI){return""}},jf.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Hv(t)}},jf.Ia=function(){return this.m},jf.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(jf=am.prototype).ra=8,jf.H=1,jf.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Vp(this,this.l,e),n=this.s;if(this.U&&(n?Pd(n=Rd(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=fm(this,t,r),cv(i=av(this.I),"RID",e),cv(i,"CVER",22),this.F&&cv(i,"X-HTTP-Session-Id",this.F),hm(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(nm(n)))+"&"+r:this.o&&rm(i,this.o,n)),Av(this.i,t),this.bb&&cv(i,"TYPE","init"),this.P?(cv(i,"$req",r),cv(i,"SID","null"),t.aa=!0,Wp(t,i,null)):Wp(t,i,r),this.H=2}}else 3==this.H&&(e?lm(this,e):0==this.j.length||Iv(this.i)||lm(this))},jf.Ma=function(){if(this.u=null,mm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Np($f(this.jb,this),e)}},jf.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Tp(10),sm(this),mm(this))},jf.ib=function(){null!=this.v&&(this.v=null,sm(this),pm(this),Tp(19))},jf.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Tp(2)):(this.l.info("Failed to ping google.com"),Tp(1))},jf.isActive=function(){return!!this.h&&this.h.isActive(this)},(jf=Sm.prototype).Ba=function(){},jf.Aa=function(){},jf.za=function(){},jf.ya=function(){},jf.isActive=function(){return!0},jf.Va=function(){},xm.prototype.g=function(e,t){return new Cm(e,t)},Jf(Cm,Qd),Cm.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Tp(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=bm(e,null,e.Y),cm(e)},Cm.prototype.close=function(){om(this.g)},Cm.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Xd(e),e=n);t.j.push(new xv(t.fb++,e)),3==t.H&&cm(t)},Cm.prototype.N=function(){this.g.h=null,delete this.j,om(this.g),delete this.g,Cm.$.N.call(this)},Jf(Tm,Up),Jf(Im,Fp),Jf(Nm,Sm),Nm.prototype.Ba=function(){Yd(this.g,"a")},Nm.prototype.Aa=function(e){Yd(this.g,new Tm(e))},Nm.prototype.za=function(e){Yd(this.g,new Im)},Nm.prototype.ya=function(){Yd(this.g,"b")},Jf(Rm,(function(){this.blockSize=-1})),Rm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Rm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Am(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Am(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Am(this,r),i=0;break}}this.h=i,this.i+=t},Rm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Om={};function Dm(e){return-128<=e&&128>e?function(e,t){var n=Om;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Pm([0|e],0>e?-1:0)})):new Pm([0|e],0>e?-1:0)}function Lm(e){if(isNaN(e)||!isFinite(e))return Um;if(0>e)return Bm(Lm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Mm;return new Pm(t,0)}var Mm=4294967296,Um=Dm(0),Fm=Dm(1),jm=Dm(16777216);function Vm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function zm(e){return-1==e.h}function Bm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Pm(n,~e.h).add(Fm)}function qm(e,t){return e.add(Bm(t))}function Hm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Wm(e,t){this.g=e,this.h=t}function Km(e,t){if(Vm(t))throw Error("division by zero");if(Vm(e))return new Wm(Um,Um);if(zm(e))return t=Km(Bm(e),t),new Wm(Bm(t.g),Bm(t.h));if(zm(t))return t=Km(e,Bm(t)),new Wm(Bm(t.g),t.h);if(30<e.g.length){if(zm(e)||zm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Fm,r=t;0>=r.X(e);)n=Gm(n),r=Gm(r);var i=Qm(n,1),a=Qm(r,1);for(r=Qm(r,2),n=Qm(n,2);!Vm(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Qm(r,1),n=Qm(n,1)}return t=qm(e,i.R(t)),new Wm(i,t)}for(i=Um;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Lm(n)).R(t);zm(o)||0<o.X(e);)o=(a=Lm(n-=r)).R(t);Vm(a)&&(a=Fm),i=i.add(a),e=qm(e,o)}return new Wm(i,e)}function Gm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Pm(n,e.h)}function Qm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Pm(i,e.h)}(jf=Pm.prototype).ea=function(){if(zm(this))return-Bm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Mm+r)*t,t*=Mm}return e},jf.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Vm(this))return"0";if(zm(this))return"-"+Bm(this).toString(e);for(var t=Lm(Math.pow(e,6)),n=this,r="";;){var i=Km(n,t).g,a=((0<(n=qm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Vm(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},jf.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},jf.X=function(e){return zm(e=qm(this,e))?-1:Vm(e)?0:1},jf.abs=function(){return zm(this)?Bm(this):this},jf.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Pm(n,-2147483648&n[n.length-1]?-1:0)},jf.R=function(e){if(Vm(this)||Vm(e))return Um;if(zm(this))return zm(e)?Bm(this).R(Bm(e)):Bm(Bm(this).R(e));if(zm(e))return Bm(this.R(Bm(e)));if(0>this.X(jm)&&0>e.X(jm))return Lm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Hm(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Hm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Hm(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Hm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Pm(n,0)},jf.gb=function(e){return Km(this,e).h},jf.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Pm(n,this.h&e.h)},jf.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Pm(n,this.h|e.h)},jf.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Pm(n,this.h^e.h)},xm.prototype.createWebChannel=xm.prototype.g,Cm.prototype.send=Cm.prototype.u,Cm.prototype.open=Cm.prototype.m,Cm.prototype.close=Cm.prototype.close,Rp.NO_ERROR=0,Rp.TIMEOUT=8,Rp.HTTP_ERROR=6,Ap.COMPLETE="complete",Dp.EventType=Mp,Mp.OPEN="a",Mp.CLOSE="b",Mp.ERROR="c",Mp.MESSAGE="d",Qd.prototype.listen=Qd.prototype.O,Wv.prototype.listenOnce=Wv.prototype.P,Wv.prototype.getLastError=Wv.prototype.Sa,Wv.prototype.getLastErrorCode=Wv.prototype.Ia,Wv.prototype.getStatus=Wv.prototype.da,Wv.prototype.getResponseJson=Wv.prototype.Wa,Wv.prototype.getResponseText=Wv.prototype.ja,Wv.prototype.send=Wv.prototype.ha,Wv.prototype.setWithCredentials=Wv.prototype.Oa,Rm.prototype.digest=Rm.prototype.l,Rm.prototype.reset=Rm.prototype.reset,Rm.prototype.update=Rm.prototype.j,Pm.prototype.add=Pm.prototype.add,Pm.prototype.multiply=Pm.prototype.R,Pm.prototype.modulo=Pm.prototype.gb,Pm.prototype.compare=Pm.prototype.X,Pm.prototype.toNumber=Pm.prototype.ea,Pm.prototype.toString=Pm.prototype.toString,Pm.prototype.getBits=Pm.prototype.D,Pm.fromNumber=Lm,Pm.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Bm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Lm(Math.pow(n,8)),i=Um,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Lm(Math.pow(n,o)),i=i.R(o).add(Lm(s))):i=(i=i.R(r)).add(Lm(s))}return i};var Ym=zf.createWebChannelTransport=function(){return new xm},$m=zf.getStatEventTarget=function(){return Ep()},Xm=zf.ErrorCode=Rp,Jm=zf.EventType=Ap,Zm=zf.Event=wp,ey=zf.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ty=(zf.FetchXmlHttpFactory=Fv,zf.WebChannel=Dp),ny=zf.XhrIo=Wv,ry=zf.Md5=Rm,iy=zf.Integer=Pm,ay="@firebase/firestore",oy=function(){function e(t){f(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();oy.UNAUTHENTICATED=new oy(null),oy.GOOGLE_CREDENTIALS=new oy("google-credentials-uid"),oy.FIRST_PARTY=new oy("first-party-uid"),oy.MOCK_USER=new oy("mock-user");var sy="10.7.0",uy=new nn("@firebase/firestore");function cy(){return uy.logLevel}function ly(e){if(uy.logLevel<=Yt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dy);uy.debug.apply(uy,["Firestore (".concat(sy,"): ").concat(e)].concat(h(i)))}}function hy(e){if(uy.logLevel<=Yt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dy);uy.error.apply(uy,["Firestore (".concat(sy,"): ").concat(e)].concat(h(i)))}}function fy(e){if(uy.logLevel<=Yt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dy);uy.warn.apply(uy,["Firestore (".concat(sy,"): ").concat(e)].concat(h(i)))}}function dy(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(dI){return e}}function py(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(sy,") INTERNAL ASSERTION FAILED: ")+e;throw hy(t),new Error(t)}function vy(e,t){e||py()}function my(e,t){return e}var yy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gy=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(St),ky=m((function e(){var t=this;f(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),_y=m((function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),wy=function(){function e(){f(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(oy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),by=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ey=function(){function e(t){f(this,e),this.t=t,this.currentUser=oy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ky;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ky,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){ly("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ly("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ky)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ly("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(vy("string"==typeof n.accessToken),new _y(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return vy(null===e||"string"==typeof e),new oy(e)}}]),e}(),Sy=function(){function e(t,n,r){f(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=oy.FIRST_PARTY,this.I=new Map}return m(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),xy=function(){function e(t,n,r){f(this,e),this.l=t,this.h=n,this.P=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Sy(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(oy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Cy=m((function e(t){f(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ty=function(){function e(t){f(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ly("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,ly("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ly("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):ly("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(vy("string"==typeof t.token),e.R=t.token,new Cy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Iy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ny=function(){function e(){f(this,e)}return m(e,null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Iy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ry(e,t){return e<t?-1:e>t?1:0}function Ay(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Py=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new gy(yy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gy(yy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new gy(yy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gy(yy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ry(this.nanoseconds,e.nanoseconds):Ry(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Oy=function(){function e(t){f(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Py(0,0))}},{key:"max",value:function(){return new e(new Py(253402300799,999999999))}}]),e}(),Dy=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&py(),void 0===r?r=t.length-n:r>t.length-n&&py(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ly=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new gy(yy.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Dy),My=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Uy=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return My.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new gy(yy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new gy(yy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gy(yy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new gy(yy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Dy),Fy=function(){function e(t){f(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ly.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ly.fromString(t))}},{key:"fromName",value:function(t){return new e(Ly.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ly.emptyPath())}},{key:"comparator",value:function(e,t){return Ly.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ly(t.slice()))}}]),e}(),jy=m((function e(t,n,r,i){f(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));jy.UNKNOWN_ID=-1;function Vy(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Oy.fromTimestamp(1e9===r?new Py(n+1,0):new Py(n,r));return new By(i,Fy.empty(),t)}function zy(e){return new By(e.readTime,e.key,-1)}var By=function(){function e(t,n,r){f(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(Oy.min(),Fy.empty(),-1)}},{key:"max",value:function(){return new e(Oy.max(),Fy.empty(),-1)}}]),e}();function qy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Fy.comparator(e.documentKey,t.documentKey))?n:Ry(e.largestBatchId,t.largestBatchId)}var Hy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wy=function(){function e(){f(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ky(e){return Gy.apply(this,arguments)}function Gy(){return Gy=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===yy.FAILED_PRECONDITION&&t.message===Hy){e.next=2;break}throw t;case 2:ly("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gy.apply(this,arguments)}var Qy=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&py(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=x(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Yy(e){return"IndexedDbTransactionError"===e.name}var $y=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.se(e)},this.oe=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"se",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.oe&&this.oe(e),e}}]),e}();function Xy(e){return null==e}function Jy(e){return 0===e&&1/e==-1/0}function Zy(e){return"number"==typeof e&&Number.isInteger(e)&&!Jy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}$y._e=-1;var eg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),tg=([].concat(h(eg),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),ng=tg;[].concat(ng,["indexConfiguration","indexState","indexEntries"]);function rg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ig(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ag(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var og=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||ug.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ug.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ug.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new sg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new sg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new sg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new sg(this.root,e,this.comparator,!0)}}]),e}(),sg=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ug=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw py();if(this.right.isRed())throw py();var e=this.left.check();if(e!==this.right.check())throw py();return e+(this.isRed()?0:1)}}]),e}();ug.EMPTY=null,ug.RED=!0,ug.BLACK=!1,ug.EMPTY=new(function(){function e(){f(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw py()}},{key:"value",get:function(){throw py()}},{key:"color",get:function(){throw py()}},{key:"left",get:function(){throw py()}},{key:"right",get:function(){throw py()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ug(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var cg=function(){function e(t){f(this,e),this.comparator=t,this.data=new og(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new lg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new lg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),lg=function(){function e(t){f(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var hg=function(){function e(t){f(this,e),this.fields=t,t.sort(Uy.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new cg(Uy.comparator),i=x(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=x(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=x(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ay(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),fg=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return m(n)}(S(Error));var dg=function(e){function t(e){f(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return function(e){return btoa(e)}(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ry(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new fg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();dg.EMPTY_BYTE_STRING=new dg("");var pg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vg(e){if(vy(!!e),"string"==typeof e){var t=0,n=pg.exec(e);if(vy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:mg(e.seconds),nanos:mg(e.nanos)}}function mg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yg(e){return"string"==typeof e?dg.fromBase64String(e):dg.fromUint8Array(e)}function gg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kg(e){var t=e.mapValue.fields.__previous_value__;return gg(t)?kg(t):t}function _g(e){var t=vg(e.mapValue.fields.__local_write_time__.timestampValue);return new Py(t.seconds,t.nanos)}var wg=m((function e(t,n,r,i,a,o,s,u,c){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),bg=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Eg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gg(e)?4:Fg(e)?9007199254740991:10:py()}function xg(e,t){if(e===t)return!0;var n=Sg(e);if(n!==Sg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _g(e).isEqual(_g(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=vg(e.timestampValue),r=vg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yg(e.bytesValue).isEqual(yg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mg(e.geoPointValue.latitude)===mg(t.geoPointValue.latitude)&&mg(e.geoPointValue.longitude)===mg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mg(e.integerValue)===mg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=mg(e.doubleValue),r=mg(t.doubleValue);return n===r?Jy(n)===Jy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ay(e.arrayValue.values||[],t.arrayValue.values||[],xg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rg(n)!==rg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xg(n[i],r[i])))return!1;return!0}(e,t);default:return py()}}function Cg(e,t){return void 0!==(e.values||[]).find((function(e){return xg(e,t)}))}function Tg(e,t){if(e===t)return 0;var n=Sg(e),r=Sg(t);if(n!==r)return Ry(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ry(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=mg(e.integerValue||e.doubleValue),r=mg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ig(e.timestampValue,t.timestampValue);case 4:return Ig(_g(e),_g(t));case 5:return Ry(e.stringValue,t.stringValue);case 6:return function(e,t){var n=yg(e),r=yg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ry(n[i],r[i]);if(0!==a)return a}return Ry(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ry(mg(e.latitude),mg(t.latitude));return 0!==n?n:Ry(mg(e.longitude),mg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Tg(n[i],r[i]);if(a)return a}return Ry(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Eg.mapValue&&t===Eg.mapValue)return 0;if(e===Eg.mapValue)return 1;if(t===Eg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Ry(r[o],a[o]);if(0!==s)return s;var u=Tg(n[r[o]],i[a[o]]);if(0!==u)return u}return Ry(r.length,a.length)}(e.mapValue,t.mapValue);default:throw py()}}function Ig(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ry(e,t);var n=vg(e),r=vg(t),i=Ry(n.seconds,r.seconds);return 0!==i?i:Ry(n.nanos,r.nanos)}function Ng(e){return Rg(e)}function Rg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=vg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return yg(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Fy.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=x(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Rg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=x(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Rg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):py()}function Ag(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Pg(e){return!!e&&"integerValue"in e}function Og(e){return!!e&&"arrayValue"in e}function Dg(e){return!!e&&"nullValue"in e}function Lg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mg(e){return!!e&&"mapValue"in e}function Ug(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ig(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ug(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ug(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Fg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var jg=function(){function e(t){f(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Mg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ug(t)}},{key:"setAll",value:function(e){var t=this,n=Uy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ug(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Mg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return xg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Mg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ig(t,(function(t,n){return e[t]=n}));var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ug(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Vg(e){var t=[];return ig(e.fields,(function(e,n){var r=new Uy([e]);if(Mg(n)){var i=Vg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=x(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new hg(t)}var zg=function(){function e(t,n,r,i,a,o,s){f(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Oy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=jg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=jg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Oy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Oy.min(),Oy.min(),Oy.min(),jg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Oy.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Oy.min(),Oy.min(),jg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Oy.min(),Oy.min(),jg.empty(),2)}}]),e}(),Bg=m((function e(t,n){f(this,e),this.position=t,this.inclusive=n}));function qg(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Fy.comparator(Fy.fromName(o.referenceValue),n.key):Tg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Hg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!xg(e.position[n],t.position[n]))return!1;return!0}var Wg=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n}));function Kg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Gg=m((function e(){f(this,e)})),Qg=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tg(t,this.value)):null!==t&&Sg(this.value)===Sg(t)&&this.matchesComparison(Tg(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return py()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nk(e,t,r):"array-contains"===t?new ok(e,r):"in"===t?new sk(e,r):"not-in"===t?new uk(e,r):"array-contains-any"===t?new ck(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new rk(e,n):new ik(e,n)}}]),n}(Gg),Yg=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).filters=e,i.op=r,i.ue=null,i}return m(n,[{key:"matches",value:function(e){return $g(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ue||(this.ue=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ue}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Gg);function $g(e){return"and"===e.op}function Xg(e){return Jg(e)&&$g(e)}function Jg(e){var t,n=x(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Yg)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Zg(e){if(e instanceof Qg)return e.field.canonicalString()+e.op.toString()+Ng(e.value);if(Xg(e))return e.filters.map((function(e){return Zg(e)})).join(",");var t=e.filters.map((function(e){return Zg(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function ek(e,t){return e instanceof Qg?function(e,t){return t instanceof Qg&&e.op===t.op&&e.field.isEqual(t.field)&&xg(e.value,t.value)}(e,t):e instanceof Yg?function(e,t){return t instanceof Yg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&ek(n,t.filters[r])}),!0)}(e,t):void py()}function tk(e){return e instanceof Qg?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ng(e.value))}(e):e instanceof Yg?function(e){return e.op.toString()+" {"+e.getFilters().map(tk).join(" ,")+"}"}(e):"Filter"}var nk=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=Fy.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=Fy.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Qg),rk=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=ak("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Qg),ik=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=ak("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Qg);function ak(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Fy.fromName(e.referenceValue)}))}var ok=function(e){g(n,e);var t=b(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Og(t)&&Cg(t.arrayValue,this.value)}}]),n}(Qg),sk=function(e){g(n,e);var t=b(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Cg(this.value.arrayValue,t)}}]),n}(Qg),uk=function(e){g(n,e);var t=b(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(Cg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Cg(this.value.arrayValue,t)}}]),n}(Qg),ck=function(e){g(n,e);var t=b(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Og(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Cg(t.value.arrayValue,e)}))}}]),n}(Qg),lk=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ce=null}));function hk(e){return new lk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fk(e){var t=my(e);if(null===t.ce){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Zg(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Xy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ng(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ng(e)})).join(",")),t.ce=n}return t.ce}function dk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Kg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!ek(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hg(e.startAt,t.startAt)&&Hg(e.endAt,t.endAt)}function pk(e){return Fy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var vk=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}));function mk(e,t,n,r,i,a,o,s){return new vk(e,t,n,r,i,a,o,s)}function yk(e){return new vk(e)}function gk(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kk(e){return null!==e.collectionGroup}function _k(e){var t=my(e);if(null===t.le){t.le=[];var n,r=new Set,i=x(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.le.push(a),r.add(a.field.canonicalString())}}catch(u){i.e(u)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",s=function(e){var t=new cg(Uy.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);s.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.le.push(new Wg(e,o))})),r.has(Uy.keyField().canonicalString())||t.le.push(new Wg(Uy.keyField(),o))}return t.le}function wk(e){var t=my(e);return t.he||(t.he=bk(t,_k(e))),t.he}function bk(e,t){if("F"===e.limitType)return hk(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Wg(e.field,t)}));var n=e.endAt?new Bg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bg(e.startAt.position,e.startAt.inclusive):null;return hk(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Ek(e,t){var n=e.filters.concat([t]);return new vk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Sk(e,t,n){return new vk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xk(e,t){return dk(wk(e),wk(t))&&e.limitType===t.limitType}function Ck(e){return"".concat(fk(wk(e)),"|lt:").concat(e.limitType)}function Tk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return tk(e)})).join(", "),"]")),Xy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ng(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ng(e)})).join(",")),"Target(".concat(t,")")}(wk(e)),"; limitType=").concat(e.limitType,")")}function Ik(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=x(_k(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=x(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=qg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_k(e),t))&&!(e.endAt&&!function(e,t,n){var r=qg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_k(e),t))}(e,t)}function Nk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rk(e){return function(t,n){var r,i=!1,a=x(_k(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Ak(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Ak(e,t,n){var r=e.field.isKeyField()?Fy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tg(r,i):py()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return py()}}var Pk=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ig(this.inner,(function(t,n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ag(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ok=new og(Fy.comparator);function Dk(){return Ok}var Lk=new og(Fy.comparator);function Mk(){for(var e=Lk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Uk(e){var t=Lk;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Fk(){return Vk()}function jk(){return Vk()}function Vk(){return new Pk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var zk=new og(Fy.comparator),Bk=new cg(Fy.comparator);function qk(){for(var e=Bk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Hk=new cg(Ry);function Wk(){return Hk}function Kk(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jy(t)?"-0":t}}function Gk(e){return{integerValue:""+e}}function Qk(e,t){return Zy(t)?Gk(t):Kk(e,t)}var Yk=m((function e(){f(this,e),this._=void 0}));function $k(e,t,n){return e instanceof Zk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&gg(t)&&(t=kg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof e_?t_(e,t):e instanceof n_?r_(e,t):function(e,t){var n=Jk(e,t),r=a_(n)+a_(e.Ie);return Pg(n)&&Pg(e.Ie)?Gk(r):Kk(e.serializer,r)}(e,t)}function Xk(e,t,n){return e instanceof e_?t_(e,t):e instanceof n_?r_(e,t):n}function Jk(e,t){return e instanceof i_?function(e){return Pg(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Zk=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n)}(Yk),e_=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Yk);function t_(e,t){var n,r=o_(t),i=x(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return xg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var n_=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Yk);function r_(e,t){var n,r=o_(t),i=x(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!xg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var i_=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).serializer=e,i.Ie=r,i}return m(n)}(Yk);function a_(e){return mg(e.integerValue||e.doubleValue)}function o_(e){return Og(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var s_=m((function e(t,n){f(this,e),this.field=t,this.transform=n}));var u_=m((function e(t,n){f(this,e),this.version=t,this.transformResults=n})),c_=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function l_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var h_=m((function e(){f(this,e)}));function f_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new S_(e.key,c_.none()):new y_(e.key,e.data,c_.none());var n,r=e.data,i=jg.empty(),a=new cg(Uy.comparator),o=x(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new g_(e.key,i,new hg(a.toArray()),c_.none())}function d_(e,t,n){e instanceof y_?function(e,t,n){var r=e.value.clone(),i=__(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof g_?function(e,t,n){if(l_(e.precondition,t)){var r=__(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(k_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function p_(e,t,n,r){return e instanceof y_?function(e,t,n,r){if(!l_(e.precondition,t))return n;var i=e.value.clone(),a=w_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof g_?function(e,t,n,r){if(!l_(e.precondition,t))return n;var i=w_(e.fieldTransforms,r,t),a=t.data;return a.setAll(k_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return l_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function v_(e,t){var n,r=null,i=x(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Jk(a.transform,o||null);null!=s&&(null===r&&(r=jg.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function m_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ay(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof e_&&t instanceof e_||e instanceof n_&&t instanceof n_?Ay(e.elements,t.elements,xg):e instanceof i_&&t instanceof i_?xg(e.Ie,t.Ie):e instanceof Zk&&t instanceof Zk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var y_=function(e){g(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(h_),g_=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(h_);function k_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function __(e,t,n){var r=new Map;vy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Xk(o,s,n[i]))}return r}function w_(e,t,n){var r,i=new Map,a=x(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,$k(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var b_,E_,S_=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(h_),x_=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(h_),C_=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&d_(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=x(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=p_(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=x(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=p_(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=jk();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=f_(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Oy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qk())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ay(this.mutations,e.mutations,(function(e,t){return m_(e,t)}))&&Ay(this.baseMutations,e.baseMutations,(function(e,t){return m_(e,t)}))}}]),e}(),T_=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){vy(t.mutations.length===r.length);for(var i=zk,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),I_=function(){function e(t,n){f(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),N_=m((function e(t,n){f(this,e),this.count=t,this.unchangedNames=n}));function R_(e){switch(e){default:return py();case yy.CANCELLED:case yy.UNKNOWN:case yy.DEADLINE_EXCEEDED:case yy.RESOURCE_EXHAUSTED:case yy.INTERNAL:case yy.UNAVAILABLE:case yy.UNAUTHENTICATED:return!1;case yy.INVALID_ARGUMENT:case yy.NOT_FOUND:case yy.ALREADY_EXISTS:case yy.PERMISSION_DENIED:case yy.FAILED_PRECONDITION:case yy.ABORTED:case yy.OUT_OF_RANGE:case yy.UNIMPLEMENTED:case yy.DATA_LOSS:return!0}}function A_(e){if(void 0===e)return hy("GRPC error has no .code"),yy.UNKNOWN;switch(e){case b_.OK:return yy.OK;case b_.CANCELLED:return yy.CANCELLED;case b_.UNKNOWN:return yy.UNKNOWN;case b_.DEADLINE_EXCEEDED:return yy.DEADLINE_EXCEEDED;case b_.RESOURCE_EXHAUSTED:return yy.RESOURCE_EXHAUSTED;case b_.INTERNAL:return yy.INTERNAL;case b_.UNAVAILABLE:return yy.UNAVAILABLE;case b_.UNAUTHENTICATED:return yy.UNAUTHENTICATED;case b_.INVALID_ARGUMENT:return yy.INVALID_ARGUMENT;case b_.NOT_FOUND:return yy.NOT_FOUND;case b_.ALREADY_EXISTS:return yy.ALREADY_EXISTS;case b_.PERMISSION_DENIED:return yy.PERMISSION_DENIED;case b_.FAILED_PRECONDITION:return yy.FAILED_PRECONDITION;case b_.ABORTED:return yy.ABORTED;case b_.OUT_OF_RANGE:return yy.OUT_OF_RANGE;case b_.UNIMPLEMENTED:return yy.UNIMPLEMENTED;case b_.DATA_LOSS:return yy.DATA_LOSS;default:return py()}}(E_=b_||(b_={}))[E_.OK=0]="OK",E_[E_.CANCELLED=1]="CANCELLED",E_[E_.UNKNOWN=2]="UNKNOWN",E_[E_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",E_[E_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",E_[E_.NOT_FOUND=5]="NOT_FOUND",E_[E_.ALREADY_EXISTS=6]="ALREADY_EXISTS",E_[E_.PERMISSION_DENIED=7]="PERMISSION_DENIED",E_[E_.UNAUTHENTICATED=16]="UNAUTHENTICATED",E_[E_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",E_[E_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",E_[E_.ABORTED=10]="ABORTED",E_[E_.OUT_OF_RANGE=11]="OUT_OF_RANGE",E_[E_.UNIMPLEMENTED=12]="UNIMPLEMENTED",E_[E_.INTERNAL=13]="INTERNAL",E_[E_.UNAVAILABLE=14]="UNAVAILABLE",E_[E_.DATA_LOSS=15]="DATA_LOSS";var P_=null;function O_(){return new TextEncoder}var D_=new iy([4294967295,4294967295],0);function L_(e){var t=O_().encode(e),n=new ry;return n.update(t),new Uint8Array(n.digest())}function M_(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new iy([n,r],0),new iy([i,a],0)]}var U_=function(){function e(t,n,r){if(f(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new F_("Invalid padding: ".concat(n));if(r<0)throw new F_("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new F_("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new F_("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*t.length-n,this.Ee=iy.fromNumber(this.Te)}return m(e,[{key:"de",value:function(e,t,n){var r=e.add(t.multiply(iy.fromNumber(n)));return 1===r.compare(D_)&&(r=new iy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}},{key:"Ae",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Te)return!1;for(var t=c(M_(L_(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);if(!this.Ae(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Te)for(var t=c(M_(L_(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);this.Re(a)}}},{key:"Re",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),F_=function(e){g(n,e);var t=b(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return m(n)}(S(Error)),j_=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,V_.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Oy.min(),i,new og(Ry),Dk(),qk())}}]),e}(),V_=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,qk(),qk(),qk())}}]),e}(),z_=m((function e(t,n,r,i){f(this,e),this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i})),B_=m((function e(t,n){f(this,e),this.targetId=t,this.fe=n})),q_=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),H_=function(){function e(){f(this,e),this.ge=0,this.pe=G_(),this.ye=dg.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}return m(e,[{key:"current",get:function(){return this.we}},{key:"resumeToken",get:function(){return this.ye}},{key:"be",get:function(){return 0!==this.ge}},{key:"De",get:function(){return this.Se}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}},{key:"ve",value:function(){var e=qk(),t=qk(),n=qk();return this.pe.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:py()}})),new V_(this.ye,this.we,e,t,n)}},{key:"Fe",value:function(){this.Se=!1,this.pe=G_()}},{key:"Me",value:function(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}},{key:"xe",value:function(e){this.Se=!0,this.pe=this.pe.remove(e)}},{key:"Oe",value:function(){this.ge+=1}},{key:"Ne",value:function(){this.ge-=1,vy(this.ge>=0)}},{key:"Be",value:function(){this.Se=!0,this.we=!0}}]),e}(),W_=function(){function e(t){f(this,e),this.Le=t,this.ke=new Map,this.qe=Dk(),this.Qe=K_(),this.Ke=new og(Ry)}return m(e,[{key:"$e",value:function(e){var t,n=x(e.Ve);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me)}}catch(s){n.e(s)}finally{n.f()}var i,a=x(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.We(o,e.key,e.me)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Ge",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ze(n);switch(e.state){case 0:t.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||t.removeTarget(n);break;case 3:t.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:t.je(n)&&(t.He(n),r.Ce(e.resumeToken));break;default:py()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((function(e,r){n.je(r)&&t(r)}))}},{key:"Je",value:function(e){var t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){var i=r.target;if(pk(i))if(0===n){var a=new Fy(i.path);this.We(t,a,zg.newNoDocument(a,Oy.min()))}else vy(1===n);else{var o=this.Ze(t);if(o!==n){var s=this.Xe(e),u=s?this.et(s,e,o):1;if(0!==u){this.He(t);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}null==P_||P_.tt(function(e,t,n,r,i){var a,o,s,u,c,l,h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},f=t.unchangedNames;return f&&(h.bloomFilter={applied:0===i,hashCount:null!==(a=null==f?void 0:f.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(u=null===(s=null===(o=null==f?void 0:f.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==f?void 0:f.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(o,e.fe,this.Le.nt(),s,u))}}}}},{key:"Xe",value:function(e){var t=e.fe.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,s=i.padding,u=void 0===s?0:s,c=t.hashCount,l=void 0===c?0:c;try{n=yg(o).toUint8Array()}catch(e){if(e instanceof fg)return fy("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new U_(n,u,l)}catch(e){return fy(e instanceof F_?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Te?null:r}},{key:"et",value:function(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}},{key:"rt",value:function(e,t){var n=this,r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Le.nt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.We(t,r,null),i++)})),i}},{key:"it",value:function(e){var t=this,n=new Map;this.ke.forEach((function(r,i){var a=t.Ye(i);if(a){if(r.current&&pk(a.target)){var o=new Fy(a.target.path);null!==t.qe.get(o)||t.st(i,o)||t.We(i,o,zg.newNoDocument(o,e))}r.De&&(n.set(i,r.ve()),r.Fe())}}));var r=qk();this.Qe.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ye(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new j_(e,n,this.Ke,this.qe,r);return this.qe=Dk(),this.Qe=K_(),this.Ke=new og(Ry),i}},{key:"Ue",value:function(e,t){if(this.je(e)){var n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}}},{key:"We",value:function(e,t,n){if(this.je(e)){var r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.ke.delete(e)}},{key:"Ze",value:function(e){var t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Oe",value:function(e){this.ze(e).Oe()}},{key:"ze",value:function(e){var t=this.ke.get(e);return t||(t=new H_,this.ke.set(e,t)),t}},{key:"ot",value:function(e){var t=this.Qe.get(e);return t||(t=new cg(Ry),this.Qe=this.Qe.insert(e,t)),t}},{key:"je",value:function(e){var t=null!==this.Ye(e);return t||ly("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ye",value:function(e){var t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}},{key:"He",value:function(e){var t=this;this.ke.set(e,new H_),this.Le.getRemoteKeysForTarget(e).forEach((function(n){t.We(e,n,null)}))}},{key:"st",value:function(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}]),e}();function K_(){return new og(Fy.comparator)}function G_(){return new og(Fy.comparator)}var Q_={asc:"ASCENDING",desc:"DESCENDING"},Y_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$_={and:"AND",or:"OR"},X_=m((function e(t,n){f(this,e),this.databaseId=t,this.useProto3Json=n}));function J_(e,t){return e.useProto3Json||Xy(t)?t:{value:t}}function Z_(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ew(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tw(e,t){return Z_(e,t.toTimestamp())}function nw(e){return vy(!!e),Oy.fromTimestamp(function(e){var t=vg(e);return new Py(t.seconds,t.nanos)}(e))}function rw(e,t){return function(e){return new Ly(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function iw(e){var t=Ly.fromString(e);return vy(Sw(t)),t}function aw(e,t){return rw(e.databaseId,t.path)}function ow(e,t){var n=iw(t);if(n.get(1)!==e.databaseId.projectId)throw new gy(yy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gy(yy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fy(lw(n))}function sw(e,t){return rw(e.databaseId,t)}function uw(e){var t=iw(e);return 4===t.length?Ly.emptyPath():lw(t)}function cw(e){return new Ly(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lw(e){return vy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function hw(e,t,n){return{name:aw(e,t),fields:n.value.mapValue.fields}}function fw(e,t){var n;if(t instanceof y_)n={update:hw(e,t.key,t.value)};else if(t instanceof S_)n={delete:aw(e,t.key)};else if(t instanceof g_)n={update:hw(e,t.key,t.data),updateMask:Ew(t.fieldMask)};else{if(!(t instanceof x_))return py();n={verify:aw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Zk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof e_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof n_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof i_)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw py()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:tw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:py()}(e,t.precondition)),n}function dw(e,t){return{documents:[sw(e,t.path)]}}function pw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=sw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=sw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return bw(Yg.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:_w(e.field),direction:yw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=J_(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function vw(e){var t=uw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=mw(e);return t instanceof Yg&&Xg(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new Wg(ww(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return Xy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Bg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Bg(n,t)}(n.endAt)),mk(t,i,s,o,u,"F",c,l)}function mw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ww(e.unaryFilter.field);return Qg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ww(e.unaryFilter.field);return Qg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ww(e.unaryFilter.field);return Qg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ww(e.unaryFilter.field);return Qg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return py()}}(e):void 0!==e.fieldFilter?function(e){return Qg.create(ww(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return py()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Yg.create(e.compositeFilter.filters.map((function(e){return mw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return py()}}(e.compositeFilter.op))}(e):py()}function yw(e){return Q_[e]}function gw(e){return Y_[e]}function kw(e){return $_[e]}function _w(e){return{fieldPath:e.canonicalString()}}function ww(e){return Uy.fromServerFormat(e.fieldPath)}function bw(e){return e instanceof Qg?function(e){if("=="===e.op){if(Lg(e.value))return{unaryFilter:{field:_w(e.field),op:"IS_NAN"}};if(Dg(e.value))return{unaryFilter:{field:_w(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Lg(e.value))return{unaryFilter:{field:_w(e.field),op:"IS_NOT_NAN"}};if(Dg(e.value))return{unaryFilter:{field:_w(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_w(e.field),op:gw(e.op),value:e.value}}}(e):e instanceof Yg?function(e){var t=e.getFilters().map((function(e){return bw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:kw(e.op),filters:t}}}(e):py()}function Ew(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Sw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var xw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Oy.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dg.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Cw=m((function e(t){f(this,e),this.ut=t}));function Tw(e){var t=vw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Sk(t,t.limit,"L"):t}var Iw=function(){function e(){f(this,e)}return m(e,[{key:"ht",value:function(e,t){this.Pt(e,t),t.It()}},{key:"Pt",value:function(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(mg(e.integerValue));else if("doubleValue"in e){var n=mg(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Jy(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt("".concat(r.seconds||"")),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(yg(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?Fg(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):py()}},{key:"At",value:function(e,t){this.Tt(t,25),this.wt(e,t)}},{key:"wt",value:function(e,t){t.dt(e)}},{key:"gt",value:function(e,t){var n=e.fields||{};this.Tt(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.At(a,t),this.Pt(n[a],t)}}},{key:"yt",value:function(e,t){var n=e.values||[];this.Tt(t,50);var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Pt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ft",value:function(e,t){var n=this;this.Tt(t,37),Fy.fromName(e).path.forEach((function(e){n.Tt(t,60),n.wt(e,t)}))}},{key:"Tt",value:function(e,t){e.Et(t)}},{key:"Rt",value:function(e){e.Et(2)}}]),e}();Iw.St=new Iw;var Nw=function(){function e(){f(this,e),this.on=new Rw}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.on.add(t),Qy.resolve()}},{key:"getCollectionParents",value:function(e,t){return Qy.resolve(this.on.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Qy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Qy.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Qy.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Qy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Qy.resolve(null)}},{key:"getIndexType",value:function(e,t){return Qy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Qy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Qy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Qy.resolve(By.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Qy.resolve(By.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Qy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Qy.resolve()}}]),e}(),Rw=function(){function e(){f(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new cg(Ly.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new cg(Ly.comparator)).toArray()}}]),e}();new Uint8Array(0);var Aw=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Aw.DEFAULT_COLLECTION_PERCENTILE=10,Aw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Aw.DEFAULT=new Aw(41943040,Aw.DEFAULT_COLLECTION_PERCENTILE,Aw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Aw.DISABLED=new Aw(-1,0,0);var Pw=function(){function e(t){f(this,e),this.xn=t}return m(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"On",value:function(){return new e(0)}},{key:"Nn",value:function(){return new e(-1)}}]),e}();var Ow=function(){function e(){f(this,e),this.changes=new Pk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,zg.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Qy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Dw=m((function e(t,n){f(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Lw=function(){function e(t,n,r,i){f(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&p_(r.mutation,e,hg.empty(),Py.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,qk()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qk(),i=Fk();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Mk();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Fk();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,qk())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Dk(),a=Vk(),o=Vk();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof g_)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),p_(o.mutation,t,o.mutation.getFieldMask(),Py.now())):a.set(t.key,hg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Dw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Vk(),i=new og((function(e,t){return e-t})),a=qk();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=x(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||hg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||qk()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=jk();c.forEach((function(e){if(!a.has(e)){var n=f_(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Qy.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return Fy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Qy.resolve(Fk()),s=-1,u=a;return o.next((function(t){return Qy.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Qy.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,qk())})).next((function(e){return{batchId:s,changes:Uk(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Fy(t)).next((function(e){var t=Mk();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Mk();return this.indexManager.getCollectionParents(e,a).next((function(s){return Qy.forEach(s,(function(s){var u=function(e,t){return new vk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(a));return i.getDocumentsMatchingCollectionQuery(e,u,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,zg.newInvalidDocument(r)))}));var n=Mk();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&p_(a.mutation,r,hg.empty(),Py.now()),Ik(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Mw=function(){function e(t){f(this,e),this.serializer=t,this.ur=new Map,this.cr=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return Qy.resolve(this.ur.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:nw(e.createTime)}}(t)),Qy.resolve()}},{key:"getNamedQuery",value:function(e,t){return Qy.resolve(this.cr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Tw(e.bundledQuery),readTime:nw(e.readTime)}}(t)),Qy.resolve()}}]),e}(),Uw=function(){function e(){f(this,e),this.overlays=new og(Fy.comparator),this.lr=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return Qy.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Fk();return Qy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.lt(e,t,i)})),Qy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.lr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.lr.delete(n)),Qy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Fk(),i=t.length+1,a=new Fy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Qy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new og((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Fk(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Fk(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Qy.resolve(u)}},{key:"lt",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new I_(t,n));var a=this.lr.get(t);void 0===a&&(a=qk(),this.lr.set(t,a)),this.lr.set(t,a.add(n.key))}}]),e}(),Fw=function(){function e(){f(this,e),this.hr=new cg(jw.Pr),this.Ir=new cg(jw.Tr)}return m(e,[{key:"isEmpty",value:function(){return this.hr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new jw(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}},{key:"Er",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.dr(new jw(e,t))}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Rr",value:function(e){var t=this,n=new Fy(new Ly([])),r=new jw(n,e),i=new jw(n,e+1),a=[];return this.Ir.forEachInRange([r,i],(function(e){t.dr(e),a.push(e.key)})),a}},{key:"Vr",value:function(){var e=this;this.hr.forEach((function(t){return e.dr(t)}))}},{key:"dr",value:function(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}},{key:"mr",value:function(e){var t=new Fy(new Ly([])),n=new jw(t,e),r=new jw(t,e+1),i=qk();return this.Ir.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new jw(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),jw=function(){function e(t,n){f(this,e),this.key=t,this.gr=n}return m(e,null,[{key:"Pr",value:function(e,t){return Fy.comparator(e.key,t.key)||Ry(e.gr,t.gr)}},{key:"Tr",value:function(e,t){return Ry(e.gr,t.gr)||Fy.comparator(e.key,t.key)}}]),e}(),Vw=function(){function e(t,n){f(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new cg(jw.Pr)}return m(e,[{key:"checkEmpty",value:function(e){return Qy.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new C_(i,t,n,r);this.mutationQueue.push(a);var o,s=x(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.yr=this.yr.add(new jw(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Qy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Qy.resolve(this.wr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Sr(n),i=r<0?0:r;return Qy.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Qy.resolve(0===this.mutationQueue.length?-1:this.pr-1)}},{key:"getAllMutationBatches",value:function(e){return Qy.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new jw(t,0),i=new jw(t,Number.POSITIVE_INFINITY),a=[];return this.yr.forEachInRange([r,i],(function(e){var t=n.wr(e.gr);a.push(t)})),Qy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new cg(Ry);return t.forEach((function(e){var t=new jw(e,0),i=new jw(e,Number.POSITIVE_INFINITY);n.yr.forEachInRange([t,i],(function(e){r=r.add(e.gr)}))})),Qy.resolve(this.br(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Fy.isDocumentKey(i)||(i=i.child(""));var a=new jw(new Fy(i),0),o=new cg(Ry);return this.yr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),a),Qy.resolve(this.br(o))}},{key:"br",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.wr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;vy(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.yr;return Qy.forEach(t.mutations,(function(i){var a=new jw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.yr=r}))}},{key:"Fn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new jw(t,0),r=this.yr.firstAfterOrEqual(n);return Qy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Qy.resolve()}},{key:"Dr",value:function(e,t){return this.Sr(e)}},{key:"Sr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"wr",value:function(e){var t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),zw=function(){function e(t){f(this,e),this.Cr=t,this.docs=new og(Fy.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Qy.resolve(n?n.document.mutableCopy():zg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Dk();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():zg.newInvalidDocument(e))})),Qy.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Dk(),a=t.path,o=new Fy(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||qy(zy(l),n)<=0||(r.has(l.key)||Ik(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Qy.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){py()}},{key:"vr",value:function(e,t){return Qy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Bw(this)}},{key:"getSize",value:function(e){return Qy.resolve(this.size)}}]),e}(),Bw=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this))._r=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t._r.addEntry(e,i)):t._r.removeEntry(r)})),Qy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this._r.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this._r.getEntries(e,t)}}]),n}(Ow),qw=function(){function e(t){f(this,e),this.persistence=t,this.Fr=new Pk((function(e){return fk(e)}),dk),this.lastRemoteSnapshotVersion=Oy.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Fw,this.targetCount=0,this.Nr=Pw.On()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Fr.forEach((function(e,n){return t(n)})),Qy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Qy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Qy.resolve(this.Mr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Nr.next(),Qy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Qy.resolve()}},{key:"kn",value:function(e){this.Fr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Nr=new Pw(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.kn(t),this.targetCount+=1,Qy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.kn(t),Qy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Qy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Fr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Qy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Qy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fr.get(t)||null;return Qy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Or.Er(t,n),Qy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Or.Ar(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Qy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Or.Rr(t),Qy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Or.mr(t);return Qy.resolve(n)}},{key:"containsKey",value:function(e,t){return Qy.resolve(this.Or.containsKey(t))}}]),e}(),Hw=function(){function e(t,n){var r=this;f(this,e),this.Br={},this.overlays={},this.Lr=new $y(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new qw(this),this.indexManager=new Nw,this.remoteDocumentCache=function(e){return new zw(e)}((function(e){return r.referenceDelegate.Qr(e)})),this.serializer=new Cw(n),this.Kr=new Mw(this.serializer)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.kr=!1,Promise.resolve()}},{key:"started",get:function(){return this.kr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Uw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Br[e.toKey()];return n||(n=new Vw(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Kr}},{key:"runTransaction",value:function(e,t,n){var r=this;ly("MemoryPersistence","Starting transaction:",e);var i=new Ww(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((function(e){return r.referenceDelegate.Ur(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Wr",value:function(e,t){return Qy.or(Object.values(this.Br).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Ww=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(Wy),Kw=function(){function e(t){f(this,e),this.persistence=t,this.Gr=new Fw,this.zr=null}return m(e,[{key:"Hr",get:function(){if(this.zr)return this.zr;throw py()}},{key:"addReference",value:function(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Qy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Qy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hr.add(t.toString()),Qy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gr.Rr(t.targetId).forEach((function(e){return n.Hr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"$r",value:function(){this.zr=new Set}},{key:"Ur",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qy.forEach(this.Hr,(function(r){var i=Fy.fromPath(r);return t.Jr(e,i).next((function(e){e||n.removeEntry(i,Oy.min())}))})).next((function(){return t.zr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Jr(e,t).next((function(e){e?n.Hr.delete(t.toString()):n.Hr.add(t.toString())}))}},{key:"Qr",value:function(e){return 0}},{key:"Jr",value:function(e,t){var n=this;return Qy.or([function(){return Qy.resolve(n.Gr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Wr(e,t)}])}}],[{key:"jr",value:function(t){return new e(t)}}]),e}();var Gw=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}return m(e,null,[{key:"Qi",value:function(t,n){var r,i=qk(),a=qk(),o=x(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Qw=function(){function e(){f(this,e),this._documentReadCount=0}return m(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),Yw=function(){function e(){f(this,e),this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}return m(e,[{key:"initialize",value:function(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.zi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Qw;return i.Hi(e,t,n).next((function(r){if(a.result=r,i.$i)return i.Ji(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Ji",value:function(e,t,n,r){return n.documentReadCount<this.Ui?(cy()<=Yt.DEBUG&&ly("QueryEngine","SDK will not create cache indexes for query:",Tk(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Qy.resolve()):(cy()<=Yt.DEBUG&&ly("QueryEngine","Query:",Tk(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(cy()<=Yt.DEBUG&&ly("QueryEngine","The SDK decides to create cache indexes for query:",Tk(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wk(t))):Qy.resolve())}},{key:"zi",value:function(e,t){var n=this;if(gk(t))return Qy.resolve(null);var r=wk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Sk(t,null,"F"),r=wk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=qk.apply(void 0,h(i));return n.Gi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Yi(t,i);return n.Zi(t,o,a,r.readTime)?n.zi(e,Sk(t,null,"F")):n.Xi(e,o,t,r)}))}))})))}))}},{key:"ji",value:function(e,t,n,r){var i=this;return gk(t)||r.isEqual(Oy.min())?Qy.resolve(null):this.Gi.getDocuments(e,n).next((function(a){var o=i.Yi(t,a);return i.Zi(t,o,n,r)?Qy.resolve(null):(cy()<=Yt.DEBUG&&ly("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tk(t)),i.Xi(e,o,t,Vy(r,-1)).next((function(e){return e})))}))}},{key:"Yi",value:function(e,t){var n=new cg(Rk(e));return t.forEach((function(t,r){Ik(e,r)&&(n=n.add(r))})),n}},{key:"Zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Hi",value:function(e,t,n){return cy()<=Yt.DEBUG&&ly("QueryEngine","Using full collection scan to execute query:",Tk(t)),this.Gi.getDocumentsMatchingQuery(e,t,By.min(),n)}},{key:"Xi",value:function(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),$w=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.es=n,this.serializer=i,this.ts=new og(Ry),this.ns=new Pk((function(e){return fk(e)}),dk),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}return m(e,[{key:"os",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lw(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ts)}))}}]),e}();function Xw(e,t,n,r){return new $w(e,t,n,r)}function Jw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=my(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.os(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=qk(),u=x(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=x(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=x(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=x(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{_s:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function eb(e,t){var n=my(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Qy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);vy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=qk(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function tb(e){var t=my(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qr.getLastRemoteSnapshotVersion(e)}))}function nb(e,t){var n=my(e),r=t.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.qr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.qr.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(dg.EMPTY_BYTE_STRING,Oy.min()).withLastLimboFreeSnapshotVersion(Oy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.qr.updateTargetData(e,c))}}));var s=Dk(),u=qk();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rb(e,a,t.documentUpdates).next((function(e){s=e.us,u=e.cs}))),!r.isEqual(Oy.min())){var c=n.qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Qy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.ts=i,e}))}function rb(e,t,n){var r=qk(),i=qk();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Dk();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Oy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ly("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{us:r,cs:i}}))}function ib(e,t){var n=my(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function ab(e,t){var n=my(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qr.getTargetData(e,t).next((function(i){return i?(r=i,Qy.resolve(r)):n.qr.allocateTargetId(e).next((function(i){return r=new xw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}function ob(e,t,n){return sb.apply(this,arguments)}function sb(){return sb=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=my(t),a=i.ts.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Yy(e.t1)){e.next=12;break}throw e.t1;case 12:ly("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ts=i.ts.remove(n),i.ns.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),sb.apply(this,arguments)}function ub(e,t,n){var r=my(e),i=Oy.min(),a=qk();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=my(e),i=r.ns.get(n);return void 0!==i?Qy.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,wk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.es.getDocumentsMatchingQuery(e,t,n?i:Oy.min(),n?a:qk())})).next((function(e){return cb(r,Nk(t),e),{documents:e,ls:a}}))}))}function cb(e,t,n){var r=e.rs.get(t)||Oy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}var lb=function(){function e(){f(this,e),this.activeTargetIds=Wk()}return m(e,[{key:"ds",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Es",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),hb=function(){function e(){f(this,e),this.eo=new lb,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.eo.ds(e),this.no[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.no[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.eo.As(e)}},{key:"isLocalQueryTarget",value:function(e){return this.eo.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.no[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.eo.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.eo.activeTargetIds.has(e)}},{key:"start",value:function(){return this.eo=new lb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),fb=function(){function e(){f(this,e)}return m(e,[{key:"ro",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),db=function(){function e(){var t=this;f(this,e),this.io=function(){return t.so()},this.oo=function(){return t._o()},this.ao=[],this.uo()}return m(e,[{key:"ro",value:function(e){this.ao.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}},{key:"uo",value:function(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}},{key:"so",value:function(){ly("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=x(this.ao);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_o",value:function(){ly("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=x(this.ao);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),pb=null;function vb(){return null===pb?pb=268435456+Math.round(2147483648*Math.random()):pb++,"0x"+pb.toString(16)}var mb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},yb=function(){function e(t){f(this,e),this.co=t.co,this.lo=t.lo}return m(e,[{key:"ho",value:function(e){this.Po=e}},{key:"Io",value:function(e){this.To=e}},{key:"onMessage",value:function(e){this.Eo=e}},{key:"close",value:function(){this.lo()}},{key:"send",value:function(e){this.co(e)}},{key:"Ao",value:function(){this.Po()}},{key:"Ro",value:function(e){this.To(e)}},{key:"Vo",value:function(e){this.Eo(e)}}]),e}(),gb="WebChannelConnection",kb=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return m(n,[{key:"Do",value:function(e,t,n,r){var i=vb();return new Promise((function(a,o){var s=new ny;s.setWithCredentials(!0),s.listenOnce(Jm.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Xm.NO_ERROR:var t=s.getResponseJson();ly(gb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Xm.TIMEOUT:ly(gb,"RPC '".concat(e,"' ").concat(i," timed out")),o(new gy(yy.DEADLINE_EXCEEDED,"Request time out"));break;case Xm.HTTP_ERROR:var n=s.getStatus();if(ly(gb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(yy).indexOf(t)>=0?t:yy.UNKNOWN}(u.status);o(new gy(c,u.message))}else o(new gy(yy.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new gy(yy.UNAVAILABLE,"Connection failed."));break;default:py()}}finally{ly(gb,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);ly(gb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"vo",value:function(e,t,n){var r=vb(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ym(),o=$m(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.bo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");ly(gb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new yb({co:function(t){f?ly(gb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ly(gb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),ly(gb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},lo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,ty.EventType.OPEN,(function(){f||ly(gb,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,ty.EventType.CLOSE,(function(){f||(f=!0,ly(gb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Ro())})),p(l,ty.EventType.ERROR,(function(t){f||(f=!0,fy(gb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Ro(new gy(yy.UNAVAILABLE,"The operation could not be completed")))})),p(l,ty.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];vy(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ly(gb,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=b_[e];if(void 0!==t)return A_(t)}(s),c=o.message;void 0===u&&(u=yy.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.Ro(new gy(u,c)),l.close()}else ly(gb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Vo(i)}})),p(o,Zm.STAT_EVENT,(function(t){t.stat===ey.PROXY?ly(gb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ey.NOPROXY&&ly(gb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ao()}),0),d}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=n+"://"+t.host,this.fo="projects/".concat(r,"/databases/").concat(i),this.po="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return m(e,[{key:"yo",get:function(){return!1}},{key:"wo",value:function(e,t,n,r,i){var a=vb(),o=this.So(e,t);ly("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(s,r,i),this.Do(e,o,s,n).then((function(t){return ly("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw fy("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Co",value:function(e,t,n,r,i,a){return this.wo(e,t,n,r,i)}},{key:"bo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"So",value:function(e,t){var n=mb[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function _b(){return"undefined"!=typeof document?document:null}function wb(e){return new X_(e,!0)}var bb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=a,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.Oo=0}},{key:"Lo",value:function(){this.Oo=this.xo}},{key:"ko",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ly("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Bo=Date.now(),e()})),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}},{key:"Qo",value:function(){null!==this.No&&(this.No.skipDelay(),this.No=null)}},{key:"cancel",value:function(){null!==this.No&&(this.No.cancel(),this.No=null)}},{key:"qo",value:function(){return(Math.random()-.5)*this.Oo}}]),e}(),Eb=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.si=t,this.Ko=r,this.$o=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new bb(t,n)}return m(e,[{key:"jo",value:function(){return 1===this.state||5===this.state||this.Ho()}},{key:"Ho",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Jo()}},{key:"stop",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){this.state=0,this.zo.reset()}},{key:"Zo",value:function(){var e=this;this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(function(){return e.Xo()})))}},{key:"e_",value:function(e){this.t_(),this.stream.send(e)}},{key:"Xo",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ho()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"t_",value:function(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"close",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==t?this.zo.reset():n&&n.code===yy.RESOURCE_EXHAUSTED?(hy(n.toString()),hy("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===yy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Io(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"r_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Uo===n&&e.s_(i,a)}),(function(n){t((function(){var t=new gy(yy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.o_(t)}))}))}},{key:"s_",value:function(e,t){var n=this,r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((function(){r((function(){return n.state=2,n.Go=n.si.enqueueAfterDelay(n.$o,1e4,(function(){return n.Ho()&&(n.state=3),Promise.resolve()})),n.listener.ho()}))})),this.stream.Io((function(e){r((function(){return n.o_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Jo",value:function(){var e=this;this.state=5,this.zo.ko(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"o_",value:function(e){return ly("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"i_",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.Uo===e?n():(ly("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Sb=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return m(n,[{key:"__",value:function(e,t){return this.connection.vo("Listen",e,t)}},{key:"onMessage",value:function(e){this.zo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:py()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(vy(void 0===t||"string"==typeof t),dg.fromBase64String(t||"")):(vy(void 0===t||t instanceof Uint8Array),dg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?yy.UNKNOWN:A_(e.code);return new gy(t,e.message||"")}(o);n=new q_(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=ow(e,u.document.name),l=nw(u.document.updateTime),h=u.document.createTime?nw(u.document.createTime):Oy.min(),f=new jg({mapValue:{fields:u.document.fields}}),d=zg.newFoundDocument(c,l,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new z_(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=ow(e,m.document),g=m.readTime?nw(m.readTime):Oy.min(),k=zg.newNoDocument(y,g),_=m.removedTargetIds||[];n=new z_([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=ow(e,w.document),E=w.removedTargetIds||[];n=new z_([],E,b,null)}else{if(!("filter"in t))return py();t.filter;var S=t.filter;S.targetId;var x=S.count,C=void 0===x?0:x,T=S.unchangedNames,I=new N_(C,T),N=S.targetId;n=new B_(N,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Oy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Oy.min():t.readTime?nw(t.readTime):Oy.min()}(e);return this.listener.a_(t,n)}},{key:"u_",value:function(e){var t={};t.database=cw(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=pk(r)?{documents:dw(e,r)}:{query:pw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ew(e,t.resumeToken);var i=J_(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Oy.min())>0){n.readTime=Z_(e,t.snapshotVersion.toTimestamp());var a=J_(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return py()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}},{key:"c_",value:function(e){var t={};t.database=cw(this.serializer),t.removeTarget=e,this.e_(t)}}]),n}(Eb),xb=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.l_=!1,u}return m(n,[{key:"h_",get:function(){return this.l_}},{key:"start",value:function(){this.l_=!1,this.lastStreamToken=void 0,or(k(n.prototype),"start",this).call(this)}},{key:"r_",value:function(){this.l_&&this.P_([])}},{key:"__",value:function(e,t){return this.connection.vo("Write",e,t)}},{key:"onMessage",value:function(e){if(vy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();var t=function(e,t){return e&&e.length>0?(vy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?nw(e.updateTime):nw(t);return n.isEqual(Oy.min())&&(n=nw(t)),new u_(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=nw(e.commitTime);return this.listener.I_(n,t)}return vy(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}},{key:"E_",value:function(){var e={};e.database=cw(this.serializer),this.e_(e)}},{key:"P_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return fw(t.serializer,e)}))};this.e_(n)}}]),n}(Eb),Cb=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.d_=!1,o}return m(n,[{key:"A_",value:function(){if(this.d_)throw new gy(yy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"wo",value:function(e,t,n){var r=this;return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],s=a[1];return r.connection.wo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===yy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gy(yy.UNKNOWN,e.toString())}))}},{key:"Co",value:function(e,t,n,r){var i=this;return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),s=o[0],u=o[1];return i.connection.Co(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===yy.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new gy(yy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.d_=!0}}]),n}(m((function e(){f(this,e)})));var Tb=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}return m(e,[{key:"g_",value:function(){var e=this;0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.m_=null,e.y_("Backend didn't respond within 10 seconds."),e.p_("Offline"),Promise.resolve()})))}},{key:"w_",value:function(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}},{key:"set",value:function(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}},{key:"p_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"y_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(hy(t),this.f_=!1):ly("OnlineStateTracker",t)}},{key:"S_",value:function(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}]),e}(),Ib=m((function e(t,n,r,i,a){var o=this;f(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=a,this.F_.ro((function(e){r.enqueueAndForget(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=jb(o),!e.t0){e.next=5;break}return ly("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=my(t)).C_.add(4),e.next=4,Ab(n);case 4:return n.M_.set("Unknown"),n.C_.delete(4),e.next=8,Nb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.M_=new Tb(r,i)}));function Nb(e){return Rb.apply(this,arguments)}function Rb(){return Rb=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jb(t)){e.next=18;break}n=x(t.v_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Rb.apply(this,arguments)}function Ab(e){return Pb.apply(this,arguments)}function Pb(){return Pb=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x(t.v_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Pb.apply(this,arguments)}function Ob(e,t){var n=my(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Fb(n)?Ub(n):pE(n).Ho()&&Lb(n,t))}function Db(e,t){var n=my(e),r=pE(n);n.D_.delete(t),r.Ho()&&Mb(n,t),0===n.D_.size&&(r.Ho()?r.Zo():jb(n)&&n.M_.set("Unknown"))}function Lb(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Oy.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pE(e).u_(t)}function Mb(e,t){e.x_.Oe(t),pE(e).c_(t)}function Ub(e){e.x_=new W_({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},_t:function(t){return e.D_.get(t)||null},nt:function(){return e.datastore.serializer.databaseId}}),pE(e).start(),e.M_.g_()}function Fb(e){return jb(e)&&!pE(e).jo()&&e.D_.size>0}function jb(e){return 0===my(e).C_.size}function Vb(e){e.x_=void 0}function zb(e){return Bb.apply(this,arguments)}function Bb(){return Bb=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.D_.forEach((function(e,n){Lb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function qb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vb(t),Fb(t)?(t.M_.w_(n),Ub(t)):t.M_.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}function Wb(e,t,n){return Kb.apply(this,arguments)}function Kb(){return Kb=Je($e().mark((function e(t,n,r){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.M_.set("Online"),!(n instanceof q_&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=x(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.D_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.D_.delete(o),t.x_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ly("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Gb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof z_?t.x_.$e(n):n instanceof B_?t.x_.Je(n):t.x_.Ge(n),r.isEqual(Oy.min())){e.next=29;break}return e.prev=14,e.next=17,tb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.x_.it(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.D_.get(t);if(r){e.D_.set(t,r.withResumeToken(dg.EMPTY_BYTE_STRING,r.snapshotVersion)),Mb(e,t);var i=new xw(r.target,t,n,r.sequenceNumber);Lb(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ly("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Gb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Kb.apply(this,arguments)}function Gb(e,t,n){return Qb.apply(this,arguments)}function Qb(){return Qb=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yy(n)){e.next=2;break}throw n;case 2:return t.C_.add(1),e.next=5,Ab(t);case 5:t.M_.set("Offline"),r||(r=function(){return tb(t.localStore)}),t.asyncQueue.enqueueRetryable(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ly("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.C_.delete(1),e.next=6,Nb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Yb(e,t){return t().catch((function(n){return Gb(e,n,t)}))}function $b(e){return Xb.apply(this,arguments)}function Xb(){return Xb=Je($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=my(t),r=vE(n),i=n.b_.length>0?n.b_[n.b_.length-1].batchId:-1;case 2:if(!Jb(n)){e.next=19;break}return e.prev=3,e.next=6,ib(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.b_.length&&r.Zo(),e.abrupt("break",19);case 10:i=a.batchId,Zb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Gb(n,e.t0);case 17:e.next=2;break;case 19:eE(n)&&tE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Xb.apply(this,arguments)}function Jb(e){return jb(e)&&e.b_.length<10}function Zb(e,t){e.b_.push(t);var n=vE(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function eE(e){return jb(e)&&!vE(e).jo()&&e.b_.length>0}function tE(e){vE(e).start()}function nE(e){return rE.apply(this,arguments)}function rE(){return rE=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vE(t).E_();case 1:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e){return aE.apply(this,arguments)}function aE(){return aE=Je($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vE(t),r=x(t.b_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.P_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e,t,n){return sE.apply(this,arguments)}function sE(){return sE=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.b_.shift(),a=T_.from(i,n,r),e.next=3,Yb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,$b(t);case 5:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function uE(e,t){return cE.apply(this,arguments)}function cE(){return cE=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&vE(t).h_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return R_(e)&&e!==yy.ABORTED}(n.code)){e.next=7;break}return r=t.b_.shift(),vE(t).Yo(),e.next=5,Yb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,$b(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:eE(t)&&tE(t);case 5:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}function lE(e,t){return hE.apply(this,arguments)}function hE(){return hE=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=my(t)).asyncQueue.verifyOperationInProgress(),ly("RemoteStore","RemoteStore received new credentials"),i=jb(r),r.C_.add(3),e.next=6,Ab(r);case 6:return i&&r.M_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.C_.delete(3),e.next=12,Nb(r);case 12:case"end":return e.stop()}}),e)}))),hE.apply(this,arguments)}function fE(e,t){return dE.apply(this,arguments)}function dE(){return dE=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=my(t),!n){e.next=7;break}return r.C_.delete(2),e.next=5,Nb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.C_.add(2),e.next=12,Ab(r);case 12:r.M_.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),dE.apply(this,arguments)}function pE(e){return e.O_||(e.O_=function(e,t,n){var r=my(e);return r.A_(),new Sb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:zb.bind(null,e),Io:qb.bind(null,e),a_:Wb.bind(null,e)}),e.v_.push(function(){var t=Je($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.O_.Yo(),Fb(e)?Ub(e):e.M_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.O_.stop();case 6:Vb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.O_}function vE(e){return e.N_||(e.N_=function(e,t,n){var r=my(e);return r.A_(),new xb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:nE.bind(null,e),Io:uE.bind(null,e),T_:iE.bind(null,e),I_:oE.bind(null,e)}),e.v_.push(function(){var t=Je($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.N_.Yo(),t.next=4,$b(e);case 4:t.next=9;break;case 6:return t.next=8,e.N_.stop();case 8:e.b_.length>0&&(ly("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}var mE=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ky,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gy(yy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function yE(e,t){if(hy("AsyncQueue","".concat(t,": ").concat(e)),Yy(e))return new gy(yy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var gE=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||Fy.comparator(e.key,n.key)}:function(e,t){return Fy.comparator(e.key,t.key)},this.keyedMap=Mk(),this.sortedSet=new og(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),kE=function(){function e(){f(this,e),this.B_=new og(Fy.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):py():this.B_=this.B_.insert(t,e)}},{key:"L_",value:function(){var e=[];return this.B_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),_E=function(){function e(t,n,r,i,a,o,s,u,c){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,gE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),wE=m((function e(){f(this,e),this.k_=void 0,this.listeners=[]})),bE=m((function e(){f(this,e),this.queries=new Pk((function(e){return Ck(e)}),xk),this.onlineState="Unknown",this.q_=new Set}));function EE(e,t){return SE.apply(this,arguments)}function SE(){return SE=Je($e().mark((function e(t,n){var r,i,a,o,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=my(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new wE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.k_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=yE(e.t0,"Initialization of query '".concat(Tk(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Q_(r.onlineState),o.k_&&n.K_(o.k_)&&NE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),SE.apply(this,arguments)}function xE(e,t){return CE.apply(this,arguments)}function CE(){return CE=Je($e().mark((function e(t,n){var r,i,a,o,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=my(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),CE.apply(this,arguments)}function TE(e,t){var n,r=my(e),i=!1,a=x(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=x(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.K_(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.k_=o}}}catch(h){a.e(h)}finally{a.f()}i&&NE(r)}function IE(e,t,n){var r=my(e),i=r.queries.get(t);if(i){var a,o=x(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function NE(e){e.q_.forEach((function(e){e.next()}))}var RE=function(){function e(t,n,r){f(this,e),this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"K_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=x(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new _E(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.W_?this.z_(e)&&(this.U_.next(e),a=!0):this.j_(e,this.onlineState)&&(this.H_(e),a=!0),this.G_=e,a}},{key:"onError",value:function(e){this.U_.error(e)}},{key:"Q_",value:function(e){this.onlineState=e;var t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}},{key:"j_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"z_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"H_",value:function(e){e=_E.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}]),e}();var AE=m((function e(t){f(this,e),this.key=t})),PE=m((function e(t){f(this,e),this.key=t})),OE=function(){function e(t,n){f(this,e),this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=qk(),this.mutatedKeys=qk(),this._a=Rk(t),this.aa=new gE(this._a)}return m(e,[{key:"ua",get:function(){return this.ia}},{key:"ca",value:function(e,t){var n=this,r=t?t.la:new kE,i=t?t.aa:this.aa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ik(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.ha(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n._a(h,u)>0||c&&n._a(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:s,mutatedKeys:a}}},{key:"ha",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;var o=e.la.L_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return py()}};return n(e)-n(t)}(e.type,t.type)||i._a(e.doc,t.doc)})),this.Pa(n),r=null!=r&&r;var s=t&&!r?this.Ia():[],u=0===this.oa.size&&this.current&&!r?1:0,c=u!==this.sa;return this.sa=u,0!==o.length||c?{snapshot:new _E(this.query,e.aa,a,o,e.mutatedKeys,0===u,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}},{key:"Q_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new kE,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}},{key:"Ea",value:function(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}},{key:"Pa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ia=t.ia.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ia=t.ia.delete(e)})),this.current=e.current)}},{key:"Ia",value:function(){var e=this;if(!this.current)return[];var t=this.oa;this.oa=qk(),this.aa.forEach((function(t){e.Ea(t.key)&&(e.oa=e.oa.add(t.key))}));var n=[];return t.forEach((function(t){e.oa.has(t)||n.push(new PE(t))})),this.oa.forEach((function(e){t.has(e)||n.push(new AE(e))})),n}},{key:"da",value:function(e){this.ia=e.ls,this.oa=qk();var t=this.ca(e.documents);return this.applyChanges(t,!0)}},{key:"Aa",value:function(){return _E.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}]),e}(),DE=m((function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r})),LE=m((function e(t){f(this,e),this.key=t,this.Ra=!1})),ME=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Pk((function(e){return Ck(e)}),xk),this.fa=new Map,this.ga=new Set,this.pa=new og(Fy.comparator),this.ya=new Map,this.wa=new Fw,this.Sa={},this.ba=new Map,this.Da=Pw.Nn(),this.onlineState="Unknown",this.Ca=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ca}}]),e}();function UE(e,t){return FE.apply(this,arguments)}function FE(){return FE=Je($e().mark((function e(t,n){var r,i,a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fS(t),!(o=r.ma.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Aa(),e.next=15;break;case 6:return e.next=8,ab(r.localStore,wk(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,jE(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Ob(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),FE.apply(this,arguments)}function jE(e,t,n,r,i){return VE.apply(this,arguments)}function VE(){return VE=Je($e().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.va=function(e,n,r){return function(){var e=Je($e().mark((function e(t,n,r,i){var a,o,s,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ca(r),e.t0=a.Zi,!e.t0){e.next=6;break}return e.next=5,ub(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ca(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=i&&null!=i.targetMismatches.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o,s),e.abrupt("return",(iS(t,n.targetId,u.Ta),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ub(t.localStore,n,!0);case 3:return o=e.sent,s=new OE(n,o.ls),u=s.ca(o.documents),c=V_.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),iS(t,r,l.Ta),h=new DE(n,r,s),e.abrupt("return",(t.ma.set(n,h),t.fa.has(r)?t.fa.get(r).push(n):t.fa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function zE(e,t){return BE.apply(this,arguments)}function BE(){return BE=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=my(t),i=r.ma.get(n),!((a=r.fa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.fa.set(i.targetId,a.filter((function(e){return!xk(e,n)}))),void r.ma.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ob(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Db(r.remoteStore,i.targetId),nS(r,i.targetId)})).catch(Ky);case 9:e.next=14;break;case 11:return nS(r,i.targetId),e.next=14,ob(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),BE.apply(this,arguments)}function qE(e,t,n){return HE.apply(this,arguments)}function HE(){return HE=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=my(e),a=Py.now(),o=t.reduce((function(e,t){return e.add(t.key)}),qk());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Dk(),u=qk();return i.ss.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=x(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=v_(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new g_(c.key,l,Vg(l.value.mapValue),c_.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Uk(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Sa[e.currentUser.toKey()];r||(r=new og(Ry)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,sS(i,a.changes);case 9:return e.next=11,$b(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=yE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),HE.apply(this,arguments)}function WE(e,t){return KE.apply(this,arguments)}function KE(){return KE=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=my(t),e.prev=1,e.next=4,nb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ya.get(t);n&&(vy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ra=!0:e.modifiedDocuments.size>0?vy(n.Ra):e.removedDocuments.size>0&&(vy(n.Ra),n.Ra=!1))})),e.next=8,sS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ky(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),KE.apply(this,arguments)}function GE(e,t,n){var r=my(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ma.forEach((function(e,n){var r=n.view.Q_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=my(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=x(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Q_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&NE(n)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function QE(e,t,n){return YE.apply(this,arguments)}function YE(){return YE=Je($e().mark((function e(t,n,r){var i,a,o,s,u,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=my(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ya.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new og(Fy.comparator)).insert(o,zg.newNoDocument(o,Oy.min())),u=qk().add(o),c=new j_(Oy.min(),new Map,new og(Ry),s,u),e.next=9,WE(i,c);case 9:i.pa=i.pa.remove(o),i.ya.delete(n),oS(i),e.next=16;break;case 14:return e.next=16,ob(i.localStore,n,!1).then((function(){return nS(i,n,r)})).catch(Ky);case 16:case"end":return e.stop()}}),e)}))),YE.apply(this,arguments)}function $E(e,t){return XE.apply(this,arguments)}function XE(){return XE=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=my(t),i=n.batch.batchId,e.prev=1,e.next=4,eb(r.localStore,n);case 4:return a=e.sent,tS(r,i,null),eS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,sS(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ky(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),XE.apply(this,arguments)}function JE(e,t,n){return ZE.apply(this,arguments)}function ZE(){return ZE=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=my(t),e.prev=1,e.next=4,function(e,t){var n=my(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return vy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,tS(i,n,r),eS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,sS(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ky(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ZE.apply(this,arguments)}function eS(e,t){(e.ba.get(t)||[]).forEach((function(e){e.resolve()})),e.ba.delete(t)}function tS(e,t,n){var r=my(e),i=r.Sa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function nS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=x(e.fa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ma.delete(a),n&&e.Va.Fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((function(t){e.wa.containsKey(t)||rS(e,t)}))}function rS(e,t){e.ga.delete(t.path.canonicalString());var n=e.pa.get(t);null!==n&&(Db(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),oS(e))}function iS(e,t,n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof AE?(e.wa.addReference(a.key,t),aS(e,a)):a instanceof PE?(ly("SyncEngine","Document no longer in limbo: "+a.key),e.wa.removeReference(a.key,t),e.wa.containsKey(a.key)||rS(e,a.key)):py()}}catch(o){i.e(o)}finally{i.f()}}function aS(e,t){var n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(ly("SyncEngine","New document in limbo: "+n),e.ga.add(r),oS(e))}function oS(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){var t=e.ga.values().next().value;e.ga.delete(t);var n=new Fy(Ly.fromString(t)),r=e.Da.next();e.ya.set(r,new LE(n)),e.pa=e.pa.insert(n,r),Ob(e.remoteStore,new xw(wk(yk(n.path)),r,"TargetPurposeLimboResolution",$y._e))}}function sS(e,t,n){return uS.apply(this,arguments)}function uS(){return uS=Je($e().mark((function e(t,n,r){var i,a,o,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=my(t),a=[],o=[],s=[],e.t0=i.ma.isEmpty(),e.t0){e.next=9;break}return i.ma.forEach((function(e,t){s.push(i.va(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Gw.Qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Va.a_(a),e.next=9,function(){var e=Je($e().mark((function e(t,n){var r,i,a,o,s,u,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=my(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Qy.forEach(n,(function(t){return Qy.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Qy.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Yy(e.t0)){e.next=10;break}throw e.t0;case 10:ly("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=x(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ts.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ts=r.ts.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function cS(e,t){return lS.apply(this,arguments)}function lS(){return lS=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=my(t)).currentUser.isEqual(n)){e.next=11;break}return ly("SyncEngine","User change. New user:",n.toKey()),e.next=5,Jw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ba.forEach((function(e){e.forEach((function(e){e.reject(new gy(yy.CANCELLED,t))}))})),e.ba.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,sS(r,i._s);case 11:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}function hS(e,t){var n=my(e),r=n.ya.get(t);if(r&&r.Ra)return qk().add(r.key);var i=qk(),a=n.fa.get(t);if(!a)return i;var o,s=x(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ma.get(u);i=i.unionWith(c.view.ua)}}catch(l){s.e(l)}finally{s.f()}return i}function fS(e){var t=my(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=QE.bind(null,t),t.Va.a_=TE.bind(null,t.eventManager),t.Va.Fa=IE.bind(null,t.eventManager),t}function dS(e){var t=my(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$E.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=JE.bind(null,t),t}var pS=function(){function e(){f(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=wb(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Xw(this.persistence,new Yw,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Hw(Kw.jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new hb}},{key:"terminate",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vS=function(){function e(){f(this,e)}return m(e,[{key:"initialize",value:function(){var e=Je($e().mark((function e(t,n){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return GE(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cS.bind(null,this.syncEngine),e.next=12,fE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new bE}},{key:"createDatastore",value:function(e){var t=wb(e.databaseInfo.databaseId),n=function(e){return new kb(e)}(e.databaseInfo);return function(e,t,n,r){return new Cb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Ib(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return GE(t.syncEngine,e,0)}),db.D()?new db:new fb)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new ME(e,t,n,r,i,a);return o&&(s.Ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=my(t),ly("RemoteStore","RemoteStore shutting down."),n.C_.add(5),e.next=5,Ab(n);case 5:n.F_.shutdown(),n.M_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var mS=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Oa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Oa(this.observer.error,e):hy("Uncaught Error in snapshot listener:",e.toString())}},{key:"Na",value:function(){this.muted=!0}},{key:"Oa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),yS=function(){function e(t,n,r,i){var a=this;f(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=oy.UNAUTHENTICATED,this.clientId=Ny.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ly("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ly("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new gy(yy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ky;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Je($e().mark((function n(){var r;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=yE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function gS(e,t){return kS.apply(this,arguments)}function kS(){return kS=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ly("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Jw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}function _S(e,t){return wS.apply(this,arguments)}function wS(){return wS=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ES(t);case 3:return r=e.sent,ly("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return lE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return lE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function bS(e){return"FirebaseError"===e.name?e.code===yy.FAILED_PRECONDITION||e.code===yy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function ES(e){return SS.apply(this,arguments)}function SS(){return SS=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return ly("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,gS(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),bS(n=e.t0)){e.next=13;break}throw n;case 13:return fy("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,gS(t,new pS);case 16:e.next=21;break;case 18:return ly("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,gS(t,new pS);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),SS.apply(this,arguments)}function xS(e){return CS.apply(this,arguments)}function CS(){return CS=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return ly("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,_S(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return ly("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,_S(t,new vS);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}function TS(e){return xS(e).then((function(e){return e.syncEngine}))}function IS(e){return NS.apply(this,arguments)}function NS(){return NS=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xS(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=UE.bind(null,n.syncEngine),r.onUnlisten=zE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function RS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ky;return e.asyncQueue.enqueueAndForget(Je($e().mark((function i(){return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new mS({next:function(a){t.enqueueAndForget((function(){return xE(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new gy(yy.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new gy(yy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new RE(yk(n.path),a,{includeMetadataChanges:!0,J_:!0});return EE(e,o)},i.next=3,IS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function AS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ky;return e.asyncQueue.enqueueAndForget(Je($e().mark((function i(){return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new mS({next:function(n){t.enqueueAndForget((function(){return xE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new gy(yy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new RE(n,a,{includeMetadataChanges:!0,J_:!0});return EE(e,o)},i.next=3,IS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function PS(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var OS=new Map;function DS(e,t,n){if(!n)throw new gy(yy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function LS(e){if(!Fy.isDocumentKey(e))throw new gy(yy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function MS(e){if(Fy.isDocumentKey(e))throw new gy(yy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function US(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":py()}function FS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gy(yy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=US(e);throw new gy(yy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var jS=function(){function e(t){var n,r;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new gy(yy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gy(yy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new gy(yy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PS(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new gy(yy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new gy(yy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new gy(yy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),VS=function(){function e(t,n,r,i){f(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jS({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new gy(yy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new gy(yy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wy;switch(e.type){case"firstParty":return new xy(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new gy(yy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=OS.get(e);t&&(ly("ComponentProvider","Removing Datastore"),OS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function zS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=FS(e,VS))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&fy("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=oy.MOCK_USER;else{s=gt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new gy(yy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new oy(c)}e._authCredentials=new by(new _y(s,u))}}var BS=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),qS=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new HS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),HS=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,yk(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new qS(this.firestore,null,new Fy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(BS);function WS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ht(e),DS("collection","path",t),e instanceof VS){var a=Ly.fromString.apply(Ly,[t].concat(r));return MS(a),new HS(e,null,a)}if(!(e instanceof qS||e instanceof HS))throw new gy(yy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ly.fromString.apply(Ly,[t].concat(r)));return MS(o),new HS(e.firestore,null,o)}function KS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ht(e),1===arguments.length&&(t=Ny.newId()),DS("doc","path",t),e instanceof VS){var a=Ly.fromString.apply(Ly,[t].concat(r));return LS(a),new qS(e,null,new Fy(a))}if(!(e instanceof qS||e instanceof HS))throw new gy(yy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ly.fromString.apply(Ly,[t].concat(r)));return LS(o),new qS(e.firestore,e instanceof HS?e.converter:null,new Fy(o))}var GS=function(){function e(){var t=this;f(this,e),this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new bb(this,"async_queue_retry"),this.iu=function(){var e=_b();e&&ly("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zo.Qo()};var n=_b();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.iu)}return m(e,[{key:"isShuttingDown",get:function(){return this.Za}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.su(),this.ou(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Za){this.Za=!0,this.nu=e||!1;var t=_b();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}},{key:"enqueue",value:function(e){var t=this;if(this.su(),this.Za)return new Promise((function(){}));var n=new ky;return this.ou((function(){return t.Za&&t.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ya.push(e),t._u()}))}},{key:"_u",value:function(){var e=Je($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ya.length){e.next=14;break}return e.prev=1,e.next=4,this.Ya[0]();case 4:this.Ya.shift(),this.zo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Yy(e.t0)){e.next=12;break}throw e.t0;case 12:ly("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ya.length>0&&this.zo.ko((function(){return t._u()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ou",value:function(e){var t=this,n=this.Ja.then((function(){return t.tu=!0,e().catch((function(e){t.eu=e,t.tu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.tu=!1,e}))}));return this.Ja=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.su(),this.ru.indexOf(e)>-1&&(t=0);var i=mE.createAndSchedule(this,e,t,n,(function(e){return r.au(e)}));return this.Xa.push(i),i}},{key:"su",value:function(){this.eu&&py()}},{key:"verifyOperationInProgress",value:function(){}},{key:"uu",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ja,e.next=3,t;case 3:if(t!==this.Ja){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cu",value:function(e){var t,n=x(this.Xa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"lu",value:function(e){var t=this;return this.uu().then((function(){t.Xa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=x(t.Xa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.uu()}))}},{key:"hu",value:function(e){this.ru.push(e)}},{key:"au",value:function(e){var t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}]),e}();function QS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=x(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var YS=function(e){g(n,e);var t=b(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new GS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||XS(this),this._firestoreClient.terminate()}}]),n}(VS);function $S(e){return e._firestoreClient||XS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function XS(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new wg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,PS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new yS(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var JS=function(){function e(t){f(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(dg.fromBase64String(t))}catch(t){throw new gy(yy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(dg.fromUint8Array(t))}}]),e}(),ZS=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new gy(yy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Uy(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ex=m((function e(t){f(this,e),this._methodName=t})),tx=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new gy(yy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new gy(yy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ry(this._lat,e._lat)||Ry(this._long,e._long)}}]),e}(),nx=/^__.*__$/,rx=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new g_(e,this.data,this.fieldMask,t,this.fieldTransforms):new y_(e,this.data,t,this.fieldTransforms)}}]),e}(),ix=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new g_(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ax(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw py()}}var ox=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Pu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"Iu",get:function(){return this.settings.Iu}},{key:"Tu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Eu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}},{key:"Ru",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}},{key:"Vu",value:function(e){return this.Tu({path:void 0,du:!0})}},{key:"mu",value:function(e){return Sx(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Pu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Au(this.path.get(e))}},{key:"Au",value:function(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(ax(this.Iu)&&nx.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}]),e}(),sx=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||wb(t)}return m(e,[{key:"pu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ox({Iu:e,methodName:t,gu:n,path:Uy.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function ux(e){var t=e._freezeSettings(),n=wb(e._databaseId);return new sx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cx(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.pu(a.merge||a.mergeFields?2:0,t,n,i);_x("Data must be an object, but it was:",o,r);var s,u,c=gx(r,o);if(a.merge)s=new hg(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=x(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=wx(t,l.value,n);if(!o.contains(d))throw new gy(yy.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));xx(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}s=new hg(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new rx(new jg(c),s,u)}var lx=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ex);function hx(e,t,n){return new ox({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var fx=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new s_(e.path,new Zk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ex),dx=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).yu=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=hx(this,e,!0),n=this.yu.map((function(e){return yx(e,t)})),r=new e_(n);return new s_(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ex);function px(e,t,n,r){var i=e.pu(1,t,n);_x("Data must be an object, but it was:",i,r);var a=[],o=jg.empty();ig(r,(function(e,r){var s=Ex(t,e,n);r=Ht(r);var u=i.Ru(s);if(r instanceof lx)a.push(s);else{var c=yx(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new hg(a);return new ix(o,s,i.fieldTransforms)}function vx(e,t,n,r,i,a){var o=e.pu(1,t,n),s=[wx(t,r,n)],u=[i];if(a.length%2!=0)throw new gy(yy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(wx(t,a[c])),u.push(a[c+1]);for(var l=[],h=jg.empty(),f=s.length-1;f>=0;--f)if(!xx(l,s[f])){var d=s[f],p=u[f];p=Ht(p);var v=o.Ru(d);if(p instanceof lx)l.push(d);else{var m=yx(p,v);null!=m&&(l.push(d),h.set(d,m))}}var y=new hg(l);return new ix(h,y,o.fieldTransforms)}function mx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return yx(n,e.pu(r?4:3,t))}function yx(e,t){if(kx(e=Ht(e)))return _x("Unsupported field value:",t,e),gx(e,t);if(e instanceof ex)return function(e,t){if(!ax(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=x(e);try{for(a.s();!(n=a.n()).done;){var o=yx(n.value,t.Vu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ht(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qk(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Py.fromDate(e);return{timestampValue:Z_(t.serializer,n)}}if(e instanceof Py){var r=new Py(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Z_(t.serializer,r)}}if(e instanceof tx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof JS)return{bytesValue:ew(t.serializer,e._byteString)};if(e instanceof qS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.mu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:rw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(US(e)))}(e,t)}function gx(e,t){var n={};return ag(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ig(e,(function(e,r){var i=yx(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function kx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Py||e instanceof tx||e instanceof JS||e instanceof qS||e instanceof ex)}function _x(e,t,n){if(!kx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=US(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function wx(e,t,n){if((t=Ht(t))instanceof ZS)return t._internalPath;if("string"==typeof t)return Ex(e,t);throw Sx("Field path arguments must be of type string or ",e,!1,void 0,n)}var bx=new RegExp("[~\\*/\\[\\]]");function Ex(e,t,n){if(t.search(bx)>=0)throw Sx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(ZS,h(t.split(".")))._internalPath}catch(Jf){throw Sx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sx(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new gy(yy.INVALID_ARGUMENT,s+e+u)}function xx(e,t){return e.some((function(e){return e.isEqual(t)}))}var Cx=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new qS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Tx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Ix("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Tx=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return or(k(n.prototype),"data",this).call(this)}}]),n}(Cx);function Ix(e,t){return"string"==typeof t?Ex(e,t):t instanceof ZS?t._internalPath:t._delegate._internalPath}function Nx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new gy(yy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rx=m((function e(){f(this,e)})),Ax=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n)}(Rx);function Px(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Rx&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Dx})).length,n=e.filter((function(e){return e instanceof Ox})).length;if(t>1||t>0&&n>0)throw new gy(yy.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=x(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var Ox=function(e){g(n,e);var t=b(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return jx(e._query,t),new BS(e.firestore,e.converter,Ek(e._query,t))}},{key:"_parse",value:function(e){var t=ux(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new gy(yy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Fx(o,a);var u,c=[],l=x(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(Ux(r,e,h))}}catch(f){l.e(f)}finally{l.f()}s={arrayValue:{values:c}}}else s=Ux(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Fx(o,a),s=mx(n,t,o,"in"===a||"not-in"===a);return Qg.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ax);var Dx=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Yg.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=x(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;jx(r,a),r=Ek(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new BS(e.firestore,e.converter,Ek(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Rx);var Lx=function(e){g(n,e);var t=b(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new gy(yy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gy(yy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wg(t,n)}(e._query,this._field,this._direction);return new BS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new vk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ax);function Mx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ix("orderBy",e);return Lx._create(n,t)}function Ux(e,t,n){if("string"==typeof(n=Ht(n))){if(""===n)throw new gy(yy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kk(t)&&-1!==n.indexOf("/"))throw new gy(yy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ly.fromString(n));if(!Fy.isDocumentKey(r))throw new gy(yy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ag(e,new Fy(r))}if(n instanceof qS)return Ag(e,n._key);throw new gy(yy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(US(n),"."))}function Fx(e,t){if(!Array.isArray(e)||0===e.length)throw new gy(yy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function jx(e,t){var n=function(e,t){var n,r=x(e);try{for(r.s();!(n=r.n()).done;){var i,a=x(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new gy(yy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new gy(yy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var Vx=function(){function e(){f(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Sg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw py()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return ig(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new tx(mg(e.latitude),mg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=kg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_g(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=vg(e);return new Py(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ly.fromString(e);vy(Sw(n));var r=new bg(n.get(1),n.get(3)),i=new Fy(n.popFirst(5));return r.isEqual(t)||hy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function zx(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Bx=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),qx=function(e){g(n,e);var t=b(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return m(n,[{key:"exists",value:function(){return or(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Hx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Ix("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Cx),Hx=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return or(k(n.prototype),"data",this).call(this,e)}}]),n}(qx),Wx=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bx(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Hx(n._firestore,n._userDataWriter,r.key,r,new Bx(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new gy(yy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Hx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Hx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Kx(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Kx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return py()}}function Gx(e){e=FS(e,qS);var t=FS(e.firestore,YS);return RS($S(t),e._key).then((function(n){return nC(t,e,n)}))}var Qx=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new JS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qS(this.firestore,null,t)}}]),n}(Vx);function Yx(e){e=FS(e,BS);var t=FS(e.firestore,YS),n=$S(t),r=new Qx(t);return Nx(e._query),AS(n,e._query).then((function(n){return new Wx(t,r,e,n)}))}function $x(e,t,n){e=FS(e,qS);var r=FS(e.firestore,YS),i=zx(e.converter,t,n);return tC(r,[cx(ux(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,c_.none())])}function Xx(e,t,n){e=FS(e,qS);for(var r=FS(e.firestore,YS),i=ux(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return tC(r,[("string"==typeof(t=Ht(t))||t instanceof ZS?vx(i,"updateDoc",e._key,t,n,o):px(i,"updateDoc",e._key,t)).toMutation(e._key,c_.exists(!0))])}function Jx(e){return tC(FS(e.firestore,YS),[new S_(e._key,c_.none())])}function Zx(e,t){var n=FS(e.firestore,YS),r=KS(e),i=zx(e.converter,t);return tC(n,[cx(ux(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,c_.exists(!1))]).then((function(){return r}))}function eC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ht(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||QS(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(QS(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof qS)l=FS(e.firestore,YS),h=yk(e._key.path),c={next:function(t){n[u]&&n[u](nC(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=FS(e,BS);l=FS(p.firestore,YS),h=p._query;var v=new Qx(l);c={next:function(e){n[u]&&n[u](new Wx(l,v,p,e))},error:n[u+1],complete:n[u+2]},Nx(e._query)}return function(e,t,n,r){var i=new mS(r),a=new RE(t,i,n);return e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=EE,t.next=3,IS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Na(),e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xE,t.next=3,IS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($S(l),h,f,c)}function tC(e,t){return function(e,t){var n=new ky;return e.asyncQueue.enqueueAndForget(Je($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=qE,r.next=3,TS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}($S(e),t)}function nC(e,t,n){var r=n.docs.get(t._key),i=new Qx(e);return new qx(e,i,t._key,r,new Bx(n.hasPendingWrites,n.fromCache),t.converter)}function rC(){return new fx("serverTimestamp")}function iC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dx("arrayUnion",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){sy=e}(jn),Dn(new Wt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new YS(new Ey(e.getProvider("auth-internal")),new Ty(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gy(yy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Bn(ay,"4.4.0",e),Bn(ay,"4.4.0","esm2017")}();var aC,oC="firebasestorage.googleapis.com",sC="storageBucket",uC=function(e){g(n,e);var t=b(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,n),(i=t.call(this,cC(e),"Firebase Storage: ".concat(r," (").concat(cC(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(w(i),n.prototype),i}return m(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return cC(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(St);function cC(e){return"storage/"+e}function lC(){return new uC(aC.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function hC(){return new uC(aC.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fC(){return new uC(aC.CANCELED,"User canceled the upload/download.")}function dC(){return new uC(aC.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pC(e){return new uC(aC.INVALID_ARGUMENT,e)}function vC(){return new uC(aC.APP_DELETED,"The Firebase app was deleted.")}function mC(e,t){return new uC(aC.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function yC(e){throw new uC(aC.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(aC||(aC={}));var gC,kC=function(){function e(t,n){f(this,e),this.bucket=t,this.path_=n}return m(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(fI){return new e(t,"")}if(""===r.path)return r;throw i=t,new uC(aC.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===oC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new uC(aC.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),_C=function(){function e(t){f(this,e),this.promise_=Promise.reject(t)}return m(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function wC(e){return"string"===typeof e||e instanceof String}function bC(e){return EC()&&e instanceof Blob}function EC(){return"undefined"!==typeof Blob}function SC(e,t,n,r){if(r<t)throw pC("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw pC("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function xC(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function CC(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function TC(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(gC||(gC={}));var IC=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var d=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];f(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return m(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(fI){i(fI)}else if(null!==a){var s=lC();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?vC():fC());else i(hC())}};this.canceled_?t(0,new NC(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new NC(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===gC.NO_ERROR,a=r.getStatus();if(!n||TC(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===gC.ABORT;t(!1,new NC(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new NC(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),NC=m((function e(t,n,r){f(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function RC(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function AC(){for(var e=RC(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(EC())return new Blob(n);throw new uC(aC.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function PC(e){if("undefined"===typeof atob)throw t="base-64",new uC(aC.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var OC={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},DC=m((function e(t,n){f(this,e),this.data=t,this.contentType=n||null}));function LC(e,t){switch(e){case OC.RAW:return new DC(MC(t));case OC.BASE64:case OC.BASE64URL:return new DC(UC(e,t));case OC.DATA_URL:return new DC(function(e){var t=new FC(e);return t.base64?UC(OC.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(fI){throw mC(OC.DATA_URL,"Malformed data URL.")}return MC(t)}(t.rest)}(t),new FC(t).contentType)}throw lC()}function MC(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function UC(e,t){switch(e){case OC.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw mC(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case OC.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw mC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=PC(t)}catch(fI){if(fI.message.includes("polyfill"))throw fI;throw mC(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var FC=m((function e(t){f(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw mC(OC.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var jC=function(){function e(t,n){f(this,e);var r=0,i="";bC(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return m(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(bC(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(EC()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(AC.apply(null,i))}var a=n.map((function(e){return wC(e)?LC(OC.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function VC(e){var t;try{t=JSON.parse(e)}catch(fI){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function zC(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function BC(e,t){return t}var qC=m((function e(t,n,r,i){f(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||BC})),HC=null;function WC(){if(HC)return HC;var e=[];e.push(new qC("bucket")),e.push(new qC("generation")),e.push(new qC("metageneration")),e.push(new qC("name","fullPath",!0));var t=new qC("name");t.xform=function(e,t){return function(e){return!wC(e)||e.length<2?e:zC(e)}(t)},e.push(t);var n=new qC("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new qC("timeCreated")),e.push(new qC("updated")),e.push(new qC("md5Hash",null,!0)),e.push(new qC("cacheControl",null,!0)),e.push(new qC("contentDisposition",null,!0)),e.push(new qC("contentEncoding",null,!0)),e.push(new qC("contentLanguage",null,!0)),e.push(new qC("contentType",null,!0)),e.push(new qC("metadata","customMetadata",!0)),HC=e}function KC(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new kC(n,r);return t._makeStorageReference(i)}})}(r,e),r}function GC(e,t,n){var r=VC(t);return null===r?null:KC(e,r,n)}function QC(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var YC=m((function e(t,n,r,i){f(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function $C(e){if(!e)throw lC()}function XC(e,t){return function(n,r){var i=GC(e,r,t);return $C(null!==i),i}}function JC(e,t){return function(n,r){var i=GC(e,r,t);return $C(null!==i),function(e,t,n,r){var i=VC(t);if(null===i)return null;if(!wC(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return xC("/b/"+o(i)+"/o/"+o(a),n,r)+CC({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ZC(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new uC(aC.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new uC(aC.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new uC(aC.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new uC(aC.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function eT(e){var t=ZC(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new uC(aC.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function tT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function nT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=tT(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+QC(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=jC.getBlob(c,r,l);if(null===h)throw dC();var f={name:u.fullPath},d=xC(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new YC(d,"POST",XC(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=ZC(t),v}var rT=null,iT=function(){function e(){var t=this;f(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gC.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=gC.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=gC.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return m(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw yC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw yC("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw yC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(fI){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw yC("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw yC("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),aT=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(iT);function oT(){return rT?rT():new aT}var sT=function(){function e(t,n){f(this,e),this._service=t,this._location=n instanceof kC?n:kC.makeFromUrl(n,t.host)}return m(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new kC(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return zC(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new kC(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new uC(aC.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function uT(e,t,n){e._throwIfRoot("uploadBytes");var r=nT(e.storage,e._location,WC(),new jC(t,!0),n);return e.storage.makeRequestWithTokens(r,oT).then((function(t){return{metadata:t,ref:e}}))}function cT(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=xC(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new YC(r,"GET",JC(e,n),i);return a.errorHandler=eT(t),a}(e.storage,e._location,WC());return e.storage.makeRequestWithTokens(t,oT).then((function(e){if(null===e)throw new uC(aC.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function lT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new kC(e._location.bucket,n);return new sT(e.storage,r)}function hT(e,t){if(e instanceof pT){var n=e;if(null==n._bucket)throw new uC(aC.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sC+"' property when initializing the app?");var r=new sT(n,n._bucket);return null!=t?hT(r,t):r}return void 0!==t?lT(e,t):e}function fT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof pT)return new sT(e,t);throw pC("To use ref(service, url), the first argument must be a Storage instance.")}return hT(e,t)}function dT(e,t){var n=null===t||void 0===t?void 0:t[sC];return null==n?null:kC.makeFromBucketSpec(n,e)}var pT=function(){function e(t,n,r,i,a){f(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=oC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?kC.makeFromBucketSpec(i,this._host):dT(this._host,this.app.options)}return m(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=kC.makeFromBucketSpec(this._url,e):this._bucket=dT(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){SC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){SC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new sT(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new _C(vC());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=CC(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new IC(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),vT="@firebase/storage",mT="0.12.0",yT="storage";function gT(e,t,n){return uT(e=Ht(e),t,n)}function kT(e){return cT(e=Ht(e))}function _T(e,t){return fT(e=Ht(e),t)}function wT(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:gt(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function bT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new pT(r,i,a,n,jn)}Dn(new Wt(yT,bT,"PUBLIC").setMultipleInstances(!0)),Bn(vT,mT,""),Bn(vT,mT,"esm2017");var ET=Vn({apiKey:"AIzaSyBoH33rnBPBF5BplbN2RXVF5I3O5-aS49k",authDomain:"fir-chatapp-82a43.firebaseapp.com",projectId:"fir-chatapp-82a43",storageBucket:"fir-chatapp-82a43.appspot.com",messagingSenderId:"127437389220",appId:"1:127437389220:web:4de09ea8c8b238e083d531"}),ST=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn(),t=Ln(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=Ln(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Dt(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;vr(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ds,persistence:[So,$a,Ja]}),r=mt("authTokenSyncURL");if(r){var i=Gs(r);!function(e,t,n){Ht(e).beforeAuthStateChanged(t,n)}(n,i,(function(){return i(n.currentUser)})),function(e,t,n,r){Ht(e).onIdTokenChanged(t,n,r)}(n,(function(e){return i(e)}))}var a=dt("auth");return a&&Yi(n,"http://".concat(a)),n}(ET),xT=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn(),t=arguments.length>1?arguments[1]:void 0,n=Ln(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=pt("database");r&&Ff.apply(void 0,[n].concat(h(r)))}}(ET),function(e,t){var n="string"==typeof e?e:t||"(default)",r=Ln("object"==typeof e?e:zn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=pt("firestore");i&&zS.apply(void 0,[r].concat(h(i)))}return r}(ET)),CT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn(),t=arguments.length>1?arguments[1]:void 0,n=Ln(e=Ht(e),yT).getImmediate({identifier:t}),r=pt("storage");return r&&wT.apply(void 0,[n].concat(h(r))),n}(ET);function TT(e,t){return e.matches[t]=!1,e.mediaQueries[t]={},e}function IT(e){var t=Object.keys(e);return"undefined"===typeof window?t.reduce(TT,{mediaQueries:{},matches:{}}):t.reduce((function(t,n){var r=window.matchMedia(e[n]);return t.mediaQueries[n]=r,t.matches[n]=r.matches,t}),{mediaQueries:{},matches:{}})}function NT(e,t){switch(t.type){case"updateMatches":return{matches:Object.keys(e.mediaQueries).reduce((function(t,n){return t[n]=e.mediaQueries[n].matches,t}),{}),mediaQueries:e.mediaQueries};case"setQueries":return IT(t.queries)}}function RT(e){var n=t.useRef(e),r=c(t.useReducer(NT,e,IT),2),i=r[0],a=r[1];function o(){return a({type:"updateMatches"})}function s(e){var t=o;return"undefined"!==typeof e.addListener?e.addListener(t):e.addEventListener("change",t),t}t.useEffect((function(){(function(e,t){if(t===e)return!1;var n=Object.values(t),r=Object.values(e);if(n.length!==r.length)return!0;if(n.some((function(e,t){return e!==r[t]})))return!0;var i=Object.keys(e);return Object.keys(t).some((function(e,t){return e!==i[t]}))})(e,n.current)&&(a({type:"setQueries",queries:e}),n.current=e)}),[e]),t.useEffect((function(){var e=Object.values(i.mediaQueries),t=e.map(s);function n(e,n){"undefined"!==typeof e.addListener?e.removeListener(t[n]):e.removeEventListener("change",t[n])}return function(){e.forEach(n)}}),[i.mediaQueries]);var u=i.matches,l=t.useMemo((function(){return Object.values(u)}),[u]);return{matches:u,matchesAny:l.some(Boolean),matchesAll:l.length>0&&l.every(Boolean)}}function AT(e){return RT(function(e){void 0===PT[e]&&(PT[e]={default:e});return PT[e]}(e)).matchesAll}var PT={};var OT=(0,t.createContext)(),DT=n(184),LT=function(e){var n=e.children,r=c((0,t.useState)([]),2),i=r[0],a=r[1],o=c((0,t.useState)([]),2),s=o[0],u=o[1],l=WS(xT,"allUsers"),h=WS(xT,"messages"),f=function(){var e=Je($e().mark((function e(){var t,n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yx(l);case 3:return t=e.sent,e.next=6,Yx(h);case 6:n=e.sent,r=t.docs.map((function(e){return an(an({},e.data()),{},{id:e.id})})),i=n.docs.map((function(e){return an(an({},e.data()),{},{id:e.id})})),a(r),u(i),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yx(h);case 3:t=e.sent,n=t.docs.map((function(e){return an(an({},e.data()),{},{id:e.id})})),u(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),p=(0,t.useReducer)((function(e,t){var n=ST.currentUser.uid;switch(t.type){case"darkNlight":return an(an({},e),{},{mode:t.payload});case"chatId":return an(an({},e),{},{chatId:n>t.payload?n+t.payload:t.payload+n,searchId:"",userId:t.payload,groupId:""});case"searchId":return an(an({},e),{},{searchId:n>t.payload?n+t.payload:t.payload+n,chatId:"",userId:t.payload,groupId:""});case"bool":return an(an({},e),{},{bool:t.payload});case"groupId":return an(an({},e),{},{searchId:"",chatId:"",userId:"",groupId:t.payload});case"isBacked":return an(an({},e),{},{isBacked:t.payload});default:return e}}),{mode:null,chatId:"",searchId:"",userId:"",groupId:"",bool:null,isBacked:!0}),v=c(p,2),m=v[0],y=v[1];return(0,t.useEffect)((function(){f()}),[m.chatId,m.searchId]),(0,t.useEffect)((function(){d()}),[m.chatId,m.bool]),(0,DT.jsx)(OT.Provider,{value:{allUserData:i,messageData:s,state:m,dispatch:y},children:n})},MT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},UT=t.createContext&&t.createContext(MT),FT=["attr","size","title"];function jT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VT(){return VT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VT.apply(this,arguments)}function zT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zT(Object(n),!0).forEach((function(t){qT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HT(e){return e&&e.map((function(e,n){return t.createElement(e.tag,BT({key:n},e.attr),HT(e.child))}))}function WT(e){return function(n){return t.createElement(KT,VT({attr:BT({},e.attr)},n),HT(e.child))}}function KT(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=jT(e,FT),u=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",VT({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:BT(BT({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==UT?t.createElement(UT.Consumer,null,(function(e){return n(e)})):n(MT)}function GT(e){return WT({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M312 372c-7.7 0-14 6.3-14 14 0 9.9-8.1 18-18 18H94c-9.9 0-18-8.1-18-18V126c0-9.9 8.1-18 18-18h186c9.9 0 18 8.1 18 18 0 7.7 6.3 14 14 14s14-6.3 14-14c0-25.4-20.6-46-46-46H94c-25.4 0-46 20.6-46 46v260c0 25.4 20.6 46 46 46h186c25.4 0 46-20.6 46-46 0-7.7-6.3-14-14-14z"},child:[]},{tag:"path",attr:{d:"M372.9 158.1c-2.6-2.6-6.1-4.1-9.9-4.1-3.7 0-7.3 1.4-9.9 4.1-5.5 5.5-5.5 14.3 0 19.8l65.2 64.2H162c-7.7 0-14 6.3-14 14s6.3 14 14 14h256.6L355 334.2c-5.4 5.4-5.4 14.3 0 19.8l.1.1c2.7 2.5 6.2 3.9 9.8 3.9 3.8 0 7.3-1.4 9.9-4.1l82.6-82.4c4.3-4.3 6.5-9.3 6.5-14.7 0-5.3-2.3-10.3-6.5-14.5l-84.5-84.2z"},child:[]}]})(e)}function QT(e){return WT({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M435.9 64.9l-367.1 160c-6.5 3.1-6.3 12.4.3 15.3l99.3 56.1c5.9 3.3 13.2 2.6 18.3-1.8l195.8-168.8c1.3-1.1 4.4-3.2 5.6-2 1.3 1.3-.7 4.3-1.8 5.6L216.9 320.1c-4.7 5.3-5.4 13.1-1.6 19.1l64.9 104.1c3.2 6.3 12.3 6.2 15.2-.2L447.2 76c3.3-7.2-4.2-14.5-11.3-11.1z"},child:[]}]})(e)}function YT(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function $T(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"},child:[]}]})(e)}function XT(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(e)}function JT(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function ZT(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"},child:[]}]})(e)}function eI(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m9 13 3-4 3 4.5V12h4V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h8v-4H5l3-4 1 2z"},child:[]},{tag:"path",attr:{d:"M19 14h-2v3h-3v2h3v3h2v-3h3v-2h-3z"},child:[]}]})(e)}var tI=function(){var e=(0,t.useContext)(OT),n=e.allUserData,r=e.state,i=e.dispatch,a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)([]),2),l=u[0],h=u[1],f=c((0,t.useState)([]),2),d=f[0],p=f[1],v=c((0,t.useState)(""),2),m=v[0],y=v[1],g=c((0,t.useState)(null),2),k=g[0],_=g[1],w=c((0,t.useState)(null),2),b=w[0],E=w[1],S=c((0,t.useState)(!1),2),x=S[0],C=S[1],T=r.chatId?r.chatId:r.searchId,I=r.groupId?r.groupId:null,N=ST.currentUser.uid,R=(0,t.useRef)(null),A=WS(xT,"groups"),P=n.find((function(e){return e.user_id===ST.currentUser.uid})),O=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)},D=new Date,L=D.getDate(),M=["January","February","March","April","May","June","July","August","September","October","November","December"][D.getMonth()],U="".concat(L," ").concat(M),F=D.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),j="".concat(U," ").concat(F),V=function(){var e=Je($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=10;break}if(h(""),t=WS(xT,"groups/".concat(I,"/group_chats")),eC(Px(t,Mx("messageAt")),(function(e){var t=[];e.forEach((function(e){t.push(an(an({},e.data()),{},{id:e.id}))})),p(t)})),""!=o||!I){e.next=8;break}return e.next=8,Xx(KS(A,I),{last_sentId:N});case 8:O();case 10:if(T){e.next=13;break}return console.error("combineId is empty or null"),e.abrupt("return");case 13:if(e.prev=13,n=WS(xT,"messages"),r=WS(xT,"messages/".concat(T,"/chats")),eC(Px(r,Mx("messageAt")),(function(e){var t=[];e.forEach((function(e){t.push(an(an({},e.data()),{},{id:e.id}))})),h(t)})),""!=o||!T){e.next=21;break}return e.next=21,Xx(KS(n,T),{unread:!1});case 21:O(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[13,25]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Je($e().mark((function e(){var t,n,r,a,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=29;break}if(t=WS(xT,"groups/".concat(I,"/group_chats")),!b){e.next=16;break}return h(""),_(!0),O(),n=_T(CT,"/chat_pics/messages/".concat(b.name)),e.next=9,gT(n,b).then(function(){var e=Je($e().mark((function e(n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kT(n.ref).then(function(){var e=Je($e().mark((function e(n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!1),e.next=3,Zx(t,{username:P.originalUsername,profilePic:P.photoUrl,user_message:o,pic:n,createdAt:j,senderID:N,messageAt:rC()});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:return e.next=11,Xx(KS(A,I),{lastMessage:o,last_sentId:N});case 11:C(!x),i({type:"bool",payload:x}),E(null),V(),s("");case 16:if(""!=o){e.next=19;break}return e.abrupt("return");case 19:if(!o||b){e.next=28;break}return e.next=22,Zx(t,{username:P.originalUsername,profilePic:P.photoUrl,user_message:o,pic:null,createdAt:j,senderID:N,messageAt:rC()});case 22:return e.next=24,Xx(KS(A,I),{lastMessage:o,last_sentId:N});case 24:C(!x),i({type:"bool",payload:x}),V(),s("");case 28:case 29:if(!T){e.next=58;break}if(r=WS(xT,"messages/".concat(T,"/chats")),a=WS(xT,"messages"),!b){e.next=45;break}return _(!0),O(),u=_T(CT,"/chat_pics/messages/".concat(b.name)),e.next=38,gT(u,b).then(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kT(t.ref).then(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!1),e.next=3,Zx(r,{user_message:o,pic:t,createdAt:j,senderID:ST.currentUser.uid,messageAt:rC()});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 38:return e.next=40,Xx(KS(a,T),{unread:!0,lastMessage:o,last_sentId:N});case 40:C(!x),i({type:"bool",payload:x}),E(null),V(),s("");case 45:if(""!=o){e.next=48;break}return e.abrupt("return");case 48:if(!o||b){e.next=57;break}return e.next=51,Zx(r,{user_message:o,pic:null,createdAt:j,senderID:ST.currentUser.uid,messageAt:rC()});case 51:return e.next=53,Xx(KS(a,T),{unread:!0,lastMessage:o,last_sentId:N});case 53:C(!x),i({type:"bool",payload:x}),V(),s("");case 57:case 58:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){V()}),[r.chatId,r.groupId]);var B=function(){var e=Je($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=7;break}return n=WS(xT,"groups/".concat(I,"/group_chats")),r=KS(n,t),e.next=5,Jx(r);case 5:V(),y(null);case 7:if(!T){e.next=14;break}return i=WS(xT,"messages/".concat(T,"/chats")),a=KS(i,t),e.next=12,Jx(a);case 12:V(),y(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{id:r.mode?"togChatRoomDark":"togChatRoomLight",className:"chatroom",children:[l?(0,DT.jsxs)("div",{ref:R,id:r.mode?"togMesDark":"togMesLight",className:"messages",children:[l.map((function(e){return(0,DT.jsx)("div",{className:e.senderID==N?"upperSent":"upperReceive",children:(0,DT.jsxs)("div",{onClick:function(){return y(e.messageAt)},id:r.mode?"togSentDark":"togSentLight",className:e.senderID==N?"sent":"receive",children:[(0,DT.jsx)("div",{style:m===e.messageAt&&e.senderID==N?{display:"flex"}:{display:"none"},className:e.senderID==N?"sentDelete":"receiveDelete",children:(0,DT.jsx)(YT,{onClick:function(){return B(e.id)}})}),e.pic?(0,DT.jsxs)(DT.Fragment,{children:[(0,DT.jsx)("img",{src:e.pic,style:{borderRadius:"10px",border:"1px solid black"},height:"100%",width:"100%"})," ",e.user_message]}):e.user_message,(0,DT.jsxs)("div",{className:"sub",children:[" ",e.createdAt]})]},e.id)})})),k?(0,DT.jsx)("div",{className:"sent",style:{width:"50%",left:"50%"},children:"uploading... "}):null]}):d?(0,DT.jsxs)("div",{ref:R,id:r.mode?"togMesDark":"togMesLight",className:"messages",children:[d.map((function(e){return(0,DT.jsx)("div",{className:e.senderID==N?"upperSent":"upperReceive",children:(0,DT.jsxs)("div",{onClick:function(){return y(e.messageAt)},id:r.mode?"togSentDark":"togSentLight",className:e.senderID==N?"sent":"receive",children:[(0,DT.jsx)("div",{style:m===e.messageAt&&e.senderID==N?{display:"flex"}:{display:"none"},className:e.senderID==N?"sentDelete":"receiveDelete",children:(0,DT.jsx)(YT,{onClick:function(){return B(e.id)}})}),e.pic?(0,DT.jsxs)(DT.Fragment,{children:[(0,DT.jsxs)("div",{className:"imgNname",children:[(0,DT.jsx)("img",{src:e.profilePic,className:"user-image"})," ",e.username]})," ",(0,DT.jsx)("img",{src:e.pic,style:{borderRadius:"10px",border:"1px solid black"},height:"100%",width:"100%"})," ",e.user_message]}):(0,DT.jsxs)(DT.Fragment,{children:[(0,DT.jsxs)("div",{className:"imgNname",children:[(0,DT.jsx)("img",{src:e.profilePic,className:"user-image"})," ",e.username]})," ",e.user_message]}),(0,DT.jsxs)("div",{className:"sub",children:[" ",e.createdAt]})]},e.id)})})),k?(0,DT.jsx)("div",{className:"sent",style:{width:"50%",left:"50%"},children:"uploading... "}):null]}):null,(0,DT.jsxs)("div",{className:"inputNSend",children:[(0,DT.jsx)("input",{type:"text",value:o,id:r.mode?"togInputDark":"togInputLight",className:"messageInput",onChange:function(e){return s(e.target.value)},placeholder:"type message..."}),(0,DT.jsx)("input",{type:"file",style:{display:"none"},onChange:function(e){return E(e.target.files[0])},id:"file"}),(0,DT.jsx)("label",{htmlFor:"file",id:r.mode?"togPicDark":"togPicLight",className:"picUpload",children:(0,DT.jsx)("div",{className:"picUpload",children:(0,DT.jsx)(eI,{})})}),(0,DT.jsx)("button",{type:"submit",id:r.mode?"togSendDark":"togSendLight",onClick:z,className:"sendMes",children:(0,DT.jsx)(QT,{})})]})]})})},nI=function(){var e=(0,t.useContext)(OT),n=e.allUserData,r=e.state,i=e.dispatch,a=AT("(max-width: 768px)"),o=c((0,t.useState)(null),2),s=o[0],u=o[1],l=c((0,t.useState)(""),2),h=l[0],f=l[1],d=c((0,t.useState)(""),2),p=d[0],v=d[1],m=c((0,t.useState)(""),2),y=m[0],g=m[1],k=c((0,t.useState)(!1),2),_=k[0],w=k[1],b=n;return(0,t.useEffect)((function(){!function(){if(b){var e=b.find((function(e){return e.user_id==r.userId})),t=b.find((function(e){return e.user_id==ST.currentUser.uid}));e&&t&&(f(e.originalUsername),v(e.photoUrl),w(!1)),r.groupId&&w(!0)}}()}),[r.chatId,n,r.groupId]),(0,t.useEffect)((function(){var e=b.find((function(e){return e.user_id===ST.currentUser.uid}));e&&g(e.photoUrl)}),[n]),(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{id:r.mode?"togNavDark":"togNavLight",className:"nav",children:[a&&(0,DT.jsx)("div",{className:"backToSidebar",onClick:function(){u(!0),i({type:"isBacked",payload:s})},children:(0,DT.jsx)(ZT,{})}),(0,DT.jsxs)("div",{className:"userNuser",children:[(0,DT.jsxs)("div",{className:"picNname",children:[_?(0,DT.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/fir-chatapp-82a43.appspot.com/o/chat_pics%2Fmessages%2FScreenshot%202024-01-29%20085754.png?alt=media&token=1f9c3b66-8390-421a-91d6-1d58927a60db",className:"circular-image"}):p?(0,DT.jsx)("img",{src:p,className:"circular-image"}):null,(0,DT.jsx)("div",{children:_?"Group-1":h})]}),(0,DT.jsx)("div",{style:{display:"flex"},children:(0,DT.jsx)("img",{src:y,className:"circular-image"})})]})]})})};function rI(e){return WT({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.016 16c-1.066-2.219-0.498-3.49 0.321-4.688 0.897-1.312 1.129-2.61 1.129-2.61s0.706 0.917 0.423 2.352c1.246-1.387 1.482-3.598 1.293-4.445 2.817 1.969 4.021 6.232 2.399 9.392 8.631-4.883 2.147-12.19 1.018-13.013 0.376 0.823 0.448 2.216-0.313 2.893-1.287-4.879-4.468-5.879-4.468-5.879 0.376 2.516-1.364 5.268-3.042 7.324-0.059-1.003-0.122-1.696-0.649-2.656-0.118 1.823-1.511 3.309-1.889 5.135-0.511 2.473 0.383 4.284 3.777 6.197z"},child:[]}]})(e)}function iI(e){return WT({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"},child:[]}]})(e)}var aI=function(){var e=(0,t.useContext)(OT),n=e.state,r=e.dispatch,i=Se(),a=c((0,t.useState)(!0),2),o=a[0],s=a[1];return(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{id:n.mode?"toggleDark":"toggleLight",className:"top_header",children:[(0,DT.jsxs)("div",{className:"fireChat",children:[(0,DT.jsx)(rI,{style:{color:"orange"}}),"Fire-Chat"]}),(0,DT.jsxs)("div",{className:"darkNLog",children:[(0,DT.jsx)("div",{onClick:function(){s(!o),r({type:"darkNlight",payload:o})},id:"darkmode",children:n.mode?(0,DT.jsx)(iI,{style:{color:"#ffff"}}):(0,DT.jsx)(JT,{})}),(0,DT.jsx)("div",{onClick:function(){(function(e){return Ht(e).signOut()})(ST).then((function(){console.log("log out successfuly"),i("/login")})).catch((function(e){return console.log(e)}))},className:"logout",children:(0,DT.jsx)(GT,{})})]})]})})};function oI(e){return WT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"},child:[]}]})(e)}var sI=function(){var e=(0,t.useContext)(OT),n=e.allUserData,r=(e.messageData,e.state),i=e.dispatch,a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)(""),2),l=u[0],h=u[1],f=c((0,t.useState)(""),2),d=f[0],p=f[1],v=c((0,t.useState)(""),2),m=v[0],y=v[1],g=c((0,t.useState)(""),2),k=g[0],_=g[1],w=WS(xT,"allUsers"),b=WS(xT,"messages"),E=n,S=E.find((function(e){return e.id==ST.currentUser.uid})),x=function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E&&(t=E.filter((function(e){return e.username==o.toLocaleLowerCase()})),t.forEach((function(e){console.log(e.id),h(e.originalUsername),p(e.id),_(e.photoUrl)})),l.toLocaleLowerCase()==o.toLocaleLowerCase()?y(l):y(""))}catch(fu){console.error("Error searching for user:",fu.message)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){x()}),[o]);var C=function(){var e=Je($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=ST.currentUser.uid)!=d){e.next=3;break}return e.abrupt("return");case 3:if(""!=d){e.next=5;break}return e.abrupt("return");case 5:return n=ST.currentUser.displayName?ST.currentUser.displayName:S.originalUsername,console.log(m),console.log(n),r=t>d?t+d:d+t,e.prev=9,e.next=12,$x(KS(b,r),{username1:t>d?n:m,username2:t>d?m:n,last_sentId:"",lastMessage:"",unread:!1,createdAt:rC()});case 12:return e.next=14,Xx(KS(w,t),{friends:iC(d)});case 14:return e.next=16,Xx(KS(w,d),{friends:iC(t)});case 16:i({type:"searchId",payload:d}),s(""),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),console.error("Error adding document: ",e.t0);case 23:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(){return e.apply(this,arguments)}}();return(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{className:"searchNres",children:[(0,DT.jsx)("input",{type:"text",value:o,onKeyUp:x,onChange:function(e){return s(e.target.value)},className:"searchInput",placeholder:"search user..."}),(0,DT.jsx)("div",{style:m?{display:"flex"}:{display:"none"},className:"foundedUser",children:(0,DT.jsxs)("div",{className:"removeNname",children:[(0,DT.jsxs)("div",{onClick:C,id:r.mode?"togSearchNimgDark":"nothing",className:"searchNimg",children:[(0,DT.jsx)("img",{src:k,height:"30px",className:"circular-image"}),m]}),(0,DT.jsx)("div",{onClick:function(){return s("")},id:r.mode?"togRemImgDark":"nothing",style:{width:"4%"},children:"x"})]})})]})})},uI=function(){var e=(0,t.useContext)(OT),n=e.allUserData,r=e.messageData,i=e.state,a=e.dispatch,o=c((0,t.useState)([]),2),s=o[0],u=o[1],l=c((0,t.useState)([]),2),h=l[0],f=l[1],d=c((0,t.useState)([]),2),p=d[0],v=d[1],m=ST.currentUser.uid,y=n.find((function(e){return e.user_id==m})),g=WS(xT,"messages"),k=WS(xT,"groups"),_=function(){var e=Je($e().mark((function e(){var t,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=12;break}return t=y.friends||[],i=n.filter((function(e){return t.includes(e.user_id)})),u(i),eC(g,(function(e){var t=r.filter((function(e){return e.username1===y.username||e.username2===y.username}));e.forEach((function(e){t.push(an({},e.data()))})),f(t)})),a=KS(k,"AenyHhj56yKLx6v2hMnt"),e.next=8,Gx(a);case 8:o=e.sent,v(o.data()),e.next=13;break;case 12:return e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){a({type:"isBacked",payload:!1})};return(0,t.useEffect)((function(){_()}),[i.chatId,r]),(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{id:i.mode?"togSideDark":"nothing",className:"sideUsername",children:[(0,DT.jsx)("div",{className:"searchBar",children:(0,DT.jsx)(sI,{})}),s&&s.map((function(e){var t,n,r;return(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsx)("div",{id:"upperFriend",onClick:w,children:(0,DT.jsxs)("div",{onClick:function(){return function(e){a({type:"chatId",payload:e})}(e.user_id)},id:i.mode?"togFrndDark":"nothing",className:"friends",children:[(0,DT.jsx)("img",{src:e.photoUrl,className:"sidebar-image"}),(0,DT.jsx)("div",{style:{display:"flex",alignItems:"center"},children:e.originalUsername}),(0,DT.jsx)("div",{className:"lastMessage",children:null===(t=h.find((function(t){return(t.username1===e.originalUsername||t.username2===e.originalUsername)&&(t.username1===y.originalUsername||t.username2===y.originalUsername)})))||void 0===t?void 0:t.lastMessage}),(0,DT.jsx)("div",{className:"greenDot",children:null!==(n=h.find((function(t){return(t.username1===e.originalUsername||t.username2===e.originalUsername)&&(t.username1===y.originalUsername||t.username2===y.originalUsername)})))&&void 0!==n&&n.unread?(0,DT.jsx)(oI,{style:(null===(r=h.find((function(t){return(t.username1===e.originalUsername||t.username2===e.originalUsername)&&(t.username1===y.originalUsername||t.username2===y.originalUsername)})))||void 0===r?void 0:r.last_sentId)===m?{display:"none"}:{color:"green"}}):(0,DT.jsx)(oI,{style:{display:"none"}})})]},e.id)})})})),(0,DT.jsx)("div",{id:"upperFriend",onClick:w,children:(0,DT.jsxs)("div",{onClick:function(){return function(e){a({type:"groupId",payload:e})}("AenyHhj56yKLx6v2hMnt")},id:i.mode?"togFrndDark":"nothing",className:"friends",children:[(0,DT.jsx)("img",{src:p.groupPic,className:"sidebar-image"}),(0,DT.jsx)("div",{style:{display:"flex",alignItems:"center"},children:p.groupName}),(0,DT.jsx)("div",{className:"lastMessage",children:p.lastMessage}),(0,DT.jsx)("div",{className:"greenDot",children:p.last_sentId?(0,DT.jsx)(oI,{style:p.last_sentId===m?{display:"none"}:{color:"green"}}):(0,DT.jsx)(oI,{style:{display:"none"}})})]})})]})})},cI=function(){var e=(0,t.useContext)(OT).state,n=c((0,t.useState)(null),2),r=n[0],i=n[1],a=AT("(max-width: 768px)");return(0,t.useEffect)((function(){i(e.isBacked)}),[e.isBacked]),(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{className:"wholeStruc",children:[(0,DT.jsx)(aI,{}),(0,DT.jsx)("div",{id:"sideNchat",children:a?(0,DT.jsxs)(DT.Fragment,{children:[(0,DT.jsx)("div",{style:r?{display:"flex",height:"100%",width:"100%"}:{display:"none",opacity:"0"},children:(0,DT.jsx)(uI,{})}),(0,DT.jsxs)("div",{id:"NavNchat",style:r?{display:"none"}:{display:"block"},children:[(0,DT.jsx)(nI,{}),(0,DT.jsx)(tI,{})]})]}):(0,DT.jsxs)(DT.Fragment,{children:[(0,DT.jsx)(uI,{}),(0,DT.jsxs)("div",{id:"NavNchat",children:[(0,DT.jsx)(nI,{}),(0,DT.jsx)(tI,{})]})]})})]})})};function lI(e){return WT({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(e)}var hI=function(){var e=c((0,t.useState)(""),2),n=e[0],r=e[1],i=c((0,t.useState)(""),2),a=i[0],o=i[1],s=c((0,t.useState)(""),2),u=s[0],l=s[1],h=Se(),f=(WS(xT,"allUsers"),function(){var e=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$x(KS(xT,"allUsers",r),{username:n.toLocaleLowerCase(),originalUsername:n,photoUrl:t||"https://firebasestorage.googleapis.com/v0/b/fir-chatapp-82a43.appspot.com/o/chat_pics%2Fmessages%2Fdownload.png?alt=media&token=de4f6ae9-a9eb-4cdf-9719-274c0658cbfd",userCreatedAt:rC(),friends:[],user_id:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());return(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{className:"wholeBody",children:[(0,DT.jsxs)("form",{className:"formDetails",children:[(0,DT.jsx)("h2",{style:{letterSpacing:"1px",paddingBottom:"5px"},children:"Sign In"}),(0,DT.jsx)("input",{type:"email",className:"input",value:n,onChange:function(e){return r(e.target.value)},placeholder:"type email"}),(0,DT.jsx)("input",{type:"password",className:"input",value:a,onChange:function(e){return o(e.target.value)},placeholder:"type password"})]}),(0,DT.jsxs)("div",{className:"three",children:[(0,DT.jsx)("button",{onClick:function(e){e.preventDefault(),function(e,t,n){return Fa(Ht(e),ka.credential(t,n)).catch(function(){var t=Je($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Va(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(ST,n,a).then((function(e){h("/"),l("")})).catch((function(e){l("Invalid email or password")}))},className:"submit",children:"Submit"}),(0,DT.jsx)("div",{style:{fontWeight:"600"},children:"or"}),(0,DT.jsxs)("div",{onClick:function(){var e=new Ea;jo(ST,e).then((function(e){f(e.user.photoURL,e.user.displayName,e.user.uid),h("/"),l("")})).catch((function(e){l("Invalid email or password")}))},className:"googleSign",children:[(0,DT.jsx)(lI,{style:{fontSize:"1.27em"}}),"Sign In with Google"]}),(0,DT.jsx)("div",{className:"createUser",onClick:function(){h("/SignUp")},children:"Create an user"}),(0,DT.jsx)("div",{style:{color:"red",height:"10px"},children:u||null})]})]})})};var fI,dI,pI,vI,mI=function(){var e=c((0,t.useState)(""),2),n=e[0],r=e[1],i=c((0,t.useState)(null),2),a=i[0],o=i[1],s=c((0,t.useState)(""),2),u=s[0],l=s[1],h=c((0,t.useState)(""),2),f=h[0],d=h[1],p=c((0,t.useState)(""),2),v=p[0],m=p[1],y=c((0,t.useState)(!1),2),g=y[0],k=y[1],_=Se(),w=(WS(xT,"allUsers"),function(){var e=Je($e().mark((function e(t,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$x(KS(xT,"allUsers",i),{username:n?n.toLocaleLowerCase():r.toLocaleLowerCase(),originalUsername:n||r,photoUrl:t||"https://firebasestorage.googleapis.com/v0/b/fir-chatapp-82a43.appspot.com/o/chat_pics%2Fmessages%2Fdownload.png?alt=media&token=de4f6ae9-a9eb-4cdf-9719-274c0658cbfd",userCreatedAt:rC(),friends:[],user_id:i});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),b=function(){var e=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xx(KS(xT,"groups","AenyHhj56yKLx6v2hMnt"),{friends:iC(r)});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a?Ba(ST,u,f).then(function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.user),k(!0),n=_T(CT,"/chat_pics/profile/".concat(a.name)),e.next=5,gT(n,a).then(function(){var e=Je($e().mark((function e(n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kT(n.ref).then((function(e){w(e,null,t.user.uid),b(null,null,t.user.uid),_("/"),m(""),k(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){m(e.message)})):Ba(ST,u,f).then(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.user),w(null,null,t.user.uid),b(null,null,t.user.uid),_("/"),m("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){m(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Ea,jo(ST,t).then((function(e){w(e.user.photoURL,e.user.displayName,e.user.uid),b(null,null,e.user.uid),_("/"),m("")})).catch((function(e){console.log(e.message),m(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,DT.jsx)(DT.Fragment,{children:(0,DT.jsxs)("div",{className:"wholeBody",children:[(0,DT.jsxs)("form",{className:"formDetails",children:[(0,DT.jsx)("h2",{style:{letterSpacing:"1px",color:"#ffff",paddingBottom:"5px"},children:"Create Your Profile"}),(0,DT.jsx)("input",{type:"text",className:"input",value:n,onChange:function(e){return r(e.target.value)},placeholder:"type your name"}),(0,DT.jsx)("input",{type:"file",style:{display:"none"},onChange:function(e){return o(e.target.files[0])},id:"file"}),(0,DT.jsxs)("label",{htmlFor:"file",className:"input",id:"files",style:{display:"flex"},children:[(0,DT.jsx)("div",{children:"choose your pic"}),(0,DT.jsx)(XT,{style:{fontSize:"1.3em"},id:"svg"})]}),(0,DT.jsx)("input",{type:"email",className:"input",value:u,onChange:function(e){return l(e.target.value)},placeholder:"type email"}),(0,DT.jsx)("input",{type:"password",className:"input",value:f,onChange:function(e){return d(e.target.value)},placeholder:"type password"})]}),(0,DT.jsxs)("div",{className:"three",children:[(0,DT.jsx)("button",{onClick:E,className:"submit",children:"Submit"}),(0,DT.jsx)("div",{style:{fontWeight:"600"},children:"or"}),(0,DT.jsxs)("div",{onClick:S,className:"googleSign",children:[(0,DT.jsx)(lI,{style:{fontSize:"1.27em"}}),"Sign In with Google"]}),(0,DT.jsxs)("div",{className:"parentLogin",style:{paddingTop:"5px"},children:[(0,DT.jsx)("div",{children:"Already exist?"})," ",(0,DT.jsxs)(Ge,{to:"/LogIn",className:"login",children:["Login page ",(0,DT.jsx)($T,{style:{fontSize:"1.35em"}})]})]}),(0,DT.jsx)("div",{style:{height:"10px"},children:v?(0,DT.jsx)("div",{style:{color:"red",height:"10px"},children:v}):g?(0,DT.jsx)("div",{style:{color:"yellow",height:"10px"},children:"Loading please wait"}):null})]})]})})},yI=function(){var e=c((0,t.useState)(null),2),n=e[0],r=e[1],i=c((0,t.useState)(!0),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){var e=function(e,t,n,r){return Ht(e).onAuthStateChanged(t,n,r)}(ST,(function(e){r(e),o(!1)}));return function(){return e()}}),[]),a?"Loading please wait..":(0,DT.jsx)(LT,{children:(0,DT.jsx)(He,{children:(0,DT.jsxs)(Fe,{children:[(0,DT.jsx)(Me,{path:"/",element:n?(0,DT.jsx)(cI,{}):(0,DT.jsx)(hI,{})}),(0,DT.jsx)(Me,{path:"/SignUp",element:(0,DT.jsx)(mI,{})}),(0,DT.jsx)(Me,{path:"/LogIn",element:n?(0,DT.jsx)(Le,{to:"/"}):(0,DT.jsx)(hI,{})})]})})})},gI=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},kI=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},_I=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},wI=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},bI=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},EI=-1,SI=function(){return"hidden"===document.visibilityState?0:1/0},xI=function(){_I((function(e){var t=e.timeStamp;EI=t}),!0)},CI=function(){return EI<0&&(EI=SI(),xI(),wI((function(){setTimeout((function(){EI=SI(),xI()}),0)}))),{get firstHiddenTime(){return EI}}},TI=function(e,t){var n,r=CI(),i=gI("FCP"),a=function(e){"first-contentful-paint"===e.name&&(s&&s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},o=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=o?null:kI("paint",a);(o||s)&&(n=bI(e,i,t),o&&a(o),wI((function(r){i=gI("FCP"),n=bI(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,n(!0)}))}))})))},II=!1,NI=-1,RI={passive:!0,capture:!0},AI=new Date,PI=function(e,t){fI||(fI=t,dI=e,pI=new Date,LI(removeEventListener),OI())},OI=function(){if(dI>=0&&dI<pI-AI){var e={entryType:"first-input",name:fI.type,target:fI.target,cancelable:fI.cancelable,startTime:fI.timeStamp,processingStart:fI.timeStamp+dI};vI.forEach((function(t){t(e)})),vI=[]}},DI=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){PI(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,RI),removeEventListener("pointercancel",r,RI)};addEventListener("pointerup",n,RI),addEventListener("pointercancel",r,RI)}(t,e):PI(t,e)}},LI=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,DI,RI)}))},MI={};function UI(e){}!function(e,t){II||(TI((function(e){NI=e.value})),II=!0);var n,r=function(t){NI>-1&&e(t)},i=gI("CLS",0),a=0,o=[],s=function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,o.push(e)):(a=e.value,o=[e]),a>i.value&&(i.value=a,i.entries=o,n())}},u=kI("layout-shift",s);u&&(n=bI(r,i,t),_I((function(){u.takeRecords().map(s),n(!0)})),wI((function(){a=0,NI=-1,i=gI("CLS",0),n=bI(r,i,t)})))}(UI),function(e,t){var n,r=CI(),i=gI("FID"),a=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},o=kI("first-input",a);n=bI(e,i,t),o&&_I((function(){o.takeRecords().map(a),o.disconnect()}),!0),o&&wI((function(){var r;i=gI("FID"),n=bI(e,i,t),vI=[],dI=-1,fI=null,LI(addEventListener),r=a,vI.push(r),OI()}))}(UI),function(e,t){var n,r=CI(),i=gI("LCP"),a=function(e){var t=e.startTime;t<r.firstHiddenTime&&(i.value=t,i.entries.push(e),n())},o=kI("largest-contentful-paint",a);if(o){n=bI(e,i,t);var s=function(){MI[i.id]||(o.takeRecords().map(a),o.disconnect(),MI[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,s,{once:!0,capture:!0})})),_I(s,!0),wI((function(r){i=gI("LCP"),n=bI(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,MI[i.id]=!0,n(!0)}))}))}))}}(UI),TI(UI),function(e){var t,n=gI("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();if(n.value=n.delta=t.responseStart,n.value<0||n.value>performance.now())return;n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("load",(function(){return setTimeout(t,0)}))}(UI);var FI=UI;i.createRoot(document.getElementById("root")).render((0,DT.jsx)(yI,{})),FI()}()}();
//# sourceMappingURL=main.4685ad5e.js.map